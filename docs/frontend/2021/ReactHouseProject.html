<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>reactç§Ÿæˆ¿é¡¹ç›® | huawink</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/huawink-/favicon.ico">
    <meta name="description" content="ä¸€ä¸ªåšå®¢é¡¹ç›®">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/huawink-/assets/css/0.styles.199fbbe3.css" as="style"><link rel="preload" href="/huawink-/assets/js/app.3aacfd90.js" as="script"><link rel="preload" href="/huawink-/assets/js/3.ee31ba41.js" as="script"><link rel="preload" href="/huawink-/assets/js/1.3a84ebb9.js" as="script"><link rel="preload" href="/huawink-/assets/js/25.f5f0deb4.js" as="script"><link rel="preload" href="/huawink-/assets/js/9.724b2d6f.js" as="script"><link rel="prefetch" href="/huawink-/assets/js/10.eddf6c6b.js"><link rel="prefetch" href="/huawink-/assets/js/11.1d29931b.js"><link rel="prefetch" href="/huawink-/assets/js/12.812baf57.js"><link rel="prefetch" href="/huawink-/assets/js/13.3d8a8a70.js"><link rel="prefetch" href="/huawink-/assets/js/14.132ed842.js"><link rel="prefetch" href="/huawink-/assets/js/15.5eed6434.js"><link rel="prefetch" href="/huawink-/assets/js/16.85803b52.js"><link rel="prefetch" href="/huawink-/assets/js/17.3ff4a893.js"><link rel="prefetch" href="/huawink-/assets/js/18.57bb1084.js"><link rel="prefetch" href="/huawink-/assets/js/19.a590910f.js"><link rel="prefetch" href="/huawink-/assets/js/20.fb9c394b.js"><link rel="prefetch" href="/huawink-/assets/js/21.a41cb629.js"><link rel="prefetch" href="/huawink-/assets/js/22.6b589ebf.js"><link rel="prefetch" href="/huawink-/assets/js/23.df521f3a.js"><link rel="prefetch" href="/huawink-/assets/js/24.885853a1.js"><link rel="prefetch" href="/huawink-/assets/js/26.209fd055.js"><link rel="prefetch" href="/huawink-/assets/js/27.3f29158c.js"><link rel="prefetch" href="/huawink-/assets/js/28.5e990187.js"><link rel="prefetch" href="/huawink-/assets/js/29.f121b08d.js"><link rel="prefetch" href="/huawink-/assets/js/30.9ae1eb2d.js"><link rel="prefetch" href="/huawink-/assets/js/31.4d64d6ad.js"><link rel="prefetch" href="/huawink-/assets/js/32.04665432.js"><link rel="prefetch" href="/huawink-/assets/js/33.dda6d141.js"><link rel="prefetch" href="/huawink-/assets/js/4.a2c345bc.js"><link rel="prefetch" href="/huawink-/assets/js/5.c619cb1b.js"><link rel="prefetch" href="/huawink-/assets/js/6.b0b02ed5.js"><link rel="prefetch" href="/huawink-/assets/js/7.1fd2a429.js"><link rel="prefetch" href="/huawink-/assets/js/8.151b82b2.js">
    <link rel="stylesheet" href="/huawink-/assets/css/0.styles.199fbbe3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>huawink</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>ä¸€ä¸ªåšå®¢é¡¹ç›®</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>huawink</span>
          Â Â 
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/huawink-/" class="home-link router-link-active"><img src="/huawink-/LOGO.jpg" alt="huawink" class="logo"> <span class="site-name">huawink</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/huawink-/messageboard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  ç•™è¨€æ¿
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/huawink-/categories/2021/" class="nav-link"><i class="undefined"></i>
  2021
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/categories/2022/" class="nav-link"><i class="undefined"></i>
  2022
</a></li></ul></div></div><div class="nav-item"><a href="/huawink-/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/huawink-/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/huawink-/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      ç¬”è®°
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/huawink-/docs/frontend/" class="nav-link router-link-active"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/frontback-go/" class="nav-link"><i class="undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/face-interview/" class="nav-link"><i class="undefined"></i>
  é¢è¯•
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/block-chain/" class="nav-link"><i class="undefined"></i>
  åŒºå—é“¾
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/huahuahuahuahuahua" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/huawink-/6e264f2185b6afa0c275d4637d8eabb1.jpg" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    huawink
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>20</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>12</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/huawink-/messageboard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  ç•™è¨€æ¿
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/huawink-/categories/2021/" class="nav-link"><i class="undefined"></i>
  2021
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/categories/2022/" class="nav-link"><i class="undefined"></i>
  2022
</a></li></ul></div></div><div class="nav-item"><a href="/huawink-/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/huawink-/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/huawink-/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      ç¬”è®°
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/huawink-/docs/frontend/" class="nav-link router-link-active"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/frontback-go/" class="nav-link"><i class="undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/face-interview/" class="nav-link"><i class="undefined"></i>
  é¢è¯•
</a></li><li class="dropdown-item"><!----> <a href="/huawink-/docs/block-chain/" class="nav-link"><i class="undefined"></i>
  åŒºå—é“¾
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/huahuahuahuahuahua" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2021</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/huawink-/docs/frontend/2021/" aria-current="page" class="sidebar-link">2021å‰ç«¯å­¦ä¹ </a></li><li><a href="/huawink-/docs/frontend/2021/ASTTransfeRender.html" class="sidebar-link">ASTè¯­æ³•æ ‘è½¬renderå‡½æ•°</a></li><li><a href="/huawink-/docs/frontend/2021/CommonJSAndES6.html" class="sidebar-link">CommonJSæ¨¡å—ä¸ES6æ¨¡å—çš„åŒºåˆ«</a></li><li><a href="/huawink-/docs/frontend/2021/CommonJSSummary.html" class="sidebar-link">CommonJSæ¨¡å—</a></li><li><a href="/huawink-/docs/frontend/2021/CompositionAPI.html" class="sidebar-link">Composition API</a></li><li><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html" aria-current="page" class="active sidebar-link">reactç§Ÿæˆ¿é¡¹ç›®</a></li><li><a href="/huawink-/docs/frontend/2021/createElement.html" class="sidebar-link">createElement ç”¨æ³•</a></li><li><a href="/huawink-/docs/frontend/2021/frontDesignDocument.html" class="sidebar-link">å¦‚ä½•ç¼–å†™å‰ç«¯è®¾è®¡æ–‡æ¡£ï¼Ÿ</a></li><li><a href="/huawink-/docs/frontend/2021/gitbookintroduction.html" class="sidebar-link">/docs/frontend/2021/gitbookintroduction.html</a></li><li><a href="/huawink-/docs/frontend/2021/vueSupermallProject.html" class="sidebar-link">vueå•†åŸé¡¹ç›®</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>reactç§Ÿæˆ¿é¡¹ç›®</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>huawink</span>
          Â Â 
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">reactç§Ÿæˆ¿é¡¹ç›®</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>huawink</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>10/5/2020</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>å‰ç«¯</span><span class="tag-item" data-v-f875f3fc>é¡¹ç›®</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="reactç§Ÿæˆ¿é¡¹ç›®"><a href="#reactç§Ÿæˆ¿é¡¹ç›®" class="header-anchor">#</a> reactç§Ÿæˆ¿é¡¹ç›®ğŸ˜€</h1> <h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day01"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day01" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day01</h2> <p>é¡¹ç›®æ¼”ç¤º&amp;é¡¹ç›®æ­å»º&amp;antd-mobileçš„TabBarä½¿ç”¨</p> <h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="header-anchor">#</a> ç›®æ ‡</h3> <p>èƒ½å¤Ÿåˆå§‹åŒ–é¡¹ç›®
èƒ½å¤Ÿä½¿ç”¨ antd-mobile ç»„ä»¶åº“
èƒ½å¤Ÿå®Œæˆé¡¹ç›®æ•´ä½“å¸ƒå±€
èƒ½å¤Ÿç†è§£åµŒå¥—è·¯ç”±
èƒ½å¤Ÿä½¿ç”¨antd-mobileæä¾›çš„TabBarç»„ä»¶
èƒ½å¤Ÿå¯¹TabBarè¿›è¡Œå®šåˆ¶
èƒ½å¤Ÿå®ç°é¦–é¡µè·¯ç”±çš„å¤„ç†
é¡¹ç›®ä»‹ç»
å¥½å®¢ç§Ÿæˆ¿ - ç§»åŠ¨ Web ç«¯
é¡¹ç›®ä»‹ç»ï¼šæœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåœ¨çº¿ç§Ÿæˆ¿é¡¹ç›®ï¼Œå®ç°äº†ç±»ä¼¼é“¾å®¶ç­‰é¡¹ç›®çš„åŠŸèƒ½ï¼Œè§£å†³äº†ç”¨æˆ·ç§Ÿæˆ¿çš„éœ€æ±‚
æ ¸å¿ƒä¸šåŠ¡ï¼šåœ¨çº¿æ‰¾æˆ¿ï¼ˆåœ°å›¾ã€æ¡ä»¶æœç´¢ï¼‰ã€ç”¨æˆ·ç™»å½•ã€æˆ¿æºå‘å¸ƒç­‰</p> <p>æŠ€æœ¯æ ˆ
Reactæ ¸å¿ƒåº“ï¼šreactã€react-domã€react-router-dom
è„šæ‰‹æ¶ï¼šcreate-react-app
æ•°æ®è¯·æ±‚ï¼šaxios
UIç»„ä»¶åº“ï¼šantd-mobile
å…¶ä»–ç»„ä»¶åº“ï¼šreact-virtualizedã€formik+yupã€react-springç­‰
ç™¾åº¦åœ°å›¾API
é¡¹ç›®å‡†å¤‡</p> <h3 id="é¡¹ç›®æ­å»º-â˜…â˜…â˜…"><a href="#é¡¹ç›®æ­å»º-â˜…â˜…â˜…" class="header-anchor">#</a> é¡¹ç›®æ­å»ºï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <p>æœ¬åœ°æ¥å£éƒ¨ç½²
åˆ›å»ºå¹¶å¯¼å…¥æ•°æ®ï¼šæ•°æ®åº“åç§°hkzf(å›ºå®šåç§°)
ä½¿ç”¨è„šæ‰‹æ¶åˆå§‹åŒ–é¡¹ç›®
ä½¿ç”¨ npx create-react-app hkzf-mobile
è¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½• ä½¿ç”¨ npm start
é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆâ˜…â˜…â˜…ï¼‰</p> <p>è°ƒæ•´é¡¹ç›®ç»“æ„</p> <p>antd-mobile ç»„ä»¶åº“ï¼ˆâ˜…â˜…â˜…ï¼‰
ä»‹ç»ä¸ä½¿ç”¨
æ‰“å¼€ antd-mobileçš„æ–‡æ¡£
antd-mobile æ˜¯ Ant Design çš„ç§»åŠ¨è§„èŒƒçš„ React å®ç°ï¼ŒæœåŠ¡äºèš‚èšåŠå£ç¢‘æ— çº¿ä¸šåŠ¡ã€‚
ç‰¹æ€§
UI æ ·å¼é«˜åº¦å¯é…ç½®ï¼Œæ‹“å±•æ€§æ›´å¼ºï¼Œè½»æ¾é€‚åº”å„ç±»äº§å“é£æ ¼
åŸºäº React Native çš„ iOS / Android / Web å¤šå¹³å°æ”¯æŒï¼Œç»„ä»¶ä¸°å¯Œã€èƒ½å…¨é¢è¦†ç›–å„ç±»åœºæ™¯ (antd-mobile-rn)
æä¾› â€œç»„ä»¶æŒ‰éœ€åŠ è½½â€ / â€œWeb é¡µé¢é«˜æ¸…æ˜¾ç¤ºâ€ / â€œSVG Iconâ€ ç­‰ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¸€ä½“å¼å¼€å‘
ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œæ”¯æŒç±»å‹åŠå±æ€§æ™ºèƒ½æç¤ºï¼Œæ–¹ä¾¿ä¸šåŠ¡å¼€å‘
å…¨é¢å…¼å®¹ react / preact
é€‚ç”¨åœºæ™¯
é€‚åˆäºä¸­å¤§å‹äº§å“åº”ç”¨
é€‚åˆäºåŸºäº react / preact / react-native çš„å¤šç»ˆç«¯åº”ç”¨
é€‚åˆä¸åŒ UI é£æ ¼çš„é«˜åº¦å®šåˆ¶éœ€æ±‚çš„åº”ç”¨
å¿«é€Ÿä¸Šæ‰‹
åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p> <h3 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h3> <p>npm install antd-mobile --save
ä½¿ç”¨</p> <p>å¯¼å…¥ç»„ä»¶
å¯¼å…¥æ ·å¼</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å¯¼å…¥ç»„ä»¶
import { Button } from 'antd-mobile';
// å¯¼å…¥æ ·å¼
import 'antd-mobile/dist/antd-mobile.css';  // or 'antd-mobile/dist/antd-mobile.less'
ReactDOM.render(&lt;Button&gt;Start&lt;/Button&gt;, mountNode);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="é…ç½®è·¯ç”±"><a href="#é…ç½®è·¯ç”±" class="header-anchor">#</a> é…ç½®è·¯ç”±</h3> <p>å®‰è£… yarn add react-router-dom
å¯¼å…¥è·¯ç”±ç»„ä»¶ï¼šRouter / Route / Link
åœ¨pagesæ–‡ä»¶å¤¹ä¸­åˆ›å»º Home/index.js å’Œ CityList/index.js ä¸¤ä¸ªç»„ä»¶
ä½¿ç”¨Routeç»„ä»¶é…ç½®é¦–é¡µå’ŒåŸå¸‚é€‰æ‹©é¡µé¢</p> <p>å¤–è§‚å’Œæ ·å¼è°ƒæ•´
ä¿®æ”¹é¡µé¢æ ‡é¢˜ï¼Œåœ¨index.htmlé‡Œé¢ä¿®æ”¹
åŸºç¡€æ ·å¼è°ƒæ•´ï¼Œåœ¨index.css ä¸­è°ƒæ•´</p> <p>é¡¹ç›®æ•´ä½“å¸ƒå±€
ä¸¤ç§é¡µé¢å¸ƒå±€
æœ‰TabBarçš„é¡µé¢ï¼š é¦–é¡µã€æ‰¾æˆ¿ã€èµ„è®¯ã€æˆ‘çš„
æ— TabBarçš„é¡µé¢ï¼šåŸå¸‚é€‰æ‹©ç­‰
TabBar çš„èœå•ä¹Ÿå¯ä»¥å®ç°è·¯ç”±åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å†…éƒ¨åˆ‡æ¢è·¯ç”±ï¼ˆåµŒå¥—è·¯ç”±ï¼‰</p> <p>åµŒå¥—è·¯ç”±ï¼ˆâ˜…â˜…â˜…ï¼‰
åµŒå¥—è·¯ç”±ï¼šè·¯ç”±å†…éƒ¨åŒ…å«è·¯ç”±
ç”¨Homeç»„ä»¶è¡¨ç¤ºçˆ¶è·¯ç”±çš„å†…å®¹
ç”¨Newsç»„ä»¶è¡¨ç¤ºå­è·¯ç”±çš„å†…å®¹
ä½¿ç”¨æ­¥éª¤
åœ¨pagesæ–‡ä»¶å¤¹ä¸­åˆ›å»ºNews/index.js ç»„ä»¶
åœ¨Homeç»„ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªRouteä½œä¸ºå­è·¯ç”±çš„å‡ºå£
è®¾ç½®åµŒå¥—è·¯ç”±çš„pathï¼Œæ ¼å¼ä»¥çˆ¶è·¯ç”±pathå¼€å¤´(çˆ¶ç»„ä»¶å±•ç¤ºäº†ï¼Œå­ç»„ä»¶æ‰ä¼šå±•ç¤º)
ä¿®æ”¹pathnameä¸º /home/newsï¼ŒNewsç»„ä»¶çš„å†…å®¹å°±ä¼šå±•ç¤ºåœ¨Homeç»„ä»¶ä¸­äº†</p> <p>å®ç°TabBarï¼ˆâ˜…â˜…â˜…ï¼‰
æ‹·è´TabBarç»„ä»¶ç»“æ„
æ‰“å¼€ antd-mobile ç»„ä»¶åº“ä¸­TabBarçš„ç»„ä»¶æ–‡æ¡£
é€‰æ‹©APPå‹é€‰é¡¹å¡èœå•ï¼Œç‚¹å‡» &lt;/&gt;æ˜¾ç¤ºæºç 
æ‹·è´æ ¸å¿ƒä»£ç åˆ° Home ç»„ä»¶ä¸­ï¼ˆHomeæ˜¯çˆ¶è·¯ç”±ç»„ä»¶ï¼‰
è°ƒæ•´ä»£ç 
ä¿®æ”¹TabBarç»„ä»¶æ ·å¼
ä¿®æ”¹TabBarèœå•é¡¹æ–‡å­—æ ‡é¢˜
TabBarçš„æ–‡å­—æ ‡é¢˜åœ¨TabBar.Item çš„titleå±æ€§ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹å¯¹åº”å››ä¸ªtitleå±æ€§å³å¯</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;TabBar.Item
    title=&quot;é¦–é¡µ&quot;
    ...

&gt;&lt;/TabBar.Item&gt;
&gt;&lt;TabBar.Item
&gt;title=&quot;æ‰¾æˆ¿&quot;
&gt;...
&gt;
&gt;&lt;/TabBar.Item&gt;
&gt;&lt;TabBar.Item
&gt;title=&quot;å’¨è¯¢&quot;
&gt;...
&gt;
&gt;&lt;/TabBar.Item&gt;
&gt;&lt;TabBar.Item
&gt;title=&quot;æˆ‘çš„&quot;
&gt;...
&gt;
&gt;&lt;/TabBar.Item&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>ä¿®æ”¹TabBarèœå•æ–‡å­—æ ‡é¢˜é¢œè‰²
TabBarèœå•é€‰ä¸­çš„æ–‡å­—é¢œè‰²åœ¨ TabBarçš„ tintColor å±æ€§ä¸­è®¾ç½®
æœªé€‰ä¸­æ–‡å­—é¢œè‰²ç”¨é»˜è®¤çš„å³å¯ï¼Œåˆ é™¤ TabBarä¸­çš„ unselectedTintColor å±æ€§</p> <blockquote><div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;TabBar
tintColor=&quot;#21b97a&quot;
barTintColor=&quot;white&quot;

...
&lt;/TabBar&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä½¿ç”¨å­—å›¾å›¾æ ‡ï¼Œä¿®æ”¹TabBarèœå•çš„å›¾æ ‡
å­—ä½“å›¾æ ‡çš„ èµ„æºåœ¨è¯¾ä»¶çš„ç´ æä¸­ï¼Œç›´æ¥å¤åˆ¶è¿‡æ¥å³å¯
åœ¨ index.jsé‡Œé¢å¼•å…¥å­—ä½“å›¾æ ‡çš„ cssæ ·å¼æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦åœ¨ç»„ä»¶ä¸­è®¾ç½®å¯¹åº”çš„ç±»åå³å¯,iconä»£è¡¨æ˜¯é»˜è®¤å›¾æ ‡ï¼ŒselectedIconä»£è¡¨æ˜¯é€‰ä¸­çš„å›¾æ ‡</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>
&lt;TabBar.Item
{/*é»˜è®¤çš„å›¾æ ‡*/}
icon={
 &lt;i className=&quot;iconfont icon-ind&quot;&gt;&lt;/i&gt;
}
{/*é€‰ä¸­å›¾æ ‡*/}
selectedIcon={&lt;i className=&quot;iconfont icon-ind&quot;&gt;&lt;/i&gt;
}
...

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
icon={
 &lt;i className=&quot;iconfont icon-findHouse&quot;&gt;&lt;/i&gt;
}
selectedIcon={
 &lt;i className=&quot;iconfont icon-findHouse&quot;&gt;&lt;/i&gt;
}
...

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
icon={
 &lt;i className=&quot;iconfont icon-infom&quot;&gt;&lt;/i&gt;
}
selectedIcon={
 &lt;i className=&quot;iconfont icon-infom&quot;&gt;&lt;/i&gt;
}
...

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
icon={
 &lt;i className=&quot;iconfont icon-my&quot;&gt;&lt;/i&gt;
}
selectedIcon={&lt;i className=&quot;iconfont icon-my&quot;&gt;&lt;/i&gt;}
...

&lt;/TabBar.Item&gt;
ä¿®æ”¹TabBarèœå•é¡¹çš„å›¾æ ‡å¤§å°
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></blockquote> <p>åœ¨å½“å‰ç»„ä»¶å¯¹åº”æ–‡ä»¶å¤¹ä¸­åˆ›å»ºindex.cssæ–‡ä»¶ï¼Œä¿®æ”¹ä¸€ä¸‹å­—ä½“å›¾æ ‡çš„å¤§å°ï¼Œè®¾ç½®ä¸º20pxï¼ˆæ³¨æ„ï¼Œåœ¨home.jsä¸­è®°å¾—å¯¼å…¥å½“å‰çš„æ ·å¼ï¼‰
è°ƒæ•´TabBarçš„ä½ç½®ï¼Œå›ºå®šåœ¨æœ€åº•éƒ¨</p> <p>é€šè¿‡è°ƒè¯•å·¥å…·æˆ‘ä»¬å‘ç°ï¼Œåº•éƒ¨çš„TabBarçš„ç±»åå« am-tab-bar-barï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€ä¸‹è¿™ä¸ªç±»åçš„å±æ€§å³å¯
å»æ‰TabBarçš„å¾½ç« </p> <p>æ‰¾åˆ°TabBar.Itemé‡Œé¢å¯¹åº”çš„ badge å±æ€§ï¼Œåˆ é™¤å³å¯
TabBaré…åˆè·¯ç”±å®ç°
æ ¹æ®TabBarç»„ä»¶æ–‡æ¡£è®¾ç½®ä¸æ¸²æŸ“å†…å®¹ï¼ˆåªä¿ç•™èœå•é¡¹ï¼Œä¸æ˜¾ç¤ºå†…å®¹ï¼‰
ç»™TabBarè®¾ç½® noRenderContent å±æ€§å³å¯
&lt;TabBar
...
noRenderContent = &quot;true&quot;</p> <p>ç»™TabBar.Item ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œåœ¨ç‚¹å‡»äº‹ä»¶é€»è¾‘é‡Œé¢åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªï¼Œè¿›è¡Œè·¯ç”±çš„åˆ‡æ¢
åˆ©ç”¨ this.props.history,push() æ¥å®ç°</p> <blockquote><div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;TabBar.Item
...
onPress={() =&gt; {
 this.setState({
     selectedTab: 'blueTab',
 });
 {/* åˆ‡æ¢è·¯ç”± */}
 this.props.history.push('/home/index')
}}

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
...
onPress={() =&gt; {
 this.setState({
     selectedTab: 'redTab',
 });
 this.props.history.push('/home/list')
}}

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
...
onPress={() =&gt; {
 this.setState({
     selectedTab: 'greenTab',
 });
 this.props.history.push('/home/news')
}}

&lt;/TabBar.Item&gt;
&lt;TabBar.Item
...
onPress={() =&gt; {
 this.setState({
     selectedTab: 'yellowTab',
 });
 this.props.history.push('/home/profile')
}}

&lt;/TabBar.Item&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>åˆ›å»ºTabBarç»„ä»¶èœå•é¡¹å¯¹åº”çš„å…¶ä»–3ä¸ªç»„ä»¶ï¼Œå¹¶åœ¨Homeç»„ä»¶ä¸­é…ç½®è·¯ç”±ä¿¡æ¯
åˆ›å»ºå¯¹åº”çš„ç»„ä»¶ï¼Œç„¶ååœ¨ home.jsä¸­è¿›è¡Œå¯¼å…¥ï¼Œæœ€åé…ç½®ä¸€ä¸‹è·¯ç”±
{/* é…ç½®è·¯ç”±ä¿¡æ¯ */}</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Route path=&quot;/home/index&quot; component={Index}&gt;&lt;/Route&gt;
&lt;Route path=&quot;/home/list&quot; component={HouseList}&gt;&lt;/Route&gt;
&lt;Route path=&quot;/home/news&quot; component={News}&gt;&lt;/Route&gt;
&lt;Route path=&quot;/home/profile&quot; component={Profile}&gt;&lt;/Route&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç»™èœå•é¡¹æ·»åŠ selectedå±æ€§ï¼Œè®¾ç½®å½“å‰åŒ¹é…çš„èœå•é¡¹é«˜äº®</p></blockquote> <p>é€šè¿‡ this.props.location.pathname å°±èƒ½æ‹¿åˆ°å½“å‰çš„è·¯ç”±çš„path
åœ¨TabBarItemé‡Œé¢è®¾ç½® selectedçš„å±æ€§ï¼Œåˆ¤æ–­æ˜¯å¦ç­‰äºå½“å‰çš„pathname
åœ¨stateä¸­è®°å½•å½“å‰çš„pathname</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code> state = {
     // é€‰ä¸­çš„èœå•é¡¹,è®°å½•å½“å‰çš„pathnameæ¥åŒ¹é…å¯¹åº”çš„tab
     //pathname å±æ€§æ˜¯ä¸€ä¸ªå¯è¯»å¯å†™çš„å­—ç¬¦ä¸²ï¼Œå¯è®¾ç½®æˆ–è¿”å›å½“å‰ URL çš„è·¯å¾„éƒ¨åˆ†ã€‚
     selectedTab: this.props.location.pathname,
 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨æ¯ä¸ªTabBar.Itemé‡Œé¢åˆ©ç”¨selectedå±æ€§åˆ¤æ–­ä¸€ä¸‹</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;TabBar.Item
     selected={this.state.selectedTab === '/home/index'}
     onPress={() =&gt; {
         this.setState({
             selectedTab: '/home/index',
         });
         this.props.history.push('/home/index')
     }}
     ...

 &gt; &lt;/TabBar.Item&gt;
 &gt; &lt;TabBar.Item
 &gt;selected={this.state.selectedTab === '/home/list'}
 &gt;onPress={() =&gt; {
 &gt;   this.setState({
 &gt;       selectedTab: '/home/list',
 &gt;   });
 &gt;   this.props.history.push('/home/list')
 &gt;}}
 &gt;...
 &gt;
 &gt; &lt;/TabBar.Item&gt;
 &gt; &lt;TabBar.Item
 &gt;selected={this.state.selectedTab === '/home/news'}
 &gt;onPress={() =&gt; {
 &gt;   this.setState({
 &gt;       selectedTab: '/home/news',
 &gt;   });
 &gt;   this.props.history.push('/home/news')
 &gt;}}
 &gt;...
 &gt;
 &gt; &lt;/TabBar.Item&gt;
 &gt; &lt;TabBar.Item
 &gt;selected={this.state.selectedTab === '/home/profile'}
 &gt;onPress={() =&gt; {
 &gt;   this.setState({
 &gt;       selectedTab: '/home/profile',
 &gt;   });
 &gt;   this.props.history.push('/home/profile')
 &gt;}}
 &gt;...
 &gt;
 &gt; &lt;/TabBar.Item&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="tabbarä»£ç çš„é‡æ„"><a href="#tabbarä»£ç çš„é‡æ„" class="header-anchor">#</a> TabBarä»£ç çš„é‡æ„</h3> <p>å‘ç°TabBarçš„Iitemé‡Œé¢çš„å†…å®¹å‡ ä¹æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯é‡Œé¢å†…å®¹ä¸åŒ
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸‹
æä¾›èœå•æ•°æ®</p> <p>ä½¿ç”¨mapæ¥è¿›è¡Œéå†
å£°æ˜ä¸€ä¸‹æ•°æ®æº</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const tabItems = [{
    title: 'é¦–é¡µ',
    icon: 'icon-ind',
    path: '/home/index'
},
{
    title: 'æ‰¾æˆ¿',
    icon: 'icon-findHouse',
    path: '/home/list'
},
{
    title: 'èµ„è®¯',
    icon: 'icon-infom',
    path: '/home/news'
},
{
    title: 'æˆ‘çš„',
    icon: 'icon-my',
    path: '/home/profile'
}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>å°è£…ä¸€ä¸ªå‡½æ•°æ¥éå†æ¸²æŸ“</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    renderTabBarItem() {
   return tabItems.map(item =&gt; {
        return (
            &lt;TabBar.Item
                title={item.title}
                key={item.title}
                icon={
                    &lt;i className={`iconfont ${item.icon}`}&gt;&lt;/i&gt;
                }
                selectedIcon={&lt;i className={`iconfont ${item.icon}`}&gt;&lt;/i&gt;
                }
                selected={this.state.selectedTab === item.path}
                onPress={() =&gt; {
                    this.setState({
                        selectedTab: item.path,
                    });
                    this.props.history.push(item.path)
                }}
            &gt;
            &lt;/TabBar.Item&gt;
    )
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>åœ¨renderæ–¹æ³•ä¸­è°ƒç”¨å³å¯</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>render() {
    return (&lt;div&gt;
        {/* é…ç½®è·¯ç”±ä¿¡æ¯ */}
        &lt;Route path=&quot;/home/index&quot; component={Index}&gt;&lt;/Route&gt;
        &lt;Route path=&quot;/home/list&quot; component={HouseList}&gt;&lt;/Route&gt;
        &lt;Route path=&quot;/home/news&quot; component={News}&gt;&lt;/Route&gt;
        &lt;Route path=&quot;/home/profile&quot; component={Profile}&gt;&lt;/Route&gt;
        {/* åº•éƒ¨å¯¼èˆªæ  */}
        &lt;TabBar
            tintColor=&quot;#21b97a&quot;
            barTintColor=&quot;white&quot;
            noRenderContent=&quot;true&quot;
        &gt;
            {this.renderTabBarItem()}
        &lt;/TabBar&gt;
    &lt;/div&gt;)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="é¦–é¡µå®ç°-â˜…â˜…â˜…"><a href="#é¦–é¡µå®ç°-â˜…â˜…â˜…" class="header-anchor">#</a> é¦–é¡µå®ç°ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <p>é¦–é¡µçš„è·¯ç”±æ˜¯éœ€è¦å»å¤„ç†çš„
ä¿®æ”¹é¦–é¡µè·¯ç”±çš„é…ç½®ï¼š /home(å»æ‰åé¢çš„index)ï¼›è¿™é‡Œéœ€è¦æ·»åŠ  exactå±æ€§
å¦‚æœæ˜¯é»˜è®¤è·¯ç”±éœ€è¦è·³è½¬åˆ° /home</p> <p>{/* é…ç½®é»˜è®¤è·¯ç”± */}</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Route path=&quot;/&quot; exact render={() =&gt; &lt;Redirect to=&quot;/home&quot;&gt;&lt;/Redirect&gt;}&gt;&lt;/Route&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day02"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day02" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day02</h2> <h3 id="è½®æ’­å›¾-å¯¼èˆªæ -ç™¾åº¦åœ°å›¾"><a href="#è½®æ’­å›¾-å¯¼èˆªæ -ç™¾åº¦åœ°å›¾" class="header-anchor">#</a> è½®æ’­å›¾&amp;å¯¼èˆªæ &amp;ç™¾åº¦åœ°å›¾</h3> <p>é¦–é¡µæ¨¡å—
ç›®æ ‡
èƒ½å¤Ÿä½¿ç”¨Carouselç»„ä»¶å®Œæˆè½®æ’­å›¾åŠŸèƒ½
èƒ½å¤Ÿå®‰è£…axiosï¼Œå¹¶ä¸”ä½¿ç”¨axiosè¿›è¡Œç½‘ç»œè¯·æ±‚
èƒ½å¤Ÿä½¿ç”¨Flexç»„ä»¶å®ŒæˆTabBaråŠŸèƒ½
èƒ½å¤ŸçŸ¥é“è½®æ’­å›¾ä¸TabBarå‡ºç°çš„bugï¼Œå¹¶ä¸”è§£å†³
èƒ½å¤Ÿå®‰è£…Sassï¼Œç¼–å†™Sassä»£ç 
èƒ½å¤Ÿä½¿ç”¨Gridç»„ä»¶å®Œæˆç§Ÿæˆ¿å°ç»„åŠŸèƒ½
èƒ½å¤Ÿåˆ©ç”¨H5 APIè·å–å½“å‰çš„å®šä½ä¿¡æ¯
èƒ½å¤Ÿä½¿ç”¨ç™¾åº¦åœ°å›¾APIå±•ç¤ºåœ°å›¾é¡µé¢ï¼Œè·å–å¯¹åº”åŸå¸‚ä¿¡æ¯
è½®æ’­å›¾ï¼ˆâ˜…â˜…â˜…ï¼‰
ç»„ä»¶ä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤
æ‰“å¼€antd-mobileç»„ä»¶åº“çš„Carouselç»„ä»¶æ–‡æ¡£
é€‰æ‹©åŸºæœ¬ï¼Œç‚¹å‡» (&lt;/&gt;) æ˜¾ç¤ºæºç 
æ‹·è´æ ¸å¿ƒä»£ç åˆ°Indexçš„ç»„ä»¶ä¸­
åˆ†æå¹¶ä¸”è°ƒæ•´ä»£ç ï¼Œè®©å…¶èƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­è¿è¡Œ
è½®æ’­å›¾çš„ç§»æ¤
æ‹·è´ç¤ºä¾‹ä»£ç ä¸­çš„å†…å®¹</p> <p>å¯¼å…¥ç»„ä»¶</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import { Carousel, WingBlank } from 'antd-mobile';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>çŠ¶æ€</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    state = {
        // å›¾ç‰‡çš„åç§°
        data: ['1', '2', '3'],
        // å›¾ç‰‡çš„é«˜åº¦
        imgHeight: 176,
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>å£°æ˜å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¿®æ”¹çŠ¶æ€ï¼Œè®¾ç½®æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>componentDidMount() {
    // simulate img loading
    setTimeout(() =&gt; {
        this.setState({
            data: ['AiyWuByWklrrUDlFignR', 'TekJlZRVCjLFexlOCuWn', 'IJOtIlfsYdTyaDTRVrLI'],
        });
    }, 100);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç»“æ„</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className=&quot;index&quot;&gt;
    &lt;Carousel
        {/* è‡ªåŠ¨æ’­æ”¾ */}
        autoplay={false}
        {/* æ— é™å¾ªç¯ */}
        infinite
        {/* è½®æ’­å›¾åˆ‡æ¢å‰çš„å›è°ƒå‡½æ•° */}
        beforeChange={(from, to) =&gt; console.log(`slide from ${from} to ${to}`)}
        {/* è½®æ’­å›¾åˆ‡æ¢åçš„å›è°ƒå‡½æ•° */}
        afterChange={index =&gt; console.log('slide to', index)}
        {/* è‡ªåŠ¨åˆ‡æ¢çš„æ—¶é—´ */}
        autoplayInterval='2000'
    &gt;    
        {/* éå†çŠ¶æ€é‡Œé¢çš„æ•°æ®ï¼Œåˆ›å»ºå¯¹åº”çš„aæ ‡ç­¾å’Œimgå›¾ç‰‡æ ‡ç­¾ */}
        {this.state.data.map(val =&gt; (
            &lt;a
                key={val}
                href=&quot;http://www.alipay.com&quot;
                style={{ display: 'inline-block', width: '100%', height: this.state.imgHeight }}
            &gt;
                &lt;img
                    src={`https://zos.alipayobjects.com/rmsportal/${val}.png`}
                    alt=&quot;&quot;
                    style={{ width: '100%', verticalAlign: 'top' }}
                    {/* å›¾ç‰‡åŠ è½½å®Œæˆçš„æ—¶å€™è°ƒç”¨ */}
                    onLoad={() =&gt; {
                        // fire window resize event to change height
                        window.dispatchEvent(new Event('resize'));
                        this.setState({ imgHeight: 'auto' });
                    }}
                /&gt;
            &lt;/a&gt;
        ))}
    &lt;/Carousel&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>ç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹è½®æ’­å›¾è¿›è¡Œå®šåˆ¶</p> <ul><li>å…ˆä¼˜åŒ–ç›¸åº”çš„ç»“æ„ï¼Œåˆ é™¤ä¸å¿…è¦çš„ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className=&quot;index&quot;&gt;
    &lt;Carousel
        autoplay={true}
        infinite
        autoplayInterval='2000'
    &gt;
        {this.state.data.map(val =&gt; (
            &lt;a
                key={val}
                href=&quot;http://www.alipay.com&quot;
                style={{ display: 'inline-block', width: '100%', height: this.state.imgHeight }}
            &gt;
                &lt;img
                    src={`https://zos.alipayobjects.com/rmsportal/${val}.png`}
                    alt=&quot;&quot;
                    style={{ width: '100%', verticalAlign: 'top' }}
                /&gt;
            &lt;/a&gt;
        ))}
    &lt;/Carousel&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="è·å–è½®æ’­å›¾çš„æ•°æ®"><a href="#è·å–è½®æ’­å›¾çš„æ•°æ®" class="header-anchor">#</a> è·å–è½®æ’­å›¾çš„æ•°æ®</h3> <ul><li>å®‰è£… axiosï¼š yarn add axios</li> <li>åœ¨Indexç»„ä»¶ä¸­å¯¼å…¥axios</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import axios from 'axios'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åœ¨stateä¸­æ·»åŠ è½®æ’­å›¾æ•°æ®ï¼šswipers</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>state = {
    // è½®æ’­å›¾çŠ¶æ€
    swipers: [],
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>æ–°å»ºä¸€ä¸ªæ–¹æ³• getSwipers ç”¨æ¥è·å–è½®æ’­å›¾æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getSwipers() {
    // è¯·æ±‚æ•°æ®
    let {data: res} = await axios.get('http://localhost:8080/home/swiper')
    // åˆ¤æ–­è¿”å›çš„çŠ¶æ€æ˜¯å¦æ˜¯æˆåŠŸ
    if(res.status!= 200){
        console.error(res.description)
        return
    }
    // æŠŠè·å–åˆ°çš„å€¼è®¾ç½®ç»™state
    this.setState({
        swipers: res.body
    })
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>åœ¨componentDidMounté’©å­å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>componentDidMount() {
    // è°ƒç”¨è¯·æ±‚è½®æ’­å›¾çš„æ–¹æ³•
   this.getSwipers()
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ä½¿ç”¨è·å–åˆ°çš„æ•°æ®æ¸²æŸ“è½®æ’­å›¾</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“è½®æ’­å›¾çš„é€»è¾‘ä»£ç 
renderSwipers(){
    return this.state.swipers.map(item =&gt; (
        &lt;a
            key={item.id}
            href=&quot;http://www.itcast.cn&quot;
            style={{ display: 'inline-block', width: '100%', height: 212 }}
        &gt;
            &lt;img
                src={`http://localhost:8080${item.imgSrc}`}
                alt=&quot;&quot;
                style={{ width: '100%', verticalAlign: 'top' }}
            /&gt;
        &lt;/a&gt;
    ))
}
render() {
    return (
        &lt;div className=&quot;index&quot;&gt;
            &lt;Carousel
                autoplay={true}
                infinite
                autoplayInterval='2000'
            &gt;
                {/* è°ƒç”¨æ¸²æŸ“è½®æ’­å›¾çš„æ–¹æ³• */}
                {this.renderSwipers()}
            &lt;/Carousel&gt;
        &lt;/div&gt;
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="å¯¼èˆªèœå•-â˜…â˜…â˜…"><a href="#å¯¼èˆªèœå•-â˜…â˜…â˜…" class="header-anchor">#</a> å¯¼èˆªèœå•ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>åˆ©ç”¨äº†antd-moblieçš„Flexç»„ä»¶è¿›è¡Œçš„å¸ƒå±€</li> <li>å¯¼å…¥navçš„å›¾ç‰‡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import nav1 from '../../assets/images/nav-1.png'
import nav2 from '../../assets/images/nav-2.png'
import nav3 from '../../assets/images/nav-3.png'
import nav4 from '../../assets/images/nav-4.png'

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ç¼–å†™é¡µé¢é¡µé¢</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Flex className=&quot;nav&quot;&gt;
    &lt;Flex.Item&gt;
        &lt;img src={nav1} alt=&quot;&quot;/&gt;
        &lt;h2&gt;æ•´ç§Ÿ&lt;/h2&gt;
    &lt;/Flex.Item&gt;
    &lt;Flex.Item&gt;
        &lt;img src={nav2} alt=&quot;&quot;/&gt;
        &lt;h2&gt;åˆç§Ÿ&lt;/h2&gt;
    &lt;/Flex.Item&gt;
    &lt;Flex.Item&gt;
        &lt;img src={nav3} alt=&quot;&quot;/&gt;
        &lt;h2&gt;åœ°å›¾æ‰¾æˆ¿&lt;/h2&gt;
    &lt;/Flex.Item&gt;
    &lt;Flex.Item&gt;
        &lt;img src={nav4} alt=&quot;&quot;/&gt;
        &lt;h2&gt;å»å‡ºç§Ÿ&lt;/h2&gt;
    &lt;/Flex.Item&gt;
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>ç»™Flex ç»„ä»¶æ·»åŠ äº†ç±»åæ˜¯ä¸ºäº†å»æ›´æ”¹ç›¸åº”çš„æ ·å¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>.nav {
    padding: 10px 0;
}

.nav img {
    width: 48px;
}

.nav h2 {
    font-size: 13px;
    font-weight: 400;
}
/* é€šè¿‡è°ƒè¯•å·¥å…·æˆ‘ä»¬çœ‹åˆ°ï¼Œåç»­è¢«ç”Ÿæˆçš„è¿™ä¸ªçˆ¶å…ƒç´ çš„ç±»åå«am-flexbox-item */
.am-flexbox-item {
    text-align: center;
}

h2 {
    margin: 0;
    margin-top: 7px;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="å¯¼èˆªèœå•çš„é‡æ„"><a href="#å¯¼èˆªèœå•çš„é‡æ„" class="header-anchor">#</a> å¯¼èˆªèœå•çš„é‡æ„</h3> <ul><li>æŠŠå†…å®¹å°è£…æˆæ•°ç»„</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å¯¼èˆªèœå•çš„æ•°æ®
const navs = [{
    id: 0,
    img: nav1,
    title: 'æ•´ç§Ÿ',
    path: '/home/list'
}, {
    id: 1,
    img: nav2,
    title: 'åˆç§Ÿ',
    path: '/home/list'
}, {
    id: 2,
    img: nav3,
    title: 'åœ°å›¾æ‰¾æˆ¿',
    path: '/home/map'
}, {
    id: 3,
    img: nav4,
    title: 'å»å‡ºç§Ÿ',
    path: '/home/list'
}]

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>åˆ›å»ºå¯¹åº”çš„æ–¹æ³• renderNavs,åœ¨æ–¹æ³•ä¸­éå†navsï¼Œä¸€ä¸ªä¸€ä¸ªè®¾ç½®æ•°æ®ï¼ŒæŠŠæœ€ç»ˆçš„JSXè¿”å›</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“å¯¼èˆªèœå•çš„é€»è¾‘ä»£ç 
renderNavs() {
    return navs.map(item =&gt; {
        return (
            &lt;Flex.Item key={item.id} onClick={()=&gt;{this.props.history.push(item.path)}}&gt;
                &lt;img src={item.img} alt=&quot;&quot; /&gt;
                &lt;h2&gt;{item.title}&lt;/h2&gt;
            &lt;/Flex.Item&gt;
        )
    })
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>åœ¨renderæ–¹æ³•ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* å¯¼èˆªæ  */}
&lt;Flex className=&quot;nav&quot;&gt;
    {this.renderNavs()}
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="è½®æ’­å›¾çš„é—®é¢˜-â˜…â˜…â˜…"><a href="#è½®æ’­å›¾çš„é—®é¢˜-â˜…â˜…â˜…" class="header-anchor">#</a> è½®æ’­å›¾çš„é—®é¢˜ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>ç”±äºæˆ‘ä»¬åŠ¨æ€åŠ è½½æ•°æ®ï¼Œå¯¼è‡´äº†è½®æ’­å›¾ä¸èƒ½è‡ªåŠ¨å»è¿›è¡Œè½®æ’­ä»¥åŠé«˜åº¦çš„å¡Œé™·</li> <li>è§£å†³åŠæ³•
<ul><li>åœ¨stateä¸­æ·»åŠ è½®æ’­å›¾æ•°æ®æ˜¯å¦åŠ è½½å®Œæˆçš„çŠ¶æ€</li></ul></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    state = {
        // è½®æ’­å›¾çŠ¶æ€
        swipers: [],
        isSwiperLoaded: false
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>åœ¨è½®æ’­å›¾æ•°æ®åŠ è½½å®Œæˆæ—¶å€™ï¼Œä¿®æ”¹è¿™ä¸ªçŠ¶æ€ä¸ºtrue</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    async getSwipers() {
        ...
        // æŠŠè·å–åˆ°çš„å€¼è®¾ç½®ç»™state
        this.setState({
            swipers: res.body,
            isSwiperLoaded: true
        })

    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>åªæœ‰åœ¨å½•æ’­å›¾æ•°æ®åŠ è½½å®Œæˆçš„æƒ…å†µä¸‹ï¼Œæ‰æ¸²æŸ“è½®æ’­å›¾ç»„ä»¶</li> <li>ç»™è½®æ’­å›¾çš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªdivï¼Œç»™è¿™ä¸ªdivè®¾ç½®é«˜åº¦</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className=&quot;swiper&quot;&gt;
    {/* è½®æ’­å›¾ */}
    {this.state.isSwiperLoaded ? (&lt;Carousel
        autoplay={true}
        infinite
        autoplayInterval='2000'
    &gt;
        {/* è°ƒç”¨æ¸²æŸ“è½®æ’­å›¾çš„æ–¹æ³• */}
        {this.renderSwipers()}
    &lt;/Carousel&gt;) : ('')}
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="tabbarçš„é—®é¢˜-â˜…â˜…â˜…"><a href="#tabbarçš„é—®é¢˜-â˜…â˜…â˜…" class="header-anchor">#</a> TabBarçš„é—®é¢˜ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <p>å½“æˆ‘ä»¬é€šè¿‡é¦–é¡µèœå•å¯¼èˆªè·³è½¬åˆ°ç›¸åº”é¡µé¢çš„æ—¶å€™ï¼Œåº•éƒ¨çš„TabBaræ²¡æœ‰è¿›è¡Œé«˜äº®æ˜¾ç¤º
åŸå› ï¼š æˆ‘ä»¬å®ç°è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œåªè€ƒè™‘äº†ç‚¹å‡»ä»¥åŠç¬¬ä¸€æ¬¡å®¶çš„Homeç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰è€ƒè™‘ä¸é‡æ–°åŠ è½½Homeç»„ä»¶æ—¶è·¯ç”±çš„åˆ‡æ¢
è§£å†³ï¼šåœ¨è·¯ç”±å‘ç”Ÿåˆ‡æ¢çš„æ—¶å€™ï¼Œå†æ¥å¤„ç†TabBarçš„é«˜äº®æ˜¾ç¤º
æ·»åŠ componentDidUpDate é’©å­å‡½æ•°
åœ¨é’©å­å‡½æ•°ä¸­åˆ¤æ–­è·¯ç”±åœ°å€æ˜¯å¦åˆ‡æ¢
åœ¨è·¯ç”±åœ°å€åˆ‡æ¢çš„æ—¶å€™ï¼Œè®©TabBarå¯¹åº”é«˜äº®
åœ¨Home.jsé‡Œé¢æ³¨å†Œé’©å­å‡½æ•°</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    // å½“Homeç»„ä»¶çš„å†…å®¹å‘ç”Ÿæ›´æ–°çš„æ—¶å€™è°ƒç”¨

    componentDidUpdate(prevProps) {

        // åœ¨è¿™é‡Œå°±èƒ½åˆ¤æ–­è·¯ç”±æ˜¯å¦è¿›è¡Œäº†åˆ‡æ¢ï¼Œè·¯ç”±çš„ä¿¡æ¯ä¿å­˜åœ¨propså±æ€§é‡Œé¢

        // å¦‚æœå½“å‰çš„è·¯ç”±ä¿¡æ¯ä¸ç­‰äºä¸Šä¸€æ¬¡çš„ï¼Œé‚£ä¹ˆå°±ä»£è¡¨å‘ç”Ÿäº†è·¯ç”±åˆ‡æ¢

        if(prevProps.location.pathname !== this.props.location.pathname){

            this.setState({

                selectedTab: this.props.location.pathname

            })

        }
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="sassçš„ä½¿ç”¨"><a href="#sassçš„ä½¿ç”¨" class="header-anchor">#</a> Sassçš„ä½¿ç”¨</h3> <p>æ‰“å¼€è„šæ‰‹æ¶æ–‡æ¡£ï¼Œæ‰¾åˆ°æ·»åŠ Sassæ ·å¼
å®‰è£…Sassï¼š yarn add node-sass
åˆ›å»ºåç¼€åä¸º.scss æˆ–è€… .sass çš„æ ·å¼æ–‡ä»¶
åœ¨ç»„ä»¶ä¸­å¯¼å…¥Sassæ ·å¼
ç§Ÿæˆ¿å°ç»„ï¼ˆâ˜…â˜…â˜…ï¼‰
ä¸šåŠ¡ä»‹ç»
éœ€æ±‚ï¼šæ ¹æ®å½“å‰åœ°ç†ä½ç½®å±•ç¤ºä¸åŒå°ç»„ä¿¡æ¯
éœ€è¦åå°æ¥å£æ ¹æ®ç”¨æˆ·æ‰¾æˆ¿æ•°æ®ï¼Œæ¨èç”¨æˆ·æœ€æ„Ÿå…´è¶£çš„å†…å®¹(æ­£å¸¸çš„é€»è¾‘æ˜¯æˆ‘ä»¬å…ˆè·å–åˆ°ç”¨æˆ·å½“å‰å®šä½çš„ä¿¡æ¯ï¼ŒæŠŠä¿¡æ¯å‘é€ç»™åå°ï¼Œåå°æ ¹æ®å®šä½ä¿¡æ¯è·å–å¯¹åº”çš„å†…å®¹)
å‰ç«¯åªéœ€è¦å±•ç¤ºæ•°æ®
æ•°æ®è·å–
åœ¨stateä¸­æ·»åŠ ç§Ÿæˆ¿å°ç»„æ•°æ®ï¼šgroups</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    state = {
        ...
        // ç§Ÿæˆ¿å°ç»„çŠ¶æ€
        groups: []
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>æ–°å»ºä¸€ä¸ªæ–¹æ³•<code>getGroups</code>ç”¨æ¥è·å–æ•°æ®ï¼Œå¹¶æ›´æ–°groupsçŠ¶æ€</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getGroups() {
    let { data: res } = await axios.get('http://localhost:8080/home/groups', {
        params: {
            'area': 'AREA%7C88cff55c-aaa4-e2e0'
        }
    })
    // åˆ¤æ–­è¿”å›çš„çŠ¶æ€æ˜¯å¦æ˜¯æˆåŠŸ
    if (res.status != 200) {
        console.error(res.description)
        return
    }
    // æŠŠè·å–åˆ°çš„å€¼è®¾ç½®ç»™state
    this.setState({
        groups: res.body
    })
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>åœ¨<code>componentDidMount</code>é’©å­å‡½æ•°ä¸­è°ƒç”¨è¯¥æ–¹æ³•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>componentDidMount() {
    // è°ƒç”¨è¯·æ±‚è½®æ’­å›¾çš„æ–¹æ³•
    this.getSwipers()
    this.getGroups()
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>ä½¿ç”¨è·å–åˆ°çš„æ•°æ®æ¸²æŸ“ç§Ÿæˆ¿å°ç»„æ•°æ®</p> <h3 id="é¡µé¢ç»“æ„æ ·å¼"><a href="#é¡µé¢ç»“æ„æ ·å¼" class="header-anchor">#</a> é¡µé¢ç»“æ„æ ·å¼</h3> <p>å®ç°æ ‡é¢˜çš„ç»“æ„å’Œæ ·å¼</p> <ul><li>æ‰“å¼€Grid å®«æ ¼ç»„ä»¶</li> <li>é€‰æ‹© åŸºæœ¬ èœå•ï¼Œç‚¹å‡»(<code>&lt;/&gt;</code>) æ˜¾ç¤ºæºç </li> <li>æ‹·è´æ ¸å¿ƒä»£ç åˆ°Indexç»„ä»¶ä¸­</li> <li>åˆ†æè°ƒæ•´ä»£ç </li></ul> <p>å¸ƒå±€ç»“æ„</p></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> {/* ç§Ÿæˆ¿å°ç»„ */}
&lt;div className=&quot;group&quot;&gt;
    &lt;h3 className=&quot;group-title&quot;&gt;
        ç§Ÿæˆ¿å°ç»„ &lt;span className=&quot;more&quot;&gt;æ›´å¤š&lt;/span&gt;
    &lt;/h3&gt;
    &lt;Grid data={this.state.groups}
        {/* åˆ—æ•° */}
        columnNum={2} 
        {/* æ˜¯å¦å¼ºåˆ¶æ­£æ–¹å½¢ */}
        square={false}
        {/* æ˜¯å¦æœ‰è¾¹æ¡† */}
        hasLine={false}
        {/* è‡ªå®šä¹‰é‡Œé¢çš„å¸ƒå±€ */}
        renderItem={item =&gt; this.renderGroups(item)} /&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>è‡ªå®šå¸ƒå±€å•ç‹¬æŠ½å–æˆæ–¹æ³•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>renderGroups(item) {
    return (
        &lt;Flex className=&quot;group-item&quot; justify=&quot;around&quot;&gt;
            &lt;div className=&quot;desc&quot;&gt;
                &lt;p className=&quot;title&quot;&gt;{item.title}&lt;/p&gt;
                &lt;span className=&quot;info&quot;&gt;{item.desc}&lt;/span&gt;
            &lt;/div&gt;
            &lt;img src={`http://localhost:8080${item.imgSrc}`} alt=&quot;&quot; /&gt;
        &lt;/Flex&gt;
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>ç›¸åº”çš„æ ·å¼å±æ€§</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.group</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f5f6<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
    <span class="token selector">.group-title</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 15px 0px 15px 10px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token selector">.more</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #787d82<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">// è¦†ç›–é»˜è®¤èƒŒæ™¯è‰²
    .am-grid .am-flexbox</span> <span class="token punctuation">{</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
        <span class="token selector">.am-flexbox-item .am-grid-item-content</span> <span class="token punctuation">{</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.group-item</span> <span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
        <span class="token selector">.desc</span> <span class="token punctuation">{</span>
            <span class="token selector">.title</span> <span class="token punctuation">{</span>
                <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
                <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
                <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">.info</span> <span class="token punctuation">{</span>
                <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
                <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">img</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 55px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.am-flexbox-align-stretch</span> <span class="token punctuation">{</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token selector">.am-grid-item</span> <span class="token punctuation">{</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
            <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
                <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="æœ€æ–°èµ„è®¯"><a href="#æœ€æ–°èµ„è®¯" class="header-anchor">#</a> æœ€æ–°èµ„è®¯</h3> <h4 id="æ•°æ®è·å–-é¡µé¢æ¸²æŸ“"><a href="#æ•°æ®è·å–-é¡µé¢æ¸²æŸ“" class="header-anchor">#</a> æ•°æ®è·å–&amp;é¡µé¢æ¸²æŸ“</h4> <ul><li>åœ¨stateä¸­æ·»åŠ ç§Ÿæˆ¿å°ç»„æ•°æ®ï¼šnews</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    state = {
        ...
        // æœ€æ–°èµ„è®¯
        news: []
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>åˆ›å»ºä¸€ä¸ªå‡½æ•° <code>getNews()</code>, åœ¨è¿™ä¸ªå‡½æ•°ä¸­åˆ©ç”¨<code>axios</code>æ¥è¯·æ±‚æœåŠ¡å™¨</li> <li>è·å–åˆ°çš„æ•°æ®åˆ¤æ–­è¿”å›çš„çŠ¶æ€æ˜¯å¦æ˜¯200ï¼Œå¦‚æœä¸æ˜¯ï¼Œæç¤ºç”¨æˆ·</li> <li>å¦‚æœçŠ¶æ€æ˜¯200ï¼Œåˆ©ç”¨<code>this.setState()</code> æ¥æ›´æ–°é¡µé¢</li> <li>åœ¨<code>componentDidUpdate</code>é’©å­å‡½æ•°ä¸­è°ƒç”¨ <code>getNews()</code></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getNews() {
    let { data: res } = await axios.get('http://localhost:8080/home/news?area=AREA%7C88cff55c-aaa4-e2e0')
    // åˆ¤æ–­è¿”å›çš„çŠ¶æ€æ˜¯å¦æ˜¯æˆåŠŸ
    if (res.status != 200) {
        console.error(res.description)
        return
    }
    // æŠŠè·å–åˆ°çš„å€¼è®¾ç½®ç»™state
    this.setState({
        news: res.body
    })
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>åˆ›å»ºé¡µé¢ç»“æ„ï¼Œæ¸²æŸ“åˆ°é¡µé¢
<ul><li><code>WingBlank</code>ç»„ä»¶ ä¸¤ç¿¼ç•™ç™½ çš„æ•ˆæœ</li> <li>æ¸²æŸ“çš„é€»è¾‘ä»£ç æ¯”è¾ƒå¤šï¼ŒæŠ½å–æˆä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·ä¿è¯ç»“æ„ä¸­çš„ä»£ç æ¯”è¾ƒæ¸…æ™°</li></ul></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> {/* æœ€æ–°èµ„è®¯ */}
&lt;div className=&quot;news&quot;&gt;
    &lt;h3 className=&quot;group-title&quot;&gt;æœ€æ–°èµ„è®¯&lt;/h3&gt;
    &lt;WingBlank size=&quot;md&quot;&gt;{this.renderNews()}&lt;/WingBlank&gt;
&lt;/div&gt;

renderNews() {
 return this.state.news.map(item =&gt; {
     return (
         &lt;div className=&quot;news-item&quot; key={item.id}&gt;
             &lt;div className=&quot;imgwrap&quot;&gt;
                 &lt;img
                     className=&quot;img&quot;
                     src={`http://localhost:8080${item.imgSrc}`}
                     alt=&quot;&quot;
                 /&gt;
             &lt;/div&gt;
             &lt;Flex className=&quot;content&quot; direction=&quot;column&quot; justify=&quot;between&quot;&gt;
                 &lt;h3 className=&quot;title&quot;&gt;{item.title}&lt;/h3&gt;
                 &lt;Flex className=&quot;info&quot; justify=&quot;between&quot;&gt;
                     &lt;span&gt;{item.from}&lt;/span&gt;
                     &lt;span&gt;{item.date}&lt;/span&gt;
                 &lt;/Flex&gt;
             &lt;/Flex&gt;
         &lt;/div&gt;
     )
 })

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li>æ ·å¼å±æ€§</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">// æœ€æ–°èµ„è®¯ï¼š
.news</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>

  <span class="token selector">.group-title</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0 5px 10px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.news-item</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 15px 10px 15px 0<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #e5e5e5<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.news-item:last-child</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.imgwrap</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.img</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.info</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #9c9fa1<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.message-title</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h4 id="è§£å†³å†…å®¹è¢«tabbarå‹ä½çš„é—®é¢˜"><a href="#è§£å†³å†…å®¹è¢«tabbarå‹ä½çš„é—®é¢˜" class="header-anchor">#</a> è§£å†³å†…å®¹è¢«<code>TabBar</code>å‹ä½çš„é—®é¢˜</h4> <p>æˆ‘ä»¬åœ¨Home.jsä¸­æ‰¾åˆ° åŒ…è£¹ è·¯ç”±å’Œåº•éƒ¨å¯¼èˆªæ çš„divç›’å­ï¼Œç»™å…¶æ·»åŠ  padding-bottom å±æ€§å³å¯</p> <h3 id="é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½-â˜…â˜…â˜…"><a href="#é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½-â˜…â˜…â˜…" class="header-anchor">#</a> é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>å®ç°ç»“æ„å’Œæ ·å¼</li> <li>æ·»åŠ åŸå¸‚é€‰æ‹©ã€æœç´¢ã€åœ°å›¾æ‰¾æˆ¿é¡µé¢çš„è·¯ç”±è·³è½¬</li></ul> <p>ç›¸å…³ç»“æ„</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code> &lt;Flex className='search-box'&gt;
    {/* å·¦ä¾§ç™½è‰²åŒºåŸŸ */}
    &lt;Flex className=&quot;search&quot;&gt;
        {/* ä½ç½® */}
        &lt;div className=&quot;location&quot; &gt;
            &lt;span className=&quot;name&quot;&gt;é•¿æ²™&lt;/span&gt;
            &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
        &lt;/div&gt;

        {/* æœç´¢è¡¨å• */}
        &lt;div className=&quot;form&quot;&gt;
            &lt;i className=&quot;iconfont icon-seach&quot; /&gt;
            &lt;span className=&quot;text&quot;&gt;è¯·è¾“å…¥å°åŒºæˆ–åœ°å€&lt;/span&gt;
        &lt;/div&gt;
    &lt;/Flex&gt;
    {/* å³ä¾§åœ°å›¾å›¾æ ‡ */}
    &lt;i className=&quot;iconfont icon-map&quot; /&gt;
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ç›¸å…³æ ·å¼</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// é¡¶éƒ¨å¯¼èˆª
.search-box {
    position: absolute;
    top: 25px;
    width: 100%;
    padding: 0 10px;
    // å·¦ä¾§ç™½è‰²åŒºåŸŸ
    .search {
        flex: 1;
        height: 34px;
        margin: 0 10px;
        padding: 5px 5px 5px 8px;
        border-radius: 3px;
        background-color: #fff;
        // ä½ç½®
        .location {
            .icon-arrow {
                margin-left: 2px;
                font-size: 12px;
                color: #7f7f80;
            }
        }
        // æœç´¢è¡¨å•
        .form {
            border-left: solid 1px #e5e5e5;
            margin-left: 12px;
            line-height: 16px;
            .icon-seach {
                vertical-align: middle;
                padding: 0 2px 0 12px;
                color: #9c9fa1;
                font-size: 15px;
            }
            .text {
                padding-left: 4px;
                font-size: 13px;
                color: #9c9fa1;
            }
        }
    }
    // å³ä¾§åœ°å›¾å›¾æ ‡
    .icon-map {
        font-size: 25px;
        color: #fff;
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>H5ä¸­åˆ©ç”¨å®šç†å®šä½API
åœ°ç†ä½ç½®API å…è®¸ç”¨æˆ·å‘ Webåº”ç”¨ç¨‹åºæä¾›ä»–ä»¬çš„ä½ç½®ï¼Œå‡ºäºéšç§è€ƒè™‘ï¼ŒæŠ¥å‘Šåœ°ç†ä½ç½®å‰å…ˆä¼šè¯·æ±‚ç”¨æˆ·è®¸å¯</p> <p>åœ°ç†ä½ç½®çš„APIæ˜¯é€šè¿‡ navigator.geolocation å¯¹è±¡æä¾›ï¼Œé€šè¿‡getCurrentPositionæ–¹æ³•è·å–</p> <p>è·å–åˆ°çš„åœ°ç†ä½ç½®è·Ÿ GPSã€IPåœ°å€ã€WIFIå’Œè“ç‰™çš„MACåœ°å€ã€GSM/CDMSçš„IDæœ‰å…³</p> <p>æ¯”å¦‚ï¼šæ‰‹æœºä¼˜å…ˆä½¿ç”¨GPSå®šä½ï¼Œç¬”è®°æœ¬ç­‰æœ€å‡†ç¡®çš„æ˜¯å®šä½æ˜¯WIFI</p> <p>æˆ‘ä»¬æ‰€è·å–åˆ°çš„æ˜¯ç»çº¬åº¦ï¼Œå…¶å®å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©ç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾ç­‰çš„å¼€æ”¾æ¥å£ï¼Œæ¥å¸®æˆ‘ä»¬æŠŠç»çº¬åº¦è¿›è¡Œæ¢ç®—
<img src="https://img-blog.csdnimg.cn/20191130185230144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-p7aG4c41-1575110971811)(images/location.png)]"></p> <h3 id="å®šä½ç›¸å…³"><a href="#å®šä½ç›¸å…³" class="header-anchor">#</a> å®šä½ç›¸å…³</h3> <h4 id="ç™¾åº¦åœ°å›¾api-â˜…â˜…â˜…"><a href="#ç™¾åº¦åœ°å›¾api-â˜…â˜…â˜…" class="header-anchor">#</a> ç™¾åº¦åœ°å›¾APIï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>H5çš„åœ°ç†ä½ç½®APIåªèƒ½è·å–åˆ°å¯¹åº”ç»çº¬åº¦ä¿¡æ¯</li> <li>å®é™…å¼€å‘ä¸­ï¼Œä¼šä½¿ç”¨ç™¾åº¦åœ°å›¾/é«˜å¾·åœ°å›¾æ¥å®Œæˆåœ°ç†ä½ç½®çš„ç›¸å…³åŠŸèƒ½</li> <li>ç§Ÿæˆ¿é¡¹ç›®ä¸­ï¼Œé€šè¿‡ç™¾åº¦åœ°å›¾APIå®ç°åœ°ç†ä½ç½®å’Œåœ°å›¾æ‰¾æˆ¿åŠŸèƒ½</li> <li>æˆ‘ä»¬éœ€è¦å»å‚ç…§<a href="http://lbsyun.baidu.com/" target="_blank" rel="noopener noreferrer">ç™¾åº¦åœ°å›¾æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ³¨å†Œç™¾åº¦å¼€å‘è€…è´¦å·ï¼Œç”³è¯·å¯¹åº”çš„AK</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185218638.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-vIF45pqR-1575110971813)(images/ç™¾åº¦AK.png)]"></p> <h4 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="header-anchor">#</a> ä½¿ç”¨æ­¥éª¤</h4> <p><img src="https://img-blog.csdnimg.cn/20191130185209380.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-vaq46lOp-1575110971814)(images/ä½¿ç”¨æ­¥éª¤-01.png)]"></p> <ul><li>åœ¨index.cssä¸­è®¾ç½®å…¨å±€æ ·å¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185158224.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-eCQUfWob-1575110971816)(images/ä½¿ç”¨æ­¥éª¤-02.png)]"></p> <ul><li>åˆ›å»ºMapç»„ä»¶ï¼Œé…ç½®è·¯ç”±ï¼Œåœ¨Mapç»„ä»¶ä¸­ï¼Œåˆ›å»ºåœ°å›¾å®¹å™¨å…ƒç´ ï¼Œå¹¶è®¾ç½®æ ·å¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185150403.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-hHX3TmL4-1575110971817)(images/ä½¿ç”¨æ­¥éª¤-03.png)]"></p> <ul><li><p>åˆ›å»ºåœ°å›¾å®ä¾‹</p> <p><img src="https://img-blog.csdnimg.cn/20191130185131749.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-kyAG2ryT-1575110971825)(images/ä½¿ç”¨æ­¥éª¤-04.png)]"></p></li> <li><p>è®¾ç½®ä¸­å¿ƒç‚¹åæ ‡</p></li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185123835.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-UnGPI00L-1575110971827)(images/ä½¿ç”¨æ­¥éª¤-05.png)]"></p> <p>åˆå§‹åŒ–åœ°å›¾ï¼ŒåŒæ—¶è®¾ç½®å±•ç¤ºçº§åˆ«</p> <p><img src="https://img-blog.csdnimg.cn/20191130185112318.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-SUIX9PKC-1575110971828)(images/ä½¿ç”¨æ­¥éª¤-06.png)]"></p> <h4 id="è·å–é¡¶éƒ¨å¯¼èˆªåŸå¸‚ä¿¡æ¯"><a href="#è·å–é¡¶éƒ¨å¯¼èˆªåŸå¸‚ä¿¡æ¯" class="header-anchor">#</a> è·å–é¡¶éƒ¨å¯¼èˆªåŸå¸‚ä¿¡æ¯</h4> <ul><li>æŸ¥çœ‹ç™¾åº¦åœ°å›¾çš„å®šä½æ–‡æ¡£</li> <li>é€šè¿‡IPå®šä½è·å–åˆ°å½“å‰åŸå¸‚åç§°</li> <li>è°ƒç”¨æˆ‘ä»¬æœåŠ¡å™¨çš„æ¥å£ï¼Œæ¢å–é¡¹ç›®ä¸­çš„åŸå¸‚ä¿¡æ¯</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185057199.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-pVvIfKC5-1575110971831)(images/å®šä½æ¥å£.png)]"></p> <h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day03"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day03" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day03</h2> <p>åŸå¸‚é€‰æ‹©åŠŸèƒ½&amp;react-virtualizedç»„ä»¶ä½¿ç”¨</p> <h3 id="åŸå¸‚é€‰æ‹©æ¨¡å—"><a href="#åŸå¸‚é€‰æ‹©æ¨¡å—" class="header-anchor">#</a> åŸå¸‚é€‰æ‹©æ¨¡å—</h3> <p>ç›®æ ‡
èƒ½å¤Ÿå®ç°é¡¶éƒ¨å¯¼èˆªæ 
èƒ½å¤Ÿè·å–åŸå¸‚åˆ—è¡¨æ•°æ®ï¼Œçƒ­é—¨åŸå¸‚æ•°æ®ï¼Œå½“å‰å®šä½åŸå¸‚æ•°æ®ï¼Œå¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œé‡æ–°å°è£…
çŸ¥é“ä»€ä¹ˆæ˜¯é•¿åˆ—è¡¨ï¼Œä»¥åŠå¸¦æ¥çš„ç¼ºé™·
è¯´å‡ºé•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–çš„ä¸¤ç§æ–¹å¼
èƒ½å¤Ÿä½¿ç”¨ react-virtualizedè¿›è¡ŒåŸå¸‚åˆ—è¡¨çš„æ¸²æŸ“
èƒ½å¤Ÿæ¸²æŸ“å³ä¾§ç´¢å¼•åˆ—è¡¨
åŠŸèƒ½åˆ†æ
åˆ‡æ¢åŸå¸‚ï¼ŒæŸ¥çœ‹è¯¥åŸå¸‚ä¸‹çš„æˆ¿æºä¿¡æ¯
åŠŸèƒ½
é¡¶éƒ¨å¯¼èˆªæ 
åŸå¸‚åˆ—è¡¨å±•ç¤º
ä½¿ç”¨ç´¢å¼•å¿«é€Ÿåˆ‡æ¢åŸå¸‚
ç‚¹å‡»åŸå¸‚åç§°åˆ‡æ¢åŸå¸‚</p> <h3 id="é¡¶éƒ¨å¯¼èˆªæ -â˜…â˜…â˜…"><a href="#é¡¶éƒ¨å¯¼èˆªæ -â˜…â˜…â˜…" class="header-anchor">#</a> é¡¶éƒ¨å¯¼èˆªæ ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <p>æ‰“å¼€antd-mobile ç»„ä»¶åº“çš„NavBar å¯¼èˆªæ ç»„ä»¶ æ–‡æ¡£
ä»æ–‡æ¡£ä¸­æ‹·è´ç»„ä»¶ç¤ºä¾‹ä»£ç åˆ°é¡¹ç›®ä¸­ï¼Œè®©å…¶æ­£ç¡®è¿è¡Œ
ä¿®æ”¹å¯¼èˆªæ æ ·å¼å’Œç»“æ„
ç¤ºä¾‹</p> <p>å¼•å…¥ ç»„ä»¶åº“</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import {NavBar, Icon} from 'antd-mobile'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‹·è´ä»£ç ç»“æ„</p> <div>
        // æ¨¡å¼ é»˜è®¤å€¼æ˜¯ dark
        mode=&quot;light&quot;
        // å·¦ä¾§å°å›¾ç‰‡
        icon={<Icon type="left"></Icon>}
        // å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
        onLeftClick={() =&gt; console.log('onLeftClick')}
        // å³ä¾§æŒ‰æŒ‰é’®å›¾æ ‡
        rightContent={[
             '16px' }} /&gt;,
            <Icon type="ellipsis"></Icon>,
        ]}
    &gt;åŸå¸‚åˆ—è¡¨</div> <p>ä¿®æ”¹ç»“æ„ä»£ç </p> <div>
        // æ¨¡å¼ é»˜è®¤å€¼æ˜¯ dark
        mode=&quot;light&quot;
        // å·¦ä¾§å°å›¾ç‰‡
        icon={<i className="iconfont icon-back"></i>}
        // å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
        onLeftClick={() =&gt; this.props.history.go(-1)}
    &gt;åŸå¸‚åˆ—è¡¨</div> <p>è®¾ç½®ç›¸åº”çš„æ ·å¼</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>

<span class="token selector">.citylist</span> <span class="token punctuation">{</span>
    <span class="token selector">.navbar</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f5f6<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">// navbar æ ‡é¢˜é¢œè‰²
    .am-navbar-title</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="è·å–å¤„ç†æ•°æ®-â˜…â˜…â˜…"><a href="#è·å–å¤„ç†æ•°æ®-â˜…â˜…â˜…" class="header-anchor">#</a> è·å–å¤„ç†æ•°æ®ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <p>é¡µé¢åŠ è½½æ—¶å€™ï¼Œæ ¹æ®æ¥å£è·å–åˆ°åŸå¸‚åˆ—è¡¨æ•°æ®
åˆ†æå½“å‰æ•°æ®æ ¼å¼ä»¥åŠè¯¥åŠŸèƒ½éœ€è¦çš„æ•°æ®æ ¼å¼
è½¬æ¢å½“å‰æ•°æ®æ ¼å¼ä¸ºæ‰€éœ€è¦çš„æ•°æ®æ ¼å¼â€˜</p> <h4 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="header-anchor">#</a> è·å–æ•°æ®</h4> <p>æ ¹æ®æ¥å£æ–‡æ¡£æä¾›çš„urlè¿›è¡Œç½‘ç»œè¯·æ±‚
è·å–åˆ°ç›¸åº”çš„æ•°æ®ä¿¡æ¯</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å½“ç»„ä»¶è¢«æŒ‚è½½çš„æ—¶å€™è°ƒç”¨
componentDidMount() {
   this.getCityList()
}
async getCityList() {
    let {data:res} = await axios.get('http://localhost:8080/area/city?level=1')
    console.log(res);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="å¤„ç†æ•°æ®æ ¼å¼"><a href="#å¤„ç†æ•°æ®æ ¼å¼" class="header-anchor">#</a> å¤„ç†æ•°æ®æ ¼å¼</h4> <p>æˆ‘ä»¬éœ€è¦æŠŠæœåŠ¡å™¨è¿”å›çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é¦–å­—æ¯æ¥è¿›è¡ŒåŸå¸‚çš„å®šä½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæ ¼å¼è½¬æ¢æˆä»¥ä¸‹æ ¼å¼</p> <p><img src="https://img-blog.csdnimg.cn/20191130185422270.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-GhGLU7AO-1575111205711)(images/citylist.png)]"></p> <ul><li><p>æˆ‘ä»¬éœ€è¦éå† listæ•°ç»„</p></li> <li><p>è·å–åˆ°æ¯ä¸€ä¸ªåŸå¸‚çš„é¦–å­—æ¯</p></li> <li><p>åˆ¤æ–­æˆ‘ä»¬å®šä¹‰çš„æ•°ç»„ä¸­æ˜¯å¦æœ‰è¿™ä¸ªåˆ†ç±»ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆç›´æ¥pushæ•°æ®è¿›æ¥ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ è¿™ä¸ªåˆ†ç±»</p></li> <li><p>å½“åŸå¸‚åˆ—è¡¨æ•°æ®æŒ‰ç…§é¦–å­—æ¯åˆ†å¥½ç±»äº†ä¹‹åï¼Œè¿˜éœ€è¦å®ç°çƒ­é—¨åŸå¸‚æ•°æ®å’Œå®šä½åŸå¸‚æ•°æ®</p></li> <li><p>è·å–çƒ­é—¨åŸå¸‚æ•°æ®ï¼Œæ·»åŠ åˆ°cityList åˆ—è¡¨æ•°æ®ä¸­ï¼Œå°†ç´¢å¼•æ•°æ®æ·»åŠ åˆ° cityIndex ç´¢å¼•æ•°æ®ä¸­</p></li> <li><p>è·å–å½“å‰åŸå¸‚æ•°æ®ï¼Œæ·»åŠ åˆ°cityList åˆ—è¡¨æ•°æ®ä¸­ï¼Œå°†ç´¢å¼•æ•°æ®æ·»åŠ åˆ° cityIndex ç´¢å¼•æ•°æ®ä¸­</p></li></ul> <p>å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å¤„ç†è¿™ä¸ªæ•°æ®</p> <ul><li><div class="language-react line-numbers-mode"><pre class="language-text"><code> /**
  * æ ¼å¼åŒ–è¿”å›çš„æ•°æ®
 @param {*} list 
 */
 function formatCityData(list) {
 // é”®æ˜¯é¦–å­—æ¯ï¼Œå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼šå¯¹åº”é¦–å­—æ¯çš„åŸå¸‚ä¿¡æ¯
 let cityList = {}
 list.forEach(item =&gt; {
     // é€šè¿‡ç®€å†™è·å–åˆ°ç¬¬ä¸€ä¸ªé¦–å­—æ¯
     let first = item.short.substr(0, 1)
     // åˆ¤æ–­å¯¹è±¡ä¸­æ˜¯å¦æœ‰è¿™ä¸ªkey æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹è±¡å–å€¼çš„ç¬¬äºŒç§æ–¹å¼ ä¸­æ‹¬å·çš„æ–¹å¼
     if(cityList[first]){
         // å¦‚æœè¿›å…¥if ä»£è¡¨æœ‰è¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥pushè¿›å»
         cityList[first].push(item)
     }else{
         // å¦‚æœè¿›å…¥else ä»£è¡¨æ²¡æœ‰è¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬åˆå§‹åŒ–è¿™ä¸ªå±æ€§ï¼Œå¹¶ä¸”æŠŠå½“å‰æ•°æ®è®¾ç½®è¿›å»
         cityList[first] = [item]
     }
 })
 // æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŠŠ cityListé‡Œé¢æ‰€æœ‰çš„keyå–å‡ºæ¥ï¼Œæ”¾åœ¨æ•°ç»„ä¸­ï¼Œå……å½“åŸå¸‚åˆ—è¡¨å³ä¾§çš„é¦–å­—æ¯å¯¼èˆªæ¡
 let cityIndex = Object.keys(cityList).sort() 
 return {
     cityList,
     cityIndex
 }
 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>åœ¨<code>getCityList()</code>æ–¹æ³•ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ¥æ ¼å¼åŒ–æ•°æ®</p></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getCityList() {
    let { data: res } = await axios.get('http://localhost:8080/area/city?level=1')
    // æ ¼å¼åŒ–è¿”å›çš„æ•°æ®
    let { cityList, cityIndex } = formatCityData(res.body)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>è·å–çƒ­é—¨æ•°æ®</strong>ï¼Œå¹¶ä¸”æ·»åŠ åˆ° <code>cityList</code>å’Œ<code>cityListIndex</code>ä¸­ï¼Œæ³¨æ„ï¼Œå¯¹è±¡é‡Œé¢çš„å±æ€§æ˜¯æ— åºçš„ï¼Œå¯ä»¥ç›´æ¥æ’å…¥ï¼Œä½†æ˜¯æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ åˆ°å‰é¢</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// è·å–çƒ­é—¨åŸå¸‚æ•°æ®
let {data: hotRes} = await axios.get('http://localhost:8080/area/hot')
// å°†çƒ­é—¨æ•°æ®æ·»åŠ åˆ° cityList
cityList['hot'] = hotRes.body
// å°†çƒ­é—¨æ•°æ®æ·»åŠ åˆ° cityIndex 
cityIndex.unshift('hot')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>è·å–å½“å‰åŸå¸‚ä¿¡æ¯</strong>ï¼Œæˆ‘ä»¬å°†è·å–å®šä½åŸå¸‚çš„ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå“ªä¸ªé¡µé¢éœ€è¦è·å–å®šä½åŸå¸‚ï¼Œç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•å³å¯</p> <ul><li>åœ¨utilsç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¿›è¡Œå°è£…</li> <li>åˆ›å»ºå¹¶ä¸”å¯¼å‡ºè·å–å®šä½åŸå¸‚çš„å‡½æ•° getCurrentCity</li> <li>åˆ¤æ–­localStorageä¸­æ˜¯å¦æœ‰å®šä½ä¿¡æ¯</li> <li>å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬é€šè¿‡è·å–å®šä½ä¿¡æ¯æ¥è·å–å½“å‰å®šä½åŸå¸‚ï¼Œè·å–å®Œäº†éœ€è¦å­˜åˆ°æœ¬åœ°å­˜å‚¨ä¸­</li> <li>å¦‚æœæœ‰ï¼Œç›´æ¥ä½¿ç”¨å°±å¥½</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import axios from 'axios'
export const getCurrentCity = () =&gt; {
    // è·å–æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦æœ‰
    let localCity = JSON.parse(localStorage.getItem('localCity'))
    if (!localCity) {
        // å¦‚æœæ²¡æœ‰ï¼Œå°±éœ€è¦è·å–å½“å‰å®šä½åŸå¸‚
        // åˆ©ç”¨ promis æ¥è§£å†³å¼‚æ­¥æ•°æ®çš„è¿”å›
        return new Promise((resolve, reject) =&gt; {
            try {
                // è·å–å½“å‰åŸå¸‚ä¿¡æ¯
                var myCity = new window.BMap.LocalCity();
                myCity.get(async res =&gt; {
                    // å½“è·å–åˆ°å¯¹åº”çš„åŸå¸‚ä¿¡æ¯äº†åï¼Œæˆ‘ä»¬éœ€è¦è¯·æ±‚æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨
                    const { data: infoRes } = await axios.get('http://localhost:8080/area/info', {
                        params: {
                            name: res.name
                        }
                    })
                    if (infoRes.status != 200) {
                        console.error(infoRes.description)
                        return
                    }
                    console.log(infoRes);
				// res.data.body
                // ä¿å­˜åœ¨æœ¬åœ°å­˜å‚¨ä¸­
                localStorage.setItem('localCity', JSON.stringify(infoRes.body))
                    // è¿”å›åŸå¸‚çš„æ•°æ®
                resolve(infoRes.body)
            });
        } catch (error) {
            // è¿›å…¥åˆ°catchä»£ç å— è¯´æ˜è°ƒç”¨å¤±è´¥äº†
            reject(error)
        }
    })

}
// å¦‚æœæœ‰ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›åŸå¸‚ä¿¡æ¯å°±å¥½,è¿”å›ä¸€ä¸ªæˆåŠŸçš„promiså¯¹è±¡å³å¯
return Promise.resolve(localCity)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><ul><li>å°†å®šä½çš„åŸå¸‚ä¿¡æ¯æ·»åŠ åˆ° <code>cityList</code>å’Œ<code>cityIndex</code>ä¸­</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// è·å–å½“å‰åŸå¸‚å®šä½ä¿¡æ¯
let curCity = await getCurrentCity()
// å°†å½“å‰åŸå¸‚æ•°æ®æ·»åŠ åˆ° cityList
cityList['#'] = curCity
// å°†å½“å‰åŸå¸‚æ•°æ®æ·»åŠ åˆ° cityIndex 
cityIndex.unshift('#')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â˜…â˜…"><a href="#é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â˜…â˜…" class="header-anchor">#</a> é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–ï¼ˆâ˜…â˜…ï¼‰</h3> <h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="header-anchor">#</a> æ¦‚è¿°</h4> <p>åœ¨å±•ç¤ºå¤§å‹åˆ—è¡¨å’Œè¡¨æ ¼æ•°æ®çš„æ—¶å€™ï¼ˆåŸå¸‚åˆ—è¡¨ã€é€šè®¯å½•ã€å¾®åšç­‰ï¼‰ï¼Œä¼šå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œæ»šåŠ¨ä¸æµç•…ç­‰æ€§èƒ½é—®é¢˜ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç§»åŠ¨è®¾å¤‡è€—ç”µåŠ å¿«ï¼Œå½±å“ç§»åŠ¨è®¾å¤‡çš„ç”µæ± å¯¿å‘½</p> <p>äº§ç”Ÿæ€§èƒ½é—®é¢˜çš„å…ƒç´ ï¼šå¤§é‡DOMèŠ‚ç‚¹çš„é‡ç»˜å’Œé‡æ’</p> <p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p> <ul><li><p>æ‡’æ¸²æŸ“</p></li> <li><p>å¯è§†åŒºåŸŸæ¸²æŸ“</p></li></ul> <h4 id="æ‡’æ¸²æŸ“"><a href="#æ‡’æ¸²æŸ“" class="header-anchor">#</a> æ‡’æ¸²æŸ“</h4> <p>æ‡’åŠ è½½ï¼Œå¸¸è§çš„é•¿åˆ—è¡¨ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¸¸è§äºç§»åŠ¨ç«¯
åŸç†ï¼šæ¯æ¬¡åªæ¸²æŸ“ä¸€éƒ¨åˆ†ï¼Œç­‰æ¸²æŸ“çš„æ•°æ®å³å°†æ»šåŠ¨å®Œæ—¶ï¼Œå†æ¸²æŸ“ä¸‹é¢éƒ¨åˆ†
ä¼˜ç‚¹ï¼šæ¯æ¬¡æ¸²æŸ“ä¸€éƒ¨åˆ†æ•°æ®ï¼Œé€Ÿåº¦å¿«
ç¼ºç‚¹ï¼šæ•°æ®é‡å¤§æ—¶ï¼Œé¡µé¢ä¸­ä¾ç„¶å­˜åœ¨å¤§é‡DOMèŠ‚ç‚¹ï¼Œå ç”¨å†…å­˜è¿‡å¤šï¼Œé™ä½æµè§ˆå™¨æ¸²æŸ“æ€§èƒ½ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿
ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®é‡ä¸å¤§çš„æƒ…å†µä¸‹</p> <h4 id="å¯è§†åŒºæ¸²æŸ“-react-virtualized"><a href="#å¯è§†åŒºæ¸²æŸ“-react-virtualized" class="header-anchor">#</a> å¯è§†åŒºæ¸²æŸ“ï¼ˆReact-virtualizedï¼‰</h4> <p>åŸç†ï¼š åªæ¸²æŸ“é¡µé¢å¯è§†åŒºåŸŸçš„åˆ—è¡¨é¡¹ï¼Œéå¯è§†åŒºåŸŸçš„æ•°æ® å®Œå…¨ä¸æ¸²æŸ“(é¢„åŠ è½½å‰é¢å‡ é¡¹å’Œåé¢å‡ é¡¹) ï¼Œåœ¨æ»šåŠ¨åˆ—è¡¨æ—¶åŠ¨æ€æ›´æ–°åˆ—è¡¨é¡¹</p> <p><img src="https://img-blog.csdnimg.cn/20191130185458915.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-iJrns70T-1575111205714)(images/å¯è§†åŒºæ¸²æŸ“.png)]"></p> <p><img src="https://img-blog.csdnimg.cn/20191130185505453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Cz89Tea0-1575111205715)(images/é¢„åŠ è½½.png)]"></p> <p>ä½¿ç”¨åœºæ™¯ï¼š ä¸€æ¬¡æ€§å±•ç¤ºå¤§é‡æ•°æ®çš„æƒ…å†µ</p> <h3 id="react-virtualized-â˜…â˜…â˜…"><a href="#react-virtualized-â˜…â˜…â˜…" class="header-anchor">#</a> react-virtualizedï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="header-anchor">#</a> æ¦‚è¿°</h4> <p>åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ï¼šå®ç°åŸå¸‚é€‰æ‹©åˆ—è¡¨é¡µé¢çš„æ¸²æŸ“
react-virtualized æ˜¯Reactç»„ä»¶ï¼Œç”¨æ¥é«˜æ•ˆæ¸²æŸ“å¤§å‹åˆ—è¡¨å’Œè¡¨æ ¼æ•°æ®
GitHubåœ°å€ï¼š react-virtualized</p> <h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="header-anchor">#</a> åŸºæœ¬ä½¿ç”¨</h4> <ul><li>å®‰è£…ï¼š yarn add react-virtualized</li> <li>åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ index.js ä¸­å¯¼å…¥æ ·å¼æ–‡ä»¶</li> <li>æ‰“å¼€ <a href="https://github.com/bvaughn/react-virtualized/blob/master/docs" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œ ç‚¹å‡»Listç»„ä»¶ï¼Œè¿›å…¥Listçš„æ–‡æ¡£ä¸­</li> <li>æ‹·è´ç¤ºä¾‹ä»£ç åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­ï¼Œåˆ†æç¤ºä¾‹ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import ReactDOM from 'react-dom';
import { List } from 'react-virtualized';

// åˆ—è¡¨æ•°æ®
const list = [
  'Brian Vaughn'
  // And so on...
];
// æ¸²æŸ“æ¯ä¸€è¡Œçš„å†…å®¹
function rowRenderer ({
  key,         // Unique key within array of rows
  index,       // ç´¢å¼•å·
  isScrolling, // å½“å‰é¡¹æ˜¯å¦æ­£åœ¨æ»šåŠ¨ä¸­
  isVisible,   // å½“å‰é¡¹åœ¨Listä¸­æ˜¯å¯è§çš„
  style        // é‡ç‚¹å±æ€§ï¼šä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè¡Œæ•°æ·»åŠ è¯¥æ ·å¼
}) {
  return (
    &lt;div
      key={key}
      style={style}
    &gt;
      {list[index]}
    &lt;/div&gt;
  )
}

// æ¸²æŸ“liståˆ—è¡¨
ReactDOM.render(
  &lt;List
    // ç»„ä»¶çš„å®½åº¦
    width={300}
    // ç»„ä»¶çš„é«˜åº¦
    height={300}
    rowCount={list.length}
    // æ¯è¡Œçš„é«˜åº¦
    rowHeight={20}
    rowRenderer={rowRenderer}
  /&gt;,
  document.getElementById('example')
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="æ¸²æŸ“åŸå¸‚åˆ—è¡¨-â˜…â˜…â˜…"><a href="#æ¸²æŸ“åŸå¸‚åˆ—è¡¨-â˜…â˜…â˜…" class="header-anchor">#</a> æ¸²æŸ“åŸå¸‚åˆ—è¡¨ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="è®©listç»„ä»¶å æ»¡å±å¹•"><a href="#è®©listç»„ä»¶å æ»¡å±å¹•" class="header-anchor">#</a> è®©Listç»„ä»¶å æ»¡å±å¹•</h4> <ul><li><p>åˆ©ç”¨ <code>AutoSizer</code> ç»„ä»¶æ¥è°ƒæ•´å­å…ƒç´ çš„å®½é«˜</p></li> <li><p>å¯¼å…¥ <code>AutoSizer</code> ç»„ä»¶</p></li> <li><p>é€šè¿‡ render-props æ¨¡å¼ï¼Œè·å–åˆ°<code>AutoSizer</code> ç»„ä»¶æš´éœ²çš„ width å’Œ height å±æ€§</p></li> <li><p>è®¾ç½®Listç»„ä»¶çš„ width å’Œ height å±æ€§</p></li> <li><p><img src="https://img-blog.csdnimg.cn/20191130185532526.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-SD9ByzMO-1575111205718)(images/autosizer.png)]"></p></li> <li><p>è®¾ç½®åŸå¸‚é€‰æ‹©é¡µé¢æ ¹å…ƒç´ é«˜åº¦ 100%ï¼Œè®©Listç»„ä»¶å æ»¡æ•´ä¸ªé¡µé¢</p></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.citylist</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
    <span class="token selector">.navbar</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> -45px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f5f6<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">// navbar æ ‡é¢˜é¢œè‰²
    .am-navbar-title</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="æ¸²æŸ“åŸå¸‚åˆ—è¡¨"><a href="#æ¸²æŸ“åŸå¸‚åˆ—è¡¨" class="header-anchor">#</a> æ¸²æŸ“åŸå¸‚åˆ—è¡¨</h4> <ul><li>å°†è·å–åˆ°çš„cityListå’ŒcityIndexæ·»åŠ ä¸ºç»„å»ºçš„çŠ¶æ€æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>    state = {
        cityList: null,
        cityIndex: []
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ä¿®æ”¹Listç»„ä»¶çš„rowCountä¸ºcityIndexæ•°ç»„çš„é•¿åº¦</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* åŸå¸‚åˆ—è¡¨ */}
&lt;AutoSizer&gt;
    {
        ({ width, height }) =&gt; {
            return &lt;List
                // ç»„ä»¶çš„å®½åº¦
                width={width}
                // ç»„ä»¶çš„é«˜åº¦
                height={height}
                rowCount={this.state.cityIndex.length}
                // æ¯è¡Œçš„é«˜åº¦
                rowHeight={this.getRowHeight}
                rowRenderer={this.rowRenderer}
            /&gt;
        }
    }
&lt;/AutoSizer&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ä¿®æ”¹Listç»„ä»¶çš„rowRenderæ–¹æ³•ä¸­æ¸²æŸ“çš„ç»“æ„å’Œæ ·å¼</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“æ¯ä¸€è¡Œçš„å†…å®¹
rowRenderer({
    key,         // Unique key within array of rows
    index,       // ç´¢å¼•å·
    isScrolling, // å½“å‰é¡¹æ˜¯å¦æ­£åœ¨æ»šåŠ¨ä¸­
    isVisible,   // å½“å‰é¡¹åœ¨Listä¸­æ˜¯å¯è§çš„
    style        // é‡ç‚¹å±æ€§ï¼šä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè¡Œæ•°æ·»åŠ è¯¥æ ·å¼
}) {
    let letter = this.state.cityIndex[index]
    let citys = this.state.cityList[letter]
    return (

        &lt;div
            key={key}
            style={style}
            className=&quot;city&quot;
        &gt;
            &lt;div className=&quot;title&quot;&gt;{this.formatCityIndex(letter)}&lt;/div&gt;
            {citys.map(item =&gt; {
                return (
                    &lt;div className=&quot;name&quot; key={item.value}&gt;{item.label}&lt;/div&gt;
                )
            })}&lt;/div&gt;

â€‹    )
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä¿®æ”¹Listçš„rowHeightä¸ºå‡½æ•°ï¼ŒåŠ¨æ€è®¡ç®—æ¯è¡Œçš„é«˜åº¦</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// åŠ¨æ€è®¡ç®—é«˜åº¦
getRowHeight = ({ index }) =&gt; {
    // ç´¢å¼•çš„é«˜åº¦ + æ•°é‡ * æ¯ä¸ªåŸå¸‚çš„é«˜åº¦
    let { cityIndex, cityList } = this.state;
return cityList[cityIndex[index]].length * NAME_HEIGHT + TITLE_HEIGHT;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="æ¸²æŸ“å³ä¾§ç´¢å¼•åˆ—è¡¨"><a href="#æ¸²æŸ“å³ä¾§ç´¢å¼•åˆ—è¡¨" class="header-anchor">#</a> æ¸²æŸ“å³ä¾§ç´¢å¼•åˆ—è¡¨</h4> <ul><li>å°è£…renderCityIndexæ–¹æ³•ï¼Œç”¨æ¥æ¸²æŸ“åŸå¸‚ç´¢å¼•åˆ—è¡¨</li> <li>åœ¨æ–¹æ³•ä¸­ï¼Œè·å–åˆ°ç´¢å¼•æ•°ç»„ cityIndexï¼Œéå†cityIndexï¼Œæ¸²æŸ“ç´¢å¼•åˆ—è¡¨</li> <li>å°†ç´¢å¼•hotæ›¿æ¢æˆ çƒ­</li> <li>åœ¨stateä¸­æ·»åŠ çŠ¶æ€ activeIndexï¼Œç”¨æ¥æŒ‡å®šå½“å‰é«˜äº®çš„ç´¢å¼•</li> <li>åœ¨éå†cityIndexæ—¶ï¼Œæ·»åŠ å½“å‰å­—æ¯ç´¢å¼•æ˜¯å¦æ˜¯é«˜äº®</li></ul> <p>ç»“æ„ä»£ç </p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token punctuation">{</span><span class="token comment">/* å³ä¾§ç´¢å¼•åˆ—è¡¨ */</span><span class="token punctuation">}</span>
<span class="token selector">&lt;ul className=&quot;city-index&quot;&gt;</span>
    <span class="token punctuation">{</span>
        this.<span class="token function">renderCityIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token selector">&lt;/ul&gt;

æ ·å¼ä»£ç 
.city-index</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token selector">.city-index-item</span> <span class="token punctuation">{</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.index-active</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #21b97a<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>æ¸²æŸ“å³ä¾§ç´¢å¼•çš„å‡½æ•°</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>
}renderCityIndex() {
    return this.state.cityIndex.map((item,index) =&gt; {
        console.log(item,index);
return (
        &lt;li className=&quot;city-index-item&quot; key={item}&gt;
            {/*åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœé«˜äº®çŠ¶æ€çš„ç´¢å¼•ç­‰äºå½“å‰ç´¢å¼•ï¼Œé‚£ä¹ˆå°±è®¾ç½®é«˜äº®æ ·å¼*/}
            &lt;span className={this.state.activeIndex == index? 'index-active' : ''}&gt;{item == 'hot' ? 'çƒ­' : item.toUpperCase()}&lt;/span&gt;
        &lt;/li&gt;
    )
})
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day04"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day04" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day04</h2> <p>åŸå¸‚åˆ—è¡¨ç´¢å¼•åˆ—ç›¸å…³åŠŸèƒ½&amp;å°è£…NavHeader&amp;CSS IN JS</p> <h3 id="æ¸²æŸ“åŸå¸‚åˆ—è¡¨-2"><a href="#æ¸²æŸ“åŸå¸‚åˆ—è¡¨-2" class="header-anchor">#</a> æ¸²æŸ“åŸå¸‚åˆ—è¡¨</h3> <h4 id="ç›®æ ‡-2"><a href="#ç›®æ ‡-2" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>å®ŒæˆåŸå¸‚ç´¢å¼•é«˜äº®æ•ˆæœ</li> <li>å®Œæˆç‚¹å‡»ç´¢å¼•è·³è½¬åˆ°å¯¹åº”ä½ç½®</li> <li>èƒ½å¤Ÿå®ç°åˆ‡æ¢åŸå¸‚åŠŸèƒ½ï¼ˆé™¤äº†åŒ—äº¬ï¼Œä¸Šæµ·ï¼Œå¹¿å·ï¼Œæ·±åœ³ï¼Œå…¶ä»–æˆå‡æ— æˆ¿æºä¿¡æ¯ï¼Œéœ€è¦æç¤ºç”¨æˆ·ï¼‰</li></ul> <h4 id="åŸå¸‚ç´¢å¼•åˆ—è¡¨é«˜äº®"><a href="#åŸå¸‚ç´¢å¼•åˆ—è¡¨é«˜äº®" class="header-anchor">#</a> åŸå¸‚ç´¢å¼•åˆ—è¡¨é«˜äº®</h4> <ul><li>ç»™listç»„ä»¶æ·»åŠ onRowsRenderedé…ç½®é¡¹ï¼Œç”¨äºè·å–å½“å‰åˆ—è¡¨æ¸²æŸ“çš„è¡Œä¿¡æ¯ï¼Œåœ¨é‡Œé¢å°±ä¼šæœ‰ç›¸åº”ä¿¡æ¯</li> <li>é€šè¿‡å‚æ•° startIndex è·å–åˆ° èµ·å§‹è¡Œå¯¹åº”çš„ç´¢å¼•å·</li> <li>åˆ¤æ–­ startIndex å’Œ activeIndex ä¸åŒæ—¶å€™ï¼Œæ›´æ–°çŠ¶æ€ activeIndexä¸º startIndex</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;List
    ...
    onRowsRendered={this.rowRendered}
/&gt;

/**
 * è·å–æ»šåŠ¨æ—¶å€™,ç›¸åº”çš„æ•°æ®
 * @param {*} param0 
 */
rowRendered = ({ startIndex }) =&gt; {
    if (this.state.activeIndex !== startIndex) {
        this.setState({
            activeIndex: startIndex
        })
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="ç‚¹å‡»ç´¢å¼•ç½®é¡¶è¯¥ç´¢å¼•åŸå¸‚"><a href="#ç‚¹å‡»ç´¢å¼•ç½®é¡¶è¯¥ç´¢å¼•åŸå¸‚" class="header-anchor">#</a> ç‚¹å‡»ç´¢å¼•ç½®é¡¶è¯¥ç´¢å¼•åŸå¸‚</h4> <p><code>Object.keys</code> è¿”å›ä¸€ä¸ªæ‰€æœ‰å…ƒç´ ä¸ºå­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œå…¶å…ƒç´ æ¥è‡ªäºä»ç»™å®šçš„<code>object</code>ä¸Šé¢å¯ç›´æ¥æšä¸¾çš„å±æ€§ã€‚è¿™äº›å±æ€§çš„é¡ºåºä¸æ‰‹åŠ¨éå†è¯¥å¯¹è±¡å±æ€§æ—¶çš„ä¸€è‡´ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// array like object</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// console: ['0', '1', '2']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>ç»™ç´¢å¼•åˆ—è¡¨ç»‘å®šç‚¹å‡»äº‹ä»¶</p></li> <li><p>åœ¨ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œé€šè¿‡indexè·å–åˆ°å½“å‰é¡¹ç´¢å¼•å·</p></li> <li><p>è°ƒç”¨Listç»„ä»¶çš„ scrollToRowæ–¹æ³•ï¼Œè®©Listç»„ä»¶æ»šåŠ¨åˆ°æŒ‡å®šè¡Œ</p> <ul><li><p>åœ¨constructorä¸­ï¼Œè°ƒç”¨React.createRef() åˆ›å»ºrefå¯¹è±¡</p></li> <li><p>å°†åˆ›å»ºå¥½çš„refå¯¹è±¡ï¼Œæ·»åŠ ä¸ºListç»„ä»¶çš„refå±æ€§</p></li> <li><p>é€šè¿‡refçš„currentå±æ€§ï¼Œè·å–åˆ°ç»„ä»¶å®ä¾‹ï¼Œå†è°ƒç”¨ç»„ä»¶çš„scrollToRowæ–¹æ³•</p></li> <li><p>è®¾ç½®Listç»„ä»¶çš„scrollToAlignmenté…ç½®é¡¹å€¼ä¸ºstartï¼Œä¿è¯ç‚¹å‡»è¡Œå‡ºç°åœ¨é¡µé¢é¡¶éƒ¨</p></li></ul></li> <li><p>å¯¹äºç‚¹å‡»ç´¢å¼•æ— æ³•æ­£ç¡®å®šä½çš„é—®é¢˜ï¼Œè°ƒç”¨Listç»„ä»¶çš„ measureAllRows æ–¹æ³•ï¼Œæå‰è®¡ç®—é«˜åº¦æ¥è§£å†³</p></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ ¸å¿ƒä»£ç 
constructor() {
    ...
    this.listComponent = React.createRef()
}
async componentDidMount() {
    await this.getCityList()
    // è®¡ç®—Listç»„ä»¶é«˜åº¦
    this.listComponent.current.measureAllRows()
}
renderCityIndex() {
    return this.state.cityIndex.map((item, index) =&gt; {
        return (
            &lt;li className=&quot;city-index-item&quot; key={item} onClick={() =&gt; {
                // æ‹¿åˆ°Listç»„ä»¶çš„å®ä¾‹
                this.listComponent.current.scrollToRow(index)
            }}&gt;
              ...
            &lt;/li&gt;
        )
    })
}
render() {
    return (
        &lt;div className=&quot;citylist&quot;&gt;
            ...
            {/* åŸå¸‚åˆ—è¡¨ */}
            &lt;AutoSizer&gt;
                {
                    ({ width, height }) =&gt; {
                        return &lt;List
                            ref={this.listComponent}
                            ...
                        /&gt;
                    }
                }
            &lt;/AutoSizer&gt;
            ...
        &lt;/div&gt;
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="åˆ‡æ¢åŸå¸‚"><a href="#åˆ‡æ¢åŸå¸‚" class="header-anchor">#</a> åˆ‡æ¢åŸå¸‚</h4> <ul><li>ç»™åŸå¸‚åˆ—è¡¨é¡¹ç»‘å®šäº‹ä»¶</li> <li>åˆ¤æ–­å½“å‰åŸå¸‚æ˜¯å¦æœ‰æˆ¿æºæ•°æ®</li> <li>å¦‚æœæœ‰æˆ¿æºæ•°æ®ï¼Œåˆ™ä¿æŒå½“å‰åŸå¸‚æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜ä¸­ï¼Œå¹¶è¿”å›ä¸Šä¸€é¡µ</li> <li>å¦‚æœæ²¡æœ‰æˆ¿æºæ•°æ®ï¼Œåˆ™æç¤ºç”¨æˆ·ï¼šæ”¹åŸå¸‚æš‚æ— æˆ¿æºæ•°æ®ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const HOST_CITY = ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³']
// æ¸²æŸ“æ¯ä¸€è¡Œçš„å†…å®¹
rowRenderer({
    key,         // Unique key within array of rows
    index,       // ç´¢å¼•å·
    isScrolling, // å½“å‰é¡¹æ˜¯å¦æ­£åœ¨æ»šåŠ¨ä¸­
    isVisible,   // å½“å‰é¡¹åœ¨Listä¸­æ˜¯å¯è§çš„
    style        // é‡ç‚¹å±æ€§ï¼šä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè¡Œæ•°æ·»åŠ è¯¥æ ·å¼
}) {
    let letter = this.state.cityIndex[index]
    let citys = this.state.cityList[letter]
    return (
        &lt;div
            key={key}
            style={style}
            className=&quot;city&quot;
        &gt;
            &lt;div className=&quot;title&quot;&gt;{this.formatCityIndex(letter)}&lt;/div&gt;
            {citys.map(item =&gt; {
                return (
                    // ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œä¼ é€’åŸå¸‚åç§°å’Œvalue
                    &lt;div className=&quot;name&quot; key={item.value} onClick={() =&gt; this.changeCity(item.label, item.value)}&gt;{item.label}&lt;/div&gt;
                )
            })}&lt;/div&gt;
    )
}
changeCity = (label, value) =&gt; {
    if (HOST_CITY.indexOf(label) &gt; -1) {
        // è¯´æ˜æ˜¯æœ‰æˆ¿æºæ•°æ®çš„åŸå¸‚
        localStorage.setItem('localCity', JSON.stringify({
            label,
            value
        }))
    } else {
        // æ²¡æœ‰æˆ¿æºåŸå¸‚ï¼Œæç¤ºç”¨æˆ·
        Toast.info('å½“å‰åŸå¸‚æ²¡æœ‰æˆ¿æº', 1);
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸Š-æ€»ç»“"><a href="#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸Š-æ€»ç»“" class="header-anchor">#</a> å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸Šï¼‰-æ€»ç»“</h3> <ul><li>é¡¹ç›®å‡†å¤‡ï¼šéƒ¨ç½²æœ¬åœ°æ¥å£ï¼Œè„šæ‰‹æ¶åˆå§‹åŒ–é¡¹ç›®ï¼Œantd-mobileï¼Œè·¯ç”±ç­‰</li> <li>é¡¹ç›®æ•´ä½“å¸ƒå±€ï¼šåˆ†æä¸¤ç§é¡µé¢å¸ƒå±€ï¼Œä½¿ç”¨åµŒå¥—è·¯ç”±å®ç°å¸¦TabBaré¡µé¢å¸ƒå±€ç­‰</li> <li>é¦–é¡µæ¨¡å—ï¼šç§Ÿæˆ¿å°ç»„ç»“æ„å¸ƒå±€ï¼Œæ•°æ®è·å–ï¼ŒH5åœ°ç†å®šä½å’Œç™¾åº¦åœ°å›¾åœ°ç†å®šä½ç­‰</li> <li>åŸå¸‚é€‰æ‹©æ¨¡å—ï¼šæ•°æ®ç»“æ„å¤„ç†ï¼Œé•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–ï¼Œreact-virtualizedï¼Œç´¢å¼•åˆ—è¡¨ç­‰</li></ul> <h3 id="å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-ç›®æ ‡"><a href="#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-ç›®æ ‡" class="header-anchor">#</a> å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸­ï¼‰-ç›®æ ‡</h3> <ul><li>èƒ½å¤Ÿåœ¨ç™¾åº¦åœ°å›¾ä¸­å±•ç¤ºå½“å‰å®šä½åŸå¸‚</li> <li>èƒ½å¤Ÿä½¿ç”¨åœ°å›¾æ ‡æ³¨å®Œæˆæˆ¿æºä¿¡æ¯ç»˜åˆ¶</li> <li>èƒ½å¤Ÿå±•ç¤ºåŸå¸‚æ‰€æœ‰åŒºçš„æˆ¿æºæ•°æ®</li> <li>èƒ½å¤Ÿå°è£…æ‰¾æˆ¿é¡µé¢çš„æ¡ä»¶ç­›é€‰æ ç»„ä»¶</li> <li>èƒ½å¤Ÿä½¿ç”¨ react-spring ç»„ä»¶å®ç°åŠ¨ç”»æ•ˆæœ</li> <li>èƒ½å¤Ÿå®Œæˆæˆ¿å±‹è¯¦æƒ…é¡µé¢çš„æ•°æ®å±•ç¤º</li></ul> <h3 id="åœ°å›¾æ‰¾æˆ¿æ¨¡å—"><a href="#åœ°å›¾æ‰¾æˆ¿æ¨¡å—" class="header-anchor">#</a> åœ°å›¾æ‰¾æˆ¿æ¨¡å—</h3> <h4 id="ç›®æ ‡-3"><a href="#ç›®æ ‡-3" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>å°è£…NavHeaderç»„ä»¶</li> <li>å®ç°NavHeaderç»„ä»¶ä¸­å·¦ä¾§æŒ‰é’®åŠŸèƒ½</li> <li>èƒ½å¤Ÿè§£å†³NavHeaderç»„ä»¶ä¸­è·å–ä¸åˆ°è·¯ç”±ä¿¡æ¯çš„é—®é¢˜</li> <li>å¯¹NavHeaderçš„propsè¿›è¡Œæ ¡éªŒ</li></ul> <h4 id="åŠŸèƒ½åˆ†æ"><a href="#åŠŸèƒ½åˆ†æ" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>å±•ç¤ºå½“å‰å®šä½åŸå¸‚</li> <li>å±•ç¤ºè¯¥åŸå¸‚æ‰€æœ‰åŒºçš„æˆ¿æºæ•°æ®</li> <li>å±•ç¤ºæŸåŒºä¸‹æ‰€æœ‰é•‡çš„æˆ¿æºæ•°æ®</li> <li>å±•ç¤ºæŸé•‡ä¸‹æ‰€æœ‰çš„æ ¡åŒºçš„æˆ¿æºæ•°æ®</li> <li>å±•ç¤ºæŸå°åŒºä¸‹çš„æˆ¿æºæ•°æ®åˆ—è¡¨</li></ul> <h3 id="é¡¶éƒ¨å¯¼èˆªæ "><a href="#é¡¶éƒ¨å¯¼èˆªæ " class="header-anchor">#</a> é¡¶éƒ¨å¯¼èˆªæ </h3> <h4 id="ç»“æ„å®ç°"><a href="#ç»“æ„å®ç°" class="header-anchor">#</a> ç»“æ„å®ç°</h4> <ul><li>å°è£…NavHeaderç»„ä»¶å®ç°åŸå¸‚é€‰æ‹©ï¼Œåœ°å›¾æ‰¾æˆ¿é¡µé¢çš„å¤ç”¨</li> <li>åœ¨componentsç›®å½•ä¸­åˆ›å»ºç»„ä»¶ NavHeader/index.js</li> <li>åœ¨è¯¥ç»„ä»¶ä¸­å°è£… antd-mobile ç»„ä»¶åº“ä¸­çš„ NavBarç»„ä»¶</li> <li>åœ¨åœ°å›¾æ‰¾æˆ¿é¡µé¢ä½¿ç”¨å°è£…å¥½çš„ NavHeaderç»„ä»¶å®ç°é¡¶éƒ¨å¯¼èˆªæ åŠŸèƒ½</li> <li>ä½¿ç”¨NavHeaderç»„ä»¶ï¼Œæ›¿æ¢åŸå¸‚é€‰æ‹©é¡µé¢çš„NavBarç»„</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import {NavBar} from 'antd-mobile'

// components/NavHeader/index.js
export default class extends React.Component {
    render() {
        return (
            &lt;NavBar
                    className=&quot;navbar&quot;
                    // æ¨¡å¼ é»˜è®¤å€¼æ˜¯ dark
                    mode=&quot;light&quot;
                    // å·¦ä¾§å°å›¾ç‰‡
                    icon={&lt;i className='iconfont icon-back' /&gt;}
                    // å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
                    onLeftClick={() =&gt; this.props.history.go(-1)}
                // æ ‡é¢˜å†…å®¹ä¸å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡å¤–ç•Œæ¥ä¼ å…¥
                &gt;{this.props.children}&lt;/NavBar&gt;
        )
    }
}
// pages/Map/index.js
...
import NavHeader from '../../components/NavHeader'
export default class extends React.Component {
    ...
    render() {
        return (
            &lt;div className=&quot;map&quot;&gt;
                &lt;NavHeader&gt;
                    åœ°å›¾æ‰¾æˆ¿
                &lt;/NavHeader&gt;
                &lt;div id=&quot;container&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        )
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="æ ·å¼è°ƒæ•´"><a href="#æ ·å¼è°ƒæ•´" class="header-anchor">#</a> æ ·å¼è°ƒæ•´</h3> <ul><li>åœ¨componentsä¸‹çš„NavHeaderæ–‡ä»¶å¤¹ä¸­åˆ›å»º index.scss æ–‡ä»¶</li> <li>æŠŠä¹‹å‰åŸå¸‚åˆ—è¡¨å†™è¿‡çš„æ ·å¼ï¼Œå¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶ä¸‹</li></ul> <h3 id="åŠŸèƒ½å¤„ç†"><a href="#åŠŸèƒ½å¤„ç†" class="header-anchor">#</a> åŠŸèƒ½å¤„ç†</h3> <p>æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰è·¯ç”± Route ç›´æ¥æ¸²æŸ“çš„ç»„ä»¶æ‰èƒ½å¤Ÿè·å–åˆ°è·¯ç”±ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦åœ¨å…¶ä»–ç»„ä»¶ä¸­è·å–åˆ°è·¯ç”±ä¿¡æ¯å¯ä»¥é€šè¿‡ withRouter é«˜é˜¶ç»„ä»¶æ¥è·å–</p> <ul><li><p>ä» react-router-dom ä¸­å¯¼å…¥ withRouter é«˜é˜¶ç»„ä»¶</p></li> <li><p>ä½¿ç”¨ withRouter é«˜é˜¶ç»„ä»¶åŒ…è£… NavHeader ç»„ä»¶</p></li> <li><p>ç›®çš„ï¼šåŒ…è£…åï¼Œå°±å¯ä»¥åœ¨ç»„ä»¶ä¸­è·å–åˆ°å½“å‰è·¯ç”±ä¿¡æ¯
ä» props ä¸­å°±èƒ½è·å–historyå¯¹è±¡</p></li> <li><p>è°ƒç”¨historyå¯¹è±¡çš„ go() æ–¹æ³•å°±èƒ½å®ç°è¿”å›ä¸Šä¸€é¡µåŠŸèƒ½äº†</p></li> <li><p>ç”±äºå¤´éƒ¨çš„å·¦ä¾§æŒ‰é’®ä¸ä¸€å®šæ˜¯è¿”å›ä¸Šä¸€ä¸ªé¡µé¢çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå·¦ä¾§ç‚¹å‡»é€»è¾‘å¤„ç†éœ€è¦é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’è¿›æ¥ï¼Œå¦‚æœè¯´å¤–ç•Œä¼ é€’äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨å¤–ç•Œçš„è¡Œä¸ºï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’ï¼Œé‚£ä¹ˆå°±ç”¨é»˜è®¤çš„è¡Œä¸º</p></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import { NavBar } from 'antd-mobile'
import './index.scss'
import { withRouter } from 'react-router-dom'

class NavHeader extends React.Component {
    render() {
        let defaultHandler = () =&gt; {
            this.props.history.go(-1)
        }
        return (
            &lt;NavBar
                className=&quot;navbar&quot;
                // æ¨¡å¼ é»˜è®¤å€¼æ˜¯ dark
                mode=&quot;light&quot;
                // å·¦ä¾§å°å›¾ç‰‡
                icon={&lt;i className='iconfont icon-back' /&gt;}
                // å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
                onLeftClick={this.props.onLeftClick || defaultHandler}
            &gt;{this.props.children}&lt;/NavBar&gt;
        )
    }
}
// é€šè¿‡withRouter åŒ…è£…ä¸€å±‚åï¼Œè¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªè·Ÿæˆ‘ä»¬ä¹‹å‰è®²åˆ°çš„åŒ…è£…ç»„ä»¶å¾ˆç±»ä¼¼
export default withRouter(NavHeader)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="æ·»åŠ propsæ ¡éªŒ"><a href="#æ·»åŠ propsæ ¡éªŒ" class="header-anchor">#</a> æ·»åŠ propsæ ¡éªŒ</h3> <p>å¾€å¾€æˆ‘ä»¬å°è£…å¥½äº†çš„ç»„ä»¶å¯èƒ½ä¼šæä¾›ç»™åˆ«äººå»ä½¿ç”¨ï¼Œç„¶è€Œåˆ«äººåœ¨ä½¿ç”¨æˆ‘ä»¬ç»„ä»¶çš„æ—¶å€™ä¸æ¸…æ¥šéœ€è¦ä¼ é€’æ€æ ·çš„propsï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ propsæ ¡éªŒï¼Œæ¥æç¤ºä½¿ç”¨è€…ï¼Œåº”è¯¥æ€æ ·æ­£ç¡®çš„ä¼ é€’props</p> <ul><li>å®‰è£… yarn add prop-types</li> <li>å¯¼å…¥ PropTypes</li> <li>ç»™NavHeaderç»„ä»¶çš„ children å’Œ onLeftClickæ·»åŠ propsæ ¡éªŒ</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import PropTypes from 'prop-types'
NavHeader.propTypes = {
    children: PropTypes.string.isRequired,
    onLeftClick:PropTypes.func
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="åŸå¸‚é€‰æ‹©é¡µé¢ä½¿ç”¨navheaderç»„ä»¶"><a href="#åŸå¸‚é€‰æ‹©é¡µé¢ä½¿ç”¨navheaderç»„ä»¶" class="header-anchor">#</a> åŸå¸‚é€‰æ‹©é¡µé¢ä½¿ç”¨NavHeaderç»„ä»¶</h4> <ul><li>åœ¨CityList.jsæ–‡ä»¶ä¸­ï¼Œå¼•å…¥ NavHeaderç»„ä»¶</li> <li>æŠŠä¹‹å‰NavBarç»„ä»¶å»æ‰ï¼Œä½¿ç”¨æˆ‘ä»¬å°è£…å¥½çš„NavHeaderç»„ä»¶å°±å¥½</li></ul> <h3 id="ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜"><a href="#ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜" class="header-anchor">#</a> ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜</h3> <h4 id="ç›®æ ‡-4"><a href="#ç›®æ ‡-4" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿåˆ©ç”¨CSS Modulesè§£å†³ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–çš„é—®é¢˜</li></ul> <h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="header-anchor">#</a> æ¦‚å¿µ</h4> <ul><li>é—®é¢˜ï¼šCityListç»„ä»¶çš„æ ·å¼ï¼Œä¼šå½±å“Mapç»„ä»¶çš„æ ·å¼</li> <li>åŸå› ï¼šåœ¨é…ç½®è·¯ç”±çš„æ—¶å€™ï¼ŒCityListç»„ä»¶ä¸Mapç»„ä»¶éƒ½ä¼šè¢«å¯¼å…¥åˆ°è·¯ç”±ä¸­ï¼Œé‚£ä¹ˆåªè¦ç»„ä»¶è¢«å¯¼å…¥ï¼Œé‚£ä¹ˆç›¸å…³çš„æ ·å¼ä¹Ÿä¼šè¢«å¯¼å…¥è¿›æ¥ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„æ ·å¼åç§°ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šå½±å“å¦å¤–ä¸€ä¸ªç»„ä»¶çš„æ ·å¼</li> <li>å°ç»“ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦å¯¼å…¥äº†ç»„ä»¶ï¼Œä¸ç®¡ç»„ä»¶æœ‰æ²¡æœ‰æ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œç»„ä»¶çš„æ ·å¼å°±ä¼šç”Ÿæ•ˆ</li> <li>è§£å†³æ–¹å¼
<ul><li>å†™ä¸åŒçš„ç±»å</li> <li>CSS IN JS</li></ul></li></ul> <h4 id="css-in-js"><a href="#css-in-js" class="header-anchor">#</a> CSS IN JS</h4> <p>CSS IN JS æ˜¯ä½¿ç”¨JavaScript ç¼–å†™ CSS çš„ç»Ÿç§°ï¼Œç”¨æ¥è§£å†³CSSæ ·å¼å†²çªï¼Œè¦†ç›–ç­‰é—®é¢˜ï¼›</p> <p>CSS IN JS çš„å…·ä½“å®ç°æœ‰50å¤šç§ï¼Œæ¯”å¦‚ï¼šCSS Modulesã€styled-componentsç­‰</p> <p>æ¨èä½¿ç”¨ï¼šCSS Modulesï¼ˆReactè„šæ‰‹æ¶å·²ç»é›†æˆè¿›æ¥äº†ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼‰</p> <h3 id="css-modules"><a href="#css-modules" class="header-anchor">#</a> CSS Modules</h3> <h4 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="header-anchor">#</a> æ¦‚å¿µ</h4> <ul><li>CSS Modules é€šè¿‡å¯¹CSSç±»åé‡å‘½åï¼Œä¿è¯æ¯ä¸€ä¸ªç±»åçš„å”¯ä¸€æ€§ï¼Œä»è€Œé¿å…æ ·å¼å†²çªé—®é¢˜</li> <li>å®ç°æ–¹å¼ï¼šwebpackçš„css-loader æ’ä»¶</li> <li>å‘½åé‡‡ç”¨ï¼šBEMï¼ˆBlockå—ã€Elementå…ƒç´ ã€Modifierä¸‰éƒ¨åˆ†ç»„æˆï¼‰å‘½åè§„èŒƒã€‚æ¯”å¦‚ï¼š .list_item_active</li> <li>åœ¨Reactè„šæ‰‹æ¶ä¸­æ¼”åŒ–æˆï¼šæ–‡ä»¶åã€ç±»åã€hashï¼ˆéšæœºï¼‰ä¸‰éƒ¨åˆ†ï¼Œåªéœ€è¦æŒ‡å®šç±»åå³å¯</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185701950.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-YOnp9OOs-1575111367700)(images/css-modules.png)]"></p> <h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨</h4> <ul><li>åˆ›å»ºåä¸º[name].module.css çš„æ ·å¼æ–‡ä»¶ï¼ˆReactè„šæ‰‹æ¶ä¸­çš„çº¦å®šï¼Œä¸æ™®é€šCSSåŒºåˆ†å¼€ï¼‰</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185720712.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-ir8rdO9w-1575111367701)(images/css-modulesä½¿ç”¨-01.png)]"></p> <ul><li>ç»„ä»¶ä¸­å¯¼å…¥æ ·å¼æ–‡ä»¶**ï¼ˆæ³¨æ„è¯­æ³•ï¼‰**</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185729660.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-7LVx5azQ-1575111367702)(images/css-modulesä½¿ç”¨-02.png)]"></p> <ul><li>é€šè¿‡styleså¯¹è±¡è®¿é—®å¯¹è±¡ä¸­çš„æ ·å¼åæ¥è®¾ç½®æ ·å¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185740722.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-BdfvL1jN-1575111367703)(images/css-modulesä½¿ç”¨-03.png)]"></p> <h3 id="ä½¿ç”¨css-modulesä¿®æ”¹-navheader-æ ·å¼"><a href="#ä½¿ç”¨css-modulesä¿®æ”¹-navheader-æ ·å¼" class="header-anchor">#</a> ä½¿ç”¨CSS Modulesä¿®æ”¹ NavHeader æ ·å¼</h3> <ul><li><p>åœ¨NavHeaderç›®å½•ä¸­åˆ›å»º index.module.css çš„æ ·å¼æ–‡ä»¶</p></li> <li><p>åœ¨æ ·å¼æ–‡ä»¶ä¸­ä¿®æ”¹å½“å‰ç»„ä»¶çš„æ ·å¼</p></li> <li><p>å¯¹äºç»„ä»¶åº“ä¸­å·²ç»æœ‰çš„å…¨å±€æ ·å¼ï¼Œéœ€è¦ä½¿ç”¨ï¼šglobal() æ¥æŒ‡å®šï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬åœ¨ä¿®æ”¹NavBaré‡Œé¢æ–‡å­—é¢œè‰²çš„æ—¶å€™ï¼Œç”¨åˆ°äº†ä¸€ä¸ªç±»åå«ï¼š am-navbar-title è¿™ä¸ªç±»åä¸æ˜¯æˆ‘ä»¬è®¾ç½®çš„ï¼Œè€Œæ˜¯ç»„ä»¶åº“ä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸€ç±»ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·å»è®¾ç½®:</p></li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185750755.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-BXNT8gOO-1575111367705)(images/css-modulesä½¿ç”¨-04.png)]"></p> <p><strong>æˆ–è€…ï¼š</strong></p> <p><img src="https://img-blog.csdnimg.cn/20191130185758202.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-R3TcUJki-1575111367706)(images/css-modulesä½¿ç”¨-05.png)]"></p> <p>ç¤ºä¾‹demo</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.navbar</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f5f6<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.navbar :global(.am-navbar-title)</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åœ¨mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼"><a href="#åœ¨mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼" class="header-anchor">#</a> åœ¨Mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼</h3> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.map</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.map :global(.am-navbar)</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> -45px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>é¡µé¢ç»“æ„</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className={styles.map}&gt;
    &lt;NavHeader&gt;
        åœ°å›¾æ‰¾æˆ¿
    &lt;/NavHeader&gt;
    &lt;div id='container' className={styles.container}&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day05"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day05" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day05</h2> <p>-æ ¹æ®å®šä½å±•ç¤ºå¯¹åº”åŸå¸‚&amp;åœ°å›¾æ‰¾æˆ¿æ¨¡å—å°è£…&amp;loadingç¾åŒ–</p> <h3 id="åœ°å›¾æ‰¾æˆ¿æ¨¡å—-2"><a href="#åœ°å›¾æ‰¾æˆ¿æ¨¡å—-2" class="header-anchor">#</a> åœ°å›¾æ‰¾æˆ¿æ¨¡å—</h3> <h4 id="ç›®æ ‡-5"><a href="#ç›®æ ‡-5" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>å®Œæˆæ ¹æ®å®šä½å±•ç¤ºå½“å‰åŸå¸‚</li> <li>èƒ½å¤Ÿå®Œæˆåœ¨åœ°å›¾ä¸Šæ¸²æŸ“å‡ºæ–‡æœ¬è¦†ç›–ç‰©</li> <li>èƒ½å¤Ÿå¯¹æ–‡æœ¬è¦†ç›–ç‰©è¿›è¡Œå†…å®¹å’Œæ ·å¼ä¿®æ”¹</li> <li>èƒ½å¤Ÿè¯´å‡ºåœ°å›¾æ‰¾æˆ¿åŠŸèƒ½çš„ä¸šåŠ¡é€»è¾‘</li> <li>ç†è§£åœ°å›¾æ‰¾æˆ¿çš„å°è£…æµç¨‹ï¼ŒçŸ¥é“æ¯ä¸€ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li> <li>èƒ½å¤Ÿå‚ç…§è€å¸ˆä»£ç æ•²å‡ºåœ°å›¾æ‰¾æˆ¿çš„å°è£…ä»£ç </li> <li>èƒ½å¤Ÿä½¿ç”¨Toastçš„loadingæ•ˆæœæ¥å¯¹é¡µé¢è¿›è¡Œä¼˜åŒ–</li></ul> <h4 id="æ ¹æ®å®šä½å±•ç¤ºå½“å‰åŸå¸‚-â˜…â˜…â˜…"><a href="#æ ¹æ®å®šä½å±•ç¤ºå½“å‰åŸå¸‚-â˜…â˜…â˜…" class="header-anchor">#</a> æ ¹æ®å®šä½å±•ç¤ºå½“å‰åŸå¸‚ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>è·å–å½“å‰å®šä½åŸå¸‚</li> <li>ä½¿ç”¨ åœ°å€è§£æå™¨ è§£æå½“å‰åŸå¸‚åæ ‡</li> <li>è°ƒç”¨ centerAndZoom() æ–¹æ³•åœ¨åœ°å›¾ä¸­å±•ç¤ºå½“å‰åŸå¸‚ï¼Œå¹¶è®¾ç½®ç¼©æ”¾çº§åˆ«ä¸º11</li> <li>åœ¨åœ°å›¾ä¸­æ·»åŠ æ¯”ä¾‹å°ºå’Œå¹³ç§»ç¼©æ”¾æ§ä»¶</li></ul> <h4 id="å®ç°æˆ¿æºä¿¡æ¯å­åœ°å›¾ä¸­å±•ç¤º-â˜…â˜…â˜…"><a href="#å®ç°æˆ¿æºä¿¡æ¯å­åœ°å›¾ä¸­å±•ç¤º-â˜…â˜…â˜…" class="header-anchor">#</a> å®ç°æˆ¿æºä¿¡æ¯å­åœ°å›¾ä¸­å±•ç¤ºï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <p><img src="https://img-blog.csdnimg.cn/20191130185907235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-W4dXpdpn-1575111505661)(images/æˆ¿æºè¦†ç›–ç‰©.png)]"></p> <p>è¿™äº›æˆ¿æºä¿¡æ¯å…¶å®å°±æ˜¯ç”¨æ–‡æœ¬è¦†ç›–ç‰©æ¥å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæŸ¥çœ‹ç™¾åº¦å¼€å‘æ–‡æ¡£ï¼Œå…ˆåˆ›å»ºæ–‡æœ¬è¦†ç›–ç‰©</p> <h4 id="åˆ›å»ºæ–‡æœ¬è¦†ç›–ç‰©"><a href="#åˆ›å»ºæ–‡æœ¬è¦†ç›–ç‰©" class="header-anchor">#</a> åˆ›å»ºæ–‡æœ¬è¦†ç›–ç‰©</h4> <ul><li>åˆ›å»ºLabel ç¤ºä¾‹å¯¹è±¡</li> <li>æ‰ç”¨setStyle() æ–¹æ³•è®¾ç½®æ ·å¼</li> <li>åœ¨mapå¯¹è±¡ä¸Šè°ƒç”¨ addOverlay() æ–¹æ³•ï¼Œè®²æ–‡æœ¬è¦†ç›–ç‰©æ·»åŠ åˆ°åœ°å›¾ä¸­</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185922106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-yhohHXEg-1575111505662)(images/åˆ›å»ºæ–‡æœ¬è¦†ç›–ç‰©.png)]"></p> <h4 id="ç»˜åˆ¶æˆ¿æºè¦†ç›–ç‰©"><a href="#ç»˜åˆ¶æˆ¿æºè¦†ç›–ç‰©" class="header-anchor">#</a> ç»˜åˆ¶æˆ¿æºè¦†ç›–ç‰©</h4> <ul><li>ç”±äºé»˜è®¤æä¾›çš„æœ¬æ–‡è¦†ç›–ç‰©ä¸æˆ‘ä»¬æ•ˆæœä¸ç¬¦åˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œé‡æ–°çš„ç»˜åˆ¶</li> <li>è°ƒç”¨Labelçš„ setContentæ–¹æ³•ï¼Œä¼ å…¥htmlç»“æ„ï¼Œä¿®æ”¹HTMLçš„å†…å®¹æ ·å¼;æ³¨æ„ï¼šè°ƒç”¨äº†setContent é‚£ä¹ˆé‡Œé¢æ–‡æœ¬çš„å†…å®¹å°±å¤±æ•ˆäº†</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185939481.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-zPLrUOjx-1575111505663)(images/ç»˜åˆ¶è¦†ç›–ç‰©.png)]"></p> <ul><li>è°ƒç”¨setStyleæ–¹æ³•ä¿®æ”¹è¦†ç›–ç‰©æ ·å¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130185951403.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-nxnvNVFc-1575111505666)(images/ç»˜åˆ¶è¦†ç›–ç‰©-02.png)]"></p> <ul><li>ç»™è¦†ç›–ç‰©æ·»åŠ ç‚¹å‡»äº‹ä»¶</li></ul> <p><img src="https://img-blog.csdnimg.cn/2019113018595856.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-ErNU0fZo-1575111505669)(images/ç»˜åˆ¶è¦†ç›–ç‰©-03.png)]"></p> <ul><li>è¦†ç›–çš„å†…å®¹ç»“æ„</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div class=&quot;${styles.bubble}&quot;&gt;
  &lt;p class=&quot;${styles.name}&quot;&gt;${name}&lt;/p&gt;
  &lt;p&gt;${num}å¥—&lt;/p&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>è¦†ç›–ç‰©çš„æ ·å¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const labelStyle = {
    cursor: 'pointer',
    border: '0px solid rgb(255,0,0)',
    padding: '0px',
    whiteSpace: 'nowrap',
    fontSize: '12px',
    color: 'rbg(255,255,255)',
    textAlign: 'center'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æ-â˜…â˜…â˜…"><a href="#åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æ-â˜…â˜…â˜…" class="header-anchor">#</a> åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>è·å–æˆ¿æºæ•°æ®ï¼Œæ¸²æŸ“è¦†ç›–ç‰©</li> <li>ç‚¹å‡»è¦†ç›–ç‰©ï¼š
<ul><li>æ”¾å¤§åœ°å›¾</li> <li>è·å–æ•°æ®ï¼Œæ¸²æŸ“ä¸‹ä¸€çº§è¦†ç›–ç‰©</li></ul></li> <li>åŒºã€é•‡è¦†ç›–ç‰©çš„ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œæ¸…é™¤ç°æœ‰çš„è¦†ç›–ç‰©ï¼Œè·å–ä¸‹ä¸€çº§æ•°æ®ï¼Œåˆ›å»ºæ–°çš„è¦†ç›–ç‰©</li> <li>å°åŒºï¼šä¸æ¸…æ¥šè¦†ç›–ç‰©ï¼Œç§»åŠ¨åœ°å›¾ï¼Œå±•ç¤ºè¯¥å°åŒºä¸‹çš„æˆ¿æºä¿¡æ¯</li></ul> <h4 id="è·å–æ‰€æœ‰åŒºçš„ä¿¡æ¯"><a href="#è·å–æ‰€æœ‰åŒºçš„ä¿¡æ¯" class="header-anchor">#</a> è·å–æ‰€æœ‰åŒºçš„ä¿¡æ¯</h4> <ul><li>å‘é€è¯·æ±‚è·å–æˆ¿æºæ•°æ®</li> <li>éå†æ•°æ®ï¼Œåˆ›å»ºè¦†ç›–ç‰©ï¼Œç»™æ¯ä¸€ä¸ªè¦†ç›–ç‰©æ·»åŠ å”¯ä¸€æ ‡è¯†</li> <li>ç»™è¦†ç›–ç‰©æ·»åŠ ç‚¹å‡»äº‹ä»¶</li> <li>åœ¨å•å‡»äº‹ä»¶ä¸­ï¼Œè·å–åˆ°å½“å‰å•å‡»é¡¹çš„å”¯ä¸€æ ‡è¯†</li> <li>æ”¾å¤§åœ°å›¾ï¼ˆçº§åˆ«ä¸º13ï¼‰ï¼Œè°ƒç”¨clearOverlays()æ–¹æ³•æ¸…é™¤å½“å‰è¦†ç›–ç‰©</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// è¯·æ±‚æ¥å£ï¼Œè·å–æˆ¿æºæ•°æ®
let res = await axios.get(`http://localhost:8080/area/map?id=${value}`)
// éå†æˆ¿æºä¿¡æ¯ï¼Œåˆ›å»ºå¯¹åº”çš„è¦†ç›–ç‰©
res.data.body.map(item =&gt; {
    // ç»™æ¯ä¸€æ¡æ•°æ®æ·»åŠ è¦†ç›–ç‰©
    // å¾—åˆ°è¿”å›çš„ç»çº¬åº¦ä¿¡æ¯
    let { coord: { longitude, latitude }, label: areaName, count, value } = item
    // åˆ›å»ºè¦†ç›–ç‰©
    let label = new window.BMap.Label('', {
        position: new window.BMap.Point(longitude, latitude),
        offset: new window.BMap.Size(-35, -35)
    })
    // è®¾ç½®è¦†ç›–ç‰©å†…å®¹
    label.setContent(`&lt;div class=&quot;${styles.bubble}&quot;&gt;
    &lt;p class=&quot;${styles.name}&quot;&gt;${areaName}&lt;/p&gt;
    &lt;p&gt;${count}å¥—&lt;/p&gt;
  &lt;/div&gt;`)
    // è®¾ç½®æ ·å¼
    label.setStyle(labelStyle)
    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
    label.addEventListener('click', function () {
        // å½“ç‚¹å‡»äº†è¦†ç›–ç‰©ï¼Œè¦ä»¥å½“å‰ç‚¹å‡»çš„è¦†ç›–ç‰©ä¸ºä¸­å¿ƒæ¥æ”¾å¤§åœ°å›¾
        map.centerAndZoom(this.K.position, 13);
        // è§£å†³æ¸…é™¤è¦†ç›–ç‰©çš„æ—¶å€™ï¼Œç™¾åº¦åœ°å›¾jsæŠ¥é”™é—®é¢˜
        setTimeout(function () {
            map.clearOverlays()
        }, 0)
    })
    // ç»™labelæ·»åŠ å”¯ä¸€æ ‡è¯†
    label.id = value
    // æ·»åŠ åˆ°åœ°å›¾ä¸Š
    map.addOverlay(label)
})

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>å°è£…æµç¨‹ï¼ˆâ˜…â˜…ï¼‰</p> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰å®Œæˆåœ°å›¾æ‰¾æˆ¿çš„ä¸€ç¯ï¼Œä¹Ÿå°±æ˜¯è·å–äº†åŒºçš„æˆ¿æºä¿¡æ¯ï¼Œç„¶åå¯ä»¥ç‚¹å‡»å¯¹åº”åŒºçš„æˆ¿æºï¼Œæ¸…é™¤åœ°å›¾ä¸Šçš„è¦†ç›–ç‰©ï¼Œè€Œæˆ‘ä»¬å†å®ç°é•‡çš„æ—¶å€™ä¹Ÿæ˜¯ç›¸åŒçš„é€»è¾‘ï¼Œï¼Œå®ç°å°åŒºçš„æ—¶å€™ï¼Œé€»è¾‘æµç¨‹ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹æ­¤è¿›è¡Œä¸€å±‚å°è£…ï¼Œæé«˜ä»£ç å¤ç”¨æ€§</p> <p><img src="https://img-blog.csdnimg.cn/20191130190023110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-nQdgjbX6-1575111505670)(images/å°è£…æµç¨‹.png)]"></p> <ul><li><p>renderOverlays() ä½œä¸ºå…¥å£</p> <ul><li>æ¥æ”¶åŒºåŸŸidå‚æ•°ï¼Œè·å–è¯¥åŒºåŸŸä¸‹çš„æˆ¿æºæ•°æ®</li> <li>è·è¦†ç›–ç‰©ç±»å‹ä»¥åŠä¸‹çº§åœ°å›¾ç¼©æ”¾çº§åˆ«</li></ul></li> <li><p>createOverlays() æ–¹æ³•</p> <ul><li>æ ¹æ®ä¼ å…¥çš„ç±»å‹ï¼Œè°ƒç”¨å¯¹åº”æ–¹æ³•ï¼Œåˆ›å»ºè¦†ç›–ç‰©ï¼Œåˆ°åº•æ˜¯åˆ›å»ºåŒºé•‡çš„è¦†ç›–ç‰©è¿˜æ˜¯å°åŒºè¦†ç›–ç‰©</li></ul></li> <li><p>createCircle() æ–¹æ³•</p> <ul><li>æ ¹æ®ä¼ å…¥çš„æ•°æ®åˆ›å»ºè¦†ç›–ç‰©ï¼Œç»‘å®šäº‹ä»¶ï¼ˆæ”¾å¤§åœ°å›¾ï¼Œæ¸…é™¤è¦†ç›–ç‰©ï¼Œæ¸²æŸ“ä¸‹ä¸€çº§æˆ¿æºæ•°æ®ï¼‰</li></ul></li> <li><p>createReact() æ–¹æ³•</p> <ul><li>æ ¹æ®ä¼ å…¥çš„æ•°æ®åˆ›å»ºè¦†ç›–ç‰©ï¼Œç»‘å®šäº‹ä»¶ï¼ˆç§»åŠ¨åœ°å›¾ï¼Œæ¸²æŸ“æˆ¿æºåˆ—è¡¨ï¼‰</li></ul></li></ul> <h4 id="renderoverlays-æ–¹æ³•çš„å°è£…"><a href="#renderoverlays-æ–¹æ³•çš„å°è£…" class="header-anchor">#</a> renderOverlays æ–¹æ³•çš„å°è£…</h4> <ul><li>è¿™ä¸ªæ–¹æ³•æ˜¯æ•´ä¸ªå°è£…çš„å…¥å£</li> <li>åœ¨è¿™ä¸ªæ–¹æ³•éœ€è¦ æ¥æ”¶åŒºåŸŸid ï¼Œè·å–å¯¹åº”çš„æˆ¿æºæ•°æ®</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190048445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Nk5Bw0nT-1575111505673)(images/renderOverlays-01.png)]"></p> <ul><li>è°ƒç”¨ getTypeAndZoom æ–¹æ³•è·å–åœ°å›¾ç¼©æ”¾çº§åˆ«ï¼Œè¦†ç›–ç‰©ç±»åˆ«</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190054781.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-juN8Ja7z-1575111505677)(images/renderOverlays-02.png)]"></p> <p>ç¤ºä¾‹demo</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>/** 
* æ ¹æ®idè·å–å¯¹åº”çš„æˆ¿æºä¿¡æ¯
*/
async renderOverlays(id) {
    // è¯·æ±‚ï¼Œæ‹¿åˆ°å¯¹åº”æˆ¿æºæ•°æ®
    let res = await axios.get(`http://localhost:8080/area/map?id=${id}`)
    let data = res.data.body

    let {type,nextZoom} = this.getTypeAndZoom()

    // éå†ï¼Œè°ƒç”¨createOverlays,åˆ›å»ºè¦†ç›–ç‰©
    data.map(item =&gt; {
        this.createOverlays(item,type,nextZoom)
    })
}
/**
 * è·å–å¯¹åº”è¦ç»˜åˆ¶çš„ç±»å‹å’Œç¼©æ”¾çš„æ¯”ä¾‹
 */
getTypeAndZoom() {
    // è·å–å½“å‰åœ°å›¾ç¼©æ”¾çº§åˆ«
    let zoom = this.map.getZoom()
    let nextZoom, type;
    if (zoom &gt;= 10 &amp;&amp; zoom &lt; 12) {
        nextZoom = 13;
        // circle è¡¨ç¤ºç»˜åˆ¶åœ†å½¢çš„è¦†ç›–ç‰©ï¼ŒåŒº
        type = &quot;circle&quot;
    } else if (zoom &gt;= 12 &amp;&amp; zoom &lt; 14) {
        nextZoom = 15
        // circle è¡¨ç¤ºç»˜åˆ¶åœ†å½¢çš„è¦†ç›–ç‰©ï¼Œé•‡
        type = &quot;circle&quot;
    } else if (zoom &gt;= 14 &amp;&amp; zoom &lt; 16) {
        // circle è¡¨ç¤ºç»˜åˆ¶çŸ©å½¢çš„è¦†ç›–ç‰©ï¼Œå°åŒº
        type = &quot;rect&quot;
    }
    return { nextZoom, type }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h4 id="createoverlays-æ–¹æ³•çš„å°è£…"><a href="#createoverlays-æ–¹æ³•çš„å°è£…" class="header-anchor">#</a> createOverlays æ–¹æ³•çš„å°è£…</h4> <ul><li>è¿™ä¸ªæ–¹æ³•æ²¡æœ‰å¤ªå¤šçš„é€»è¾‘ï¼Œä¸»è¦æ˜¯é€»è¾‘åˆ¤æ–­ï¼Œç„¶åæ ¹æ®ä¸åŒæ¡ä»¶è°ƒç”¨ä¸åŒæ¸²æŸ“çš„æ–¹æ³•</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190126458.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-s5OOOOrC-1575111505679)(images/createOverlays.png)]"></p> <p>ç¤ºä¾‹demo</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>/**
 * ç»˜åˆ¶è¦†ç›–ç‰©çš„æ–¹æ³•ï¼Œæ ¹æ®typeæ¥åˆ¤æ–­ç»˜åˆ¶çš„æ˜¯åœ†å½¢è¿˜æ˜¯çŸ©å½¢
 */
createOverlays(item, type, nextZoom) {
    let { coord: { longitude, latitude }, label: areaName, count, value } = item
    let point = new window.BMap.Point(longitude, latitude)
    // åˆ¤æ–­éœ€è¦æ¸²æŸ“çš„æ˜¯å“ªç§ç±»å‹
    if (type === 'circle') {
        // åŒº æˆ–è€… é•‡
        this.createCircle(point, areaName, count, value, nextZoom)
    } else if (type === 'rect') {
        // å°åŒº
        this.createRect(point, areaName, count, value)
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="createcircle-æ–¹æ³•çš„å°è£…"><a href="#createcircle-æ–¹æ³•çš„å°è£…" class="header-anchor">#</a> createCircle æ–¹æ³•çš„å°è£…</h4> <ul><li>å¤ç”¨ä¹‹å‰çš„åˆ›å»ºè¦†ç›–ç‰©çš„ä»£ç é€»è¾‘</li> <li>åœ¨è¦†ç›–ç‰©çš„å•å‡»äº‹ä»¶ä¸­ï¼Œè°ƒç”¨ renderOverlays(id)æ–¹æ³•ï¼Œé‡æ–°æ¸²æŸ“è¯¥åŒºåŸŸçš„æˆ¿å±‹æ•°æ®</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190144726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-OBVIpaUv-1575111505681)(images/createCircle.png)]"></p> <h4 id="createrect-æ–¹æ³•çš„å°è£…"><a href="#createrect-æ–¹æ³•çš„å°è£…" class="header-anchor">#</a> createRect æ–¹æ³•çš„å°è£…</h4> <ul><li>åˆ›å»ºLabelã€è®¾ç½® æ ·å¼ã€è®¾ç½®htmlå†…å®¹ï¼Œç»‘å®šäº‹ä»¶</li> <li>åœ¨å•å‡»äº‹ä»¶ä¸­ï¼Œè·å–å°åŒºä¸‹çš„æ‰€æœ‰æˆ¿æºæ•°æ®</li> <li>å±•ç¤ºæˆ¿æºåˆ—è¡¨</li> <li>æ¸²æŸ“è·å–åˆ°çš„æˆ¿æºåˆ—è¡¨</li></ul> <p>æˆ¿æºåˆ—è¡¨ç›¸å…³æ ·å¼ï¼š</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* æˆ¿æºåˆ—è¡¨æ ·å¼ï¼š */</span>

<span class="token selector">.houseList</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 330px<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 330px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.show</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.titleWrap</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #c0c0c2<span class="token punctuation">;</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #c8c8c8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.listTitle</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 43px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #1e1e1e<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.titleMore</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
    <span class="token property">padding-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 43px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #1e1e1e<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.titleMore:visited</span> <span class="token punctuation">{</span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/* æˆ¿å±‹åˆ—è¡¨é¡¹æ ·å¼ */</span>

<span class="token selector">.houseItems</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>æˆ¿å±‹åˆ—è¡¨æ ·å¼</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* æˆ¿å±‹åˆ—è¡¨é¡¹æ ·å¼ */</span>

<span class="token selector">.houseItems</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.house</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #e5e5e5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.imgWrap</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 106px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 106px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #394043<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.desc</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #afb2b3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.price</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fa5741<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.priceNum</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bolder<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tag</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 4px 5px<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tag1</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #39becd<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #e1f5f8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tag2</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #3fc28c<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #e1f5ed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tag3</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #5aabfd<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #e6f2ff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><p>ç¤ºä¾‹demo</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// createRecté€»è¾‘ä»£ç 

/**
 * ç»˜åˆ¶çŸ©å½¢
 * @param {*} point å½“å‰æˆ¿æºåæ ‡
 * @param {*} areaName  åç§°
 * @param {*} count  æ•°é‡
 * @param {*} value  id 
 */

createRect(point, areaName, count, value) {
    // åˆ›å»ºè¦†ç›–ç‰©
    let label = new window.BMap.Label('', {
        position: point,
        offset: new window.BMap.Size(-50, -28)
    })
    // è®¾ç½®å†…å®¹
    label.setContent(`
    &lt;div class=&quot;${styles.rect}&quot;&gt;
       &lt;span class=&quot;${styles.housename}&quot;&gt;${areaName}&lt;/span&gt;
       &lt;span class=&quot;${styles.housenum}&quot;&gt;${count}å¥—&lt;/span&gt;
       &lt;i class=&quot;${styles.arrow}&quot;&gt;&lt;/i&gt;
    &lt;/div&gt;
    `)
    // è®¾ç½®æ ·å¼
    label.setStyle(labelStyle)
    label.id = value
    label.addEventListener('click', () =&gt; {
        this.getHouseList(value)
    })
    // æ·»åŠ åˆ°åœ°å›¾ä¸­
    this.map.addOverlay(label)
}
async getHouseList(id) {
    let res = await axios.get('http://localhost:8080/houses?cityId=' + id)
    this.setState({
        housesList: res.data.body.list,
        isShowList: true
    })
}
//ç»“æ„
{/* æˆ¿æºåˆ—è¡¨ */}
{/* æ·»åŠ  styles.show å±•ç¤ºæˆ¿å±‹åˆ—è¡¨ */}
    &lt;div
        className={[
            styles.houseList,
            this.state.isShowList ? styles.show : ''
        ].join(' ')}
    &gt;
        &lt;div className={styles.titleWrap}&gt;
            &lt;h1 className={styles.listTitle}&gt;æˆ¿å±‹åˆ—è¡¨&lt;/h1&gt;
            &lt;Link className={styles.titleMore} to=&quot;/home/list&quot;&gt;
                æ›´å¤šæˆ¿æº&lt;/Link&gt;
        &lt;/div&gt;
        &lt;div className={styles.houseItems}&gt;
            {/* æˆ¿å±‹ç»“æ„ */}
            {this.renderHousesList()}
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
// æ¸²æŸ“æˆ¿å±‹åˆ—è¡¨çš„itemæ–¹æ³•
/**
 * æ¸²æŸ“æˆ¿æºåˆ—è¡¨
 */
renderHousesList() {
    return this.state.housesList.map(item =&gt; (
        &lt;div className={styles.house}&gt;
            &lt;div className={styles.imgWrap}&gt;
                &lt;img className={styles.img} src={`http://localhost:8080${item.houseImg}`} alt=&quot;&quot; /&gt;
            &lt;/div&gt;
            &lt;div className={styles.content}&gt;
                &lt;h3 className={styles.title}&gt;{item.title}&lt;/h3&gt;
                &lt;div className={styles.desc}&gt;{item.desc}&lt;/div&gt;
                &lt;div&gt;
                    {/* ['è¿‘åœ°é“', 'éšæ—¶çœ‹æˆ¿'] */}
                    {item.tags.map((tag, index) =&gt; {
                        const tagClass = 'tag' + (index + 1)
                        return (
                            &lt;span
                                className={[styles.tag, styles[tagClass]].join(' ')}
                                key={tag}
                            &gt;
                                {tag}
                            &lt;/span&gt;
                        )
                    })}
                &lt;/div&gt;
                &lt;div className={styles.price}&gt;
                    &lt;span className={styles.priceNum}&gt;{item.price}&lt;/span&gt; å…ƒ/æœˆ
    &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    )
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><ul><li>ä½¿ç”¨åœ°å›¾çš„ panBy() æ–¹æ³•ï¼Œç§»åŠ¨åœ°å›¾åˆ°ä¸­é—´ä½ç½®</li> <li>å‚ç›´ä½ç§»ï¼š(window.innerHeightï¼ˆå±å¹•é«˜åº¦ï¼‰-330ï¼ˆæˆ¿æºåˆ—è¡¨é«˜åº¦ï¼‰/2ï¼‰ - target.clientYï¼ˆç›®æ ‡è¦†ç›–å±‚çš„ä½ç½®ï¼‰</li> <li>æ°´å¹³ä½ç§»ï¼šwindow.innerWidthï¼ˆå±å¹•å®½åº¦ï¼‰/2 - target.clientX</li> <li>ç§»åŠ¨åœ°å›¾çš„æ—¶å€™ï¼ˆç›‘å¬movestartäº‹ä»¶ï¼‰ï¼Œéšè—æˆ¿æºåˆ—è¡¨</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190225255.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-kvH64xBb-1575111505684)(images/åœ°å›¾ç§»åŠ¨.png)]"></p> <h3 id="æ·»åŠ loadingæ•ˆæœ-â˜…â˜…â˜…"><a href="#æ·»åŠ loadingæ•ˆæœ-â˜…â˜…â˜…" class="header-anchor">#</a> æ·»åŠ Loadingæ•ˆæœï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>åˆ©ç”¨Toastçš„loadingæ–¹æ³•æ¥å®ç°</li> <li>åœ¨æ¯æ¬¡è¯·æ±‚å¼€å§‹çš„æ—¶å€™å¼€å¯loading Toast.loading(â€˜åŠ è½½ä¸­ã€‚ã€‚ã€‚â€™, 0, null, false)</li> <li>åœ¨è¯·æ±‚ç»“æŸåå…³é—­loading Toast.hide()</li></ul> <h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day06"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day06" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day06</h2> <p>-axioså°è£…&amp;å°è£…æœç´¢å¯¼èˆªæ ç»„ä»¶&amp;å®ç°ç­›é€‰åŠŸèƒ½</p> <h3 id="axiosä¼˜åŒ–-ç¯å¢ƒå˜é‡"><a href="#axiosä¼˜åŒ–-ç¯å¢ƒå˜é‡" class="header-anchor">#</a> <a href="https://so.csdn.net/so/search?from=pc_blog_highlight&amp;q=axios" target="_blank" rel="noopener noreferrer">axios<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä¼˜åŒ–&amp;ç¯å¢ƒå˜é‡</h3> <h4 id="ç›®æ ‡-6"><a href="#ç›®æ ‡-6" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿé€šè¿‡ axios.create() æ–¹æ³•æ¥æ„å»ºaxioså®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”é…ç½®baseURL</li> <li>èƒ½å¤ŸçŸ¥é“ .env.development å’Œ .env.production ä¸¤ä¸ªæ–‡ä»¶çš„ä½œç”¨</li> <li>èƒ½å¤Ÿé…ç½®å¼€å‘ç¯å¢ƒå˜é‡</li> <li>èƒ½å¤Ÿåœ¨ä»£ç ä¸­å¼•å…¥é…ç½®çš„ç¯å¢ƒå˜é‡çš„å€¼</li></ul> <p>æ¯ä¸€æ¬¡æˆ‘ä»¬è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡éƒ½éœ€è¦å†™ç›¸åŒçš„baseUrlã€‚ä¾‹å¦‚ï¼šhttp://localhost:8080ï¼Œè¿™æ ·å¤ªç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œä¼˜åŒ–ï¼Œæ¥å£åŸŸåã€å›¾ç‰‡åŸŸåã€åˆ†ä¸ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œç›´æ¥å†™åœ¨ä»£ç ä¸­ï¼Œé¡¹ç›®å‘å¸ƒæ—¶ï¼Œå¾ˆéš¾æ›¿æ¢</p> <h4 id="é…ç½®ç»Ÿä¸€çš„url-â˜…â˜…"><a href="#é…ç½®ç»Ÿä¸€çš„url-â˜…â˜…" class="header-anchor">#</a> é…ç½®ç»Ÿä¸€çš„URLï¼ˆâ˜…â˜…ï¼‰</h4> <div class="language-react line-numbers-mode"><pre class="language-text"><code>axios.defaults.baseURL = 'http://localhost:8080'
// æˆ–è€…
const instance = axios.create({
    baseURL: 'http://localhost:8080'
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="é…ç½®ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒ-â˜…â˜…â˜…"><a href="#é…ç½®ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒ-â˜…â˜…â˜…" class="header-anchor">#</a> é…ç½®ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// é€šè¿‡è„šæ‰‹æ¶çš„ç¯å¢ƒå˜é‡æ¥è§£å†³ å¼€å‘ç¯å¢ƒ
åœ¨å¼€å‘ç¯å¢ƒå˜é‡æ–‡ä»¶ .env.development ä¸­ï¼Œé…ç½® REACT_APP_URL= http://localhost:8080

// é€šè¿‡è„šæ‰‹æ¶çš„ç¯å¢ƒå˜é‡è§£å†³ï¼Œ ç”Ÿæˆç¯å¢ƒ
åœ¨ç”Ÿäº§ç¯å¢ƒå˜é‡æ–‡ä»¶ .env.production ä¸­ï¼Œé…ç½® REACT_APP_URL=çº¿ä¸Šæ¥å£åœ°å€

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ä½¿ç”¨ç¯å¢ƒå˜é‡-â˜…â˜…â˜…"><a href="#ä½¿ç”¨ç¯å¢ƒå˜é‡-â˜…â˜…â˜…" class="header-anchor">#</a> ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <p>åœ¨<a href="https://so.csdn.net/so/search?from=pc_blog_highlight&amp;q=react" target="_blank" rel="noopener noreferrer">react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å®˜ç½‘ä¸­ï¼Œæœ‰è¯¦ç»†è¯´æ˜ç¯å¢ƒå˜é‡çš„é…ç½®</p> <p><img src="https://img-blog.csdnimg.cn/20191130190313364.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-6ugvaX4h-1575111776952)(images/ç¯å¢ƒå˜é‡.png)]"></p> <p>åœ¨é‡Œé¢ä¼šå‘ç°å¯¹åº”çš„æ–‡ä»¶è¿˜æœ‰ä¸ª .local åç¼€çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œä»¥ä¸‹å°±æ˜¯ä½ è¾“å…¥ä¸åŒå‘½ä»¤ï¼Œæ‰§è¡Œæ–‡ä»¶çš„ä¼˜å…ˆçº§</p> <p><img src="https://img-blog.csdnimg.cn/20191130190331568.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-crEAa03x-1575111776953)(images/ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§.png)]"></p> <ul><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ .env.development</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190345457.jpg" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-RdcFacOY-1575111776954)(images/ç¯å¢ƒå˜é‡é…ç½®-01.jpg)]"></p> <ul><li>åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ REACT_APP_URLï¼ˆæ³¨æ„ï¼šç¯å¢ƒå˜é‡çº¦å®šREACT_APP å¼€å¤´ï¼‰,è®¾ç½® REACT_APP_URL=http://localhost:8080</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>REACT_APP_URL =http://localhost:8080
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>é‡æ–°å¯åŠ¨è„šæ‰‹æ¶ï¼Œè„šæ‰‹æ¶åœ¨è¿è¡Œçš„æ—¶å€™å°±ä¼šè§£æè¿™ä¸ªæ–‡ä»¶</li> <li>åœ¨utils/url.js ä¸­ï¼Œåˆ›å»º BASE_URL å˜é‡ï¼Œè®¾ç½®å€¼ä¸º process.env.REACT_APP_URL</li> <li>å¯¼å‡ºBASE_URL</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// é…ç½®baseURL
export const BASE_URL = process.env.REACT_APP_URL

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>åœ¨æˆ‘ä»¬é¡µé¢å¼•å…¥å°±èƒ½ä½¿ç”¨äº†</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import {BASE_URL} from '../../utils/url.js'

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="axios-ä¼˜åŒ–-â˜…â˜…â˜…"><a href="#axios-ä¼˜åŒ–-â˜…â˜…â˜…" class="header-anchor">#</a> <a href="https://so.csdn.net/so/search?from=pc_blog_highlight&amp;q=axios" target="_blank" rel="noopener noreferrer">axios<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨utils/api.js ä¸­ï¼Œå¯¼å…¥ axioså’ŒBASE_URL</li> <li>è°ƒç”¨ axios.create() æ–¹æ³•åˆ›å»ºä¸€ä¸ªaxioså®ä¾‹</li> <li>ç»™ create æ–¹æ³•ï¼Œæ·»åŠ é…ç½®baseURLï¼Œå€¼ä¸º BASE_URL</li> <li>å¯¼å‡ºAPIå¯¹è±¡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import axios from 'axios'
import { BASE_URL } from './url.js'

// åˆ›å»ºaxiosçš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢é…ç½®baseURLè·¯å¾„
const config = {
    baseURL: BASE_URL
}

// æ ¹æ®create æ–¹æ³•æ¥æ„å»ºaxioså¯¹è±¡
const instance = axios.create(config)

export { instance }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>å¯¼å…¥APIï¼Œä»£æ›¿ä¹‹å‰ç›´æ¥åˆ©ç”¨axoisè¯·æ±‚çš„ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import {instance} from '../../utils/api.js'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½"><a href="#åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½</h3> <h4 id="ç›®æ ‡-7"><a href="#ç›®æ ‡-7" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>è¯´å‡ºæŠ½å–æœç´¢å¯¼èˆªæ çš„å¥½å¤„</li> <li>èƒ½å¤Ÿè¯´å‡ºæŠ½å–æœç´¢å¯¼èˆªæ çš„æ€è·¯ï¼Œå¹¶ä¸”å‚ç…§è€å¸ˆä»£ç èƒ½å¤Ÿå®ç°æŠ½å–åŠŸèƒ½</li> <li>èƒ½å¤Ÿè¯´å‡ºæ¡ä»¶ç­›é€‰åŠŸèƒ½çš„å¤§è‡´æ€è·¯ï¼ŒFilterç»„ä»¶ä½œç”¨ï¼ŒFilterTitleç»„ä»¶ä½œç”¨ï¼ŒFilterPickerç»„ä»¶ä½œç”¨ï¼ŒFilterFooterç»„ä»¶ä½œç”¨</li> <li>èƒ½å¤Ÿå‚ç…§è€å¸ˆä»£ç å®ç°FilterTitleç»„ä»¶ä¸­çš„é€»è¾‘ä»£ç </li> <li>èƒ½å¤Ÿå‚ç…§è€å¸ˆä»£ç å®ç°FilterPickerç»„ä»¶çš„é€»è¾‘ä»£ç </li></ul> <h4 id="åŠŸèƒ½åˆ†æ-2"><a href="#åŠŸèƒ½åˆ†æ-2" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>æœç´¢å¯¼èˆªæ ç»„ä»¶çš„å°è£…</li> <li>æ¡ä»¶ç­›é€‰æ ç»„ä»¶å°è£…</li> <li>æ¡ä»¶ç­›é€‰æ å¸é¡¶åŠŸèƒ½</li> <li>æˆ¿å±‹åˆ—è¡¨</li></ul> <h3 id="é¡¶éƒ¨æœç´¢å¯¼èˆªæ "><a href="#é¡¶éƒ¨æœç´¢å¯¼èˆªæ " class="header-anchor">#</a> é¡¶éƒ¨æœç´¢å¯¼èˆªæ </h3> <h4 id="å°è£…æœç´¢å¯¼èˆªæ ç»„ä»¶-â˜…â˜…â˜…"><a href="#å°è£…æœç´¢å¯¼èˆªæ ç»„ä»¶-â˜…â˜…â˜…" class="header-anchor">#</a> å°è£…æœç´¢å¯¼èˆªæ ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨components ç›®å½•ä¸­åˆ›å»ºç»„ä»¶ SearchHeader/index.js</li> <li>æŠŠä¹‹å‰å†™è¿‡çš„ç»“æ„æ‹·è´åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­</li> <li>ç„¶åæŠŠè·Ÿé¦–é¡µç›¸å…³çš„æ•°æ®å»æ‰ï¼Œæ ‡é¢˜ï¼ŒåŸå¸‚åç§°</li> <li>é€šè¿‡propsæ¥è¿›è¡Œä¼ é€’</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import { Flex } from 'antd-mobile';
import React from 'react'
import {withRouter} from 'react-router-dom'
import './index.scss'
import PropTypes from 'prop-types'

function SearchHeader({ history, cityName}) {
    return (
        &lt;Flex className='search-box'&gt;
            {/* å·¦ä¾§ç™½è‰²åŒºåŸŸ */}
            &lt;Flex className=&quot;search&quot;&gt;
                {/* ä½ç½® */}
                &lt;div className=&quot;location&quot; onClick={() =&gt; history.push('/citylist')}&gt;
                    &lt;span className=&quot;name&quot;&gt;{cityName}&lt;/span&gt;
                    &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
                &lt;/div&gt;

                {/* æœç´¢è¡¨å• */}
                &lt;div className=&quot;form&quot; onClick={() =&gt; history.push('/search')}&gt;
                    &lt;i className=&quot;iconfont icon-seach&quot; /&gt;
                    &lt;span className=&quot;text&quot;&gt;è¯·è¾“å…¥å°åŒºæˆ–åœ°å€&lt;/span&gt;
                &lt;/div&gt;
            &lt;/Flex&gt;
            {/* å³ä¾§åœ°å›¾å›¾æ ‡ */}
            &lt;i className=&quot;iconfont icon-map&quot; onClick={() =&gt; history.push('/map')} /&gt;
        &lt;/Flex&gt;
    )
}
// è®¾ç½®æ ¡éªŒ
SearchHeader.propTypes = {
    cityName: PropTypes.string.isRequired
}
export default withRouter(SearchHeader)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="æŠŠæœç´¢å¯¼èˆªæ å¼•å…¥åˆ°houselistä¸­-è°ƒæ•´ç›¸åº”æ ·å¼"><a href="#æŠŠæœç´¢å¯¼èˆªæ å¼•å…¥åˆ°houselistä¸­-è°ƒæ•´ç›¸åº”æ ·å¼" class="header-anchor">#</a> æŠŠæœç´¢å¯¼èˆªæ å¼•å…¥åˆ°HouseListä¸­,è°ƒæ•´ç›¸åº”æ ·å¼</h4> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React from &quot;react&quot;;
import SearchHeader from &quot;../../components/SearchHeader&quot;;

let {label} = JSON.parse(localStorage.getItem('localCity'))

export default class HouseList extends React.Component {
 componentDidMount(){
     console.log('houseList')
 }
  render() {
    return (
      &lt;div&gt;
        &lt;SearchHeader cityName={label}&gt; &lt;/SearchHeader&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åœ¨æ‰¾æˆ¿é¡µé¢SearHeaderç»„ä»¶åŸºç¡€ä¸Šï¼Œè°ƒæ•´ç»“æ„</p> <ul><li>æˆ‘ä»¬éœ€è¦SearHeaderç»„ä»¶æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¼ é€’classNameçš„å±æ€§è¿›å»ï¼Œè°ƒæ•´ä¸€ä¸‹SearchHeaderç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>function SearchHeader({ history, cityName, className }) {
  return (
      // search-box è¿™ä¸ªæ ·å¼ä¸èƒ½å»æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡æ•°ç»„çš„æ–¹å¼ï¼Œæ·»åŠ å¤šä¸ªç±»åï¼Œç„¶ååˆ©ç”¨ join æ–¹æ³•è½¬æˆå­—ç¬¦ä¸²
    &lt;Flex className={[&quot;search-box&quot;, className || &quot;&quot;].join(&quot; &quot;)}&gt;
    ...
    &lt;/Flex&gt;
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>ç»™SearchHeaderç»„ä»¶ä¼ é€’classNameå±æ€§ï¼Œæ¥è°ƒæ•´ç»„ä»¶æ ·å¼ï¼Œè®©å…¶é€‚åº”æ‰¾æˆ¿é¡µé¢æ•ˆæœï¼Œä¸‹é¢æ˜¯HouseListçš„å¤´å¸ƒå±€</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Flex className={style.header}&gt;
  &lt;i className='iconfont icon-back' onClick={() =&gt; this.props.history.go(-1)}&gt;&lt;/i&gt;
  &lt;SearchHeader cityName={label} className={style.searchHeader}&gt; &lt;/SearchHeader&gt;
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>åˆ›å»º index.module.css,è®¾ç½®ç›¸åº”çš„æ ·å¼ï¼Œä¿®æ”¹äº†ä¸€äº›ç»„ä»¶ä¸­çš„å…¨å±€æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ :globalæ¥è®¾ç½®</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* è¦†ç›– searchHeaderçš„æ ·å¼ */</span>

<span class="token selector">.header</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f6f5<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/* æ§åˆ¶å·¦ä¾§å°ç®­å¤´ */</span>

<span class="token selector">.header :global(.icon-back)</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/* æ§åˆ¶å³ä¾§çš„å›¾æ ‡ */</span>

<span class="token selector">.header :global(.icon-map)</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #00ae66<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/* æ§åˆ¶searchè¾“å…¥æ¡† */</span>

<span class="token selector">.header :global(.search)</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.searchHeader</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="æ¡ä»¶ç­›é€‰"><a href="#æ¡ä»¶ç­›é€‰" class="header-anchor">#</a> æ¡ä»¶ç­›é€‰</h4> <p><img src="https://img-blog.csdnimg.cn/20191130190417126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-YOwKeIdg-1575111776956)(images/æ‰¾æˆ¿é¡µé¢åˆ†æ.png)]"></p> <h4 id="ç»“æ„åˆ†æ"><a href="#ç»“æ„åˆ†æ" class="header-anchor">#</a> ç»“æ„åˆ†æ</h4> <ul><li>çˆ¶ç»„ä»¶ï¼šFilter</li> <li>å­ç»„ä»¶ï¼šFilterTitle æ ‡é¢˜èœå•ç»„ä»¶</li> <li>å­ç»„ä»¶ï¼šFilterPicker å‰ä¸‰ä¸ªèœå•å¯¹åº”çš„å†…å®¹ç»„ä»¶</li> <li>å­ç»„ä»¶ï¼šFilterMore æœ€åä¸€ä¸ªèœå•å¯¹åº”çš„å†…å®¹ç»„ä»¶</li></ul> <h4 id="åŠŸèƒ½åˆ†æ-3"><a href="#åŠŸèƒ½åˆ†æ-3" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>ç‚¹å‡»FilterTitleç»„ä»¶èœå•ï¼Œå±•å¼€è¯¥æ¡ä»¶ç­›é€‰å¯¹è¯æ¡†ï¼Œè¢«ç‚¹å‡»çš„æ ‡é¢˜é«˜äº®</li> <li>ç‚¹å‡»å–æ¶ˆæŒ‰é’®æˆ–ç©ºç™½åŒºåŸŸï¼Œéšè—å¯¹è¯æ¡†ï¼Œå–æ¶ˆæ ‡é¢˜é«˜äº®</li> <li>é€‰æ‹©ç­›é€‰æ¡ä»¶åï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œéšè—å¯¹è¯æ¡†ï¼Œå½“å‰æ ‡é¢˜é«˜äº®</li> <li>æ‰“å¼€å¯¹è¯æ¡†æ—¶ï¼Œå¦‚æœæœ‰é€‰æ‹©çš„æ¡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¾ç¤ºå·²é€‰æ‹©çš„æ¡ä»¶</li> <li>æ‰“å¼€å¯¹è¯æ¡†å·²ç»éšè—å¯¹è¯æ¡†æœ‰åŠ¨ç”»æ•ˆæœ</li> <li>å¸é¡¶åŠŸèƒ½</li></ul> <h3 id="filtertitleç»„ä»¶å®ç°-â˜…â˜…â˜…"><a href="#filtertitleç»„ä»¶å®ç°-â˜…â˜…â˜…" class="header-anchor">#</a> FilterTitleç»„ä»¶å®ç°ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="æ€è·¯"><a href="#æ€è·¯" class="header-anchor">#</a> æ€è·¯</h4> <ul><li><p>æ ¹æ®æ ‡é¢˜èœå•æ•°æ®ï¼Œæ¸²æŸ“æ ‡é¢˜åˆ—è¡¨</p></li> <li><p>æ ‡é¢˜å¯ä»¥è¢«ç‚¹å‡»</p></li> <li><p>æ ‡é¢˜é«˜äº®</p></li> <li><ul><li>ç‚¹å‡»æ—¶é«˜äº®</li> <li>æœ‰ç­›é€‰æ¡ä»¶é€‰ä¸­æ—¶</li> <li>æ ‡é¢˜é«˜äº®çŠ¶æ€ï¼šæå‡è‡³çˆ¶ç»„ä»¶Filterä¸­ï¼Œç”±çˆ¶ç»„ä»¶æä¾›é«˜äº®çŠ¶æ€ï¼Œå­ç»„ä»¶é€šè¿‡propsæ¥å—çŠ¶æ€æ¥å®ç°é«˜äº®</li> <li>åŸåˆ™ï¼šå•ä¸€æ•°æ®æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒçŠ¶æ€åªåº”è¯¥æœ‰ä¸€ä¸ªç»„ä»¶æä¾›å¹¶ä¸”æä¾›æ“ä½œçŠ¶æ€çš„æ–¹æ³•ï¼Œå…¶ä»–ç»„ä»¶ç›´æ¥ä½¿ç”¨ç»„ä»¶ä¸­çŠ¶æ€å’Œæ“ä½œçŠ¶æ€çš„æ–¹æ³•å³å¯</li></ul></li></ul> <h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="header-anchor">#</a> æ­¥éª¤</h4> <ul><li>é€šè¿‡propsæ¥å—ï¼Œé«˜äº®çŠ¶æ€å¯¹è±¡ titleSelectedStatus</li> <li>éå†titleListæ•°ç»„ï¼Œæ¸²æŸ“æ ‡é¢˜åˆ—è¡¨</li> <li>åˆ¤æ–­é«˜äº®å¯¹è±¡ä¸­å½“å‰æ ‡é¢˜æ˜¯å¦é«˜äº®ï¼Œå¦‚æœæ˜¯ï¼Œæ·»åŠ é«˜äº®ç±»</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// FilterTitle
// æ¡ä»¶ç­›é€‰æ æ ‡é¢˜æ•°ç»„ï¼š
const titleList = [
  { title: &quot;åŒºåŸŸ&quot;, type: &quot;area&quot; },
  { title: &quot;æ–¹å¼&quot;, type: &quot;mode&quot; },
  { title: &quot;ç§Ÿé‡‘&quot;, type: &quot;price&quot; },
  { title: &quot;ç­›é€‰&quot;, type: &quot;more&quot; }
];

export default function FilterTitle({titleSelectedStatus}) {
  return (
    &lt;Flex align=&quot;center&quot; className={styles.root}&gt;
      {/* éå†æ ‡é¢˜æ•°ç»„ */}
      {titleList.map(item =&gt; {
        // è·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„çŠ¶æ€
        let isSelected = titleSelectedStatus[item.type];
        return (
          &lt;Flex.Item key={item.type}&gt;
            {/* é€‰ä¸­ç±»åï¼š selected */}{&quot; &quot;}
            &lt;span
              className={[
                styles.dropdown,
                // åˆ¤æ–­å½“å‰çš„æ ‡é¢˜æ˜¯å¦æ˜¯é€‰ä¸­çŠ¶æ€ï¼Œå¦‚æœæ˜¯ï¼Œè®¾ç½®é€‰ä¸­çš„æ ·å¼
                isSelected ? styles.selected : &quot;&quot;
              ].join(&quot; &quot;)}
            &gt;
              &lt;span&gt;{item.title}&lt;/span&gt; &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
            &lt;/span&gt;
          &lt;/Flex.Item&gt;
        );
      })}
    &lt;/Flex&gt;
  );
}

// Filter
/**
 * æ ‡é¢˜é«˜äº®çŠ¶æ€
 */
const titleSelectedStatus = {
  area: false,
  mode: false,
  price: true,
  more: false
}
export default class Filter extends Component {
  state = {
    titleSelectedStatus
  };
  render() {
    let { titleSelectedStatus } = this.state;
    return (
      &lt;div className={styles.root}&gt;
        {/* å‰ä¸‰ä¸ªèœå•çš„é®ç½©å±‚ */}
        &lt;div className={styles.content}&gt;
          {/* æ ‡é¢˜æ  */}{&quot; &quot;}
          &lt;FilterTitle titleSelectedStatus={titleSelectedStatus} /&gt;
          ...
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><ul><li>ç»™æ ‡é¢˜é¡¹ç»‘å®šå•å‡»äº‹ä»¶ï¼Œåœ¨äº‹ä»¶ä¸­è°ƒç”¨çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ–¹æ³• onClick</li> <li>å°†å½“å‰æ ‡é¢˜typeï¼Œé€šè¿‡onClickçš„å‚æ•°ï¼Œä¼ é€’ç»™çˆ¶ç»„ä»¶</li> <li>çˆ¶ç»„ä»¶ä¸­æ¥å—åˆ°å½“å‰typeï¼Œä¿®æ”¹æ”¹æ ‡é¢˜çš„é€‰ä¸­çŠ¶æ€ä¸ºtrue</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// Filter 
/**
 * æ ‡é¢˜é«˜äº®çŠ¶æ€
 */
const titleSelectedStatus = {
  area: false,
  mode: false,
  price: false,
  more: false
};

export default class Filter extends Component {
  ...
  // çˆ¶å…ƒç´ æä¾›å­å…ƒç´ è°ƒç”¨çš„å‡½æ•°
  onTitleClick = type =&gt; {
    this.setState({
      titleSelectedStatus: {
        ...titleSelectedStatus,
        [type]: true
      }
    });
  };
  render() {
    let { titleSelectedStatus } = this.state;
    return (
      &lt;div className={styles.root}&gt;
        {&quot; &quot;}
        {/* å‰ä¸‰ä¸ªèœå•çš„é®ç½©å±‚ */}
        &lt;div className={styles.content}&gt;
          {&quot; &quot;}
          {/* æ ‡é¢˜æ  */}{&quot; &quot;}
          &lt;FilterTitle
            ...
            onClick={this.onTitleClick}
          /&gt;
          ...
        &lt;/div&gt;{&quot; &quot;}
      &lt;/div&gt;
    );
  }
}

// FilterTitle
export default function FilterTitle({titleSelectedStatus,onClick}) {
  return (
    &lt;Flex align=&quot;center&quot; className={styles.root}&gt;
      {/* éå†æ ‡é¢˜æ•°ç»„ */}
      {titleList.map(item =&gt; {
        ...
        return (
          &lt;Flex.Item key={item.type} onClick={() =&gt; onClick(item.type)}&gt;
            {/* é€‰ä¸­ç±»åï¼š selected */}{&quot; &quot;}
            &lt;span
              className={[
                styles.dropdown,
                // åˆ¤æ–­å½“å‰çš„æ ‡é¢˜æ˜¯å¦æ˜¯é€‰ä¸­çŠ¶æ€ï¼Œå¦‚æœæ˜¯ï¼Œè®¾ç½®é€‰ä¸­çš„æ ·å¼
                isSelected ? styles.selected : &quot;&quot;
              ].join(&quot; &quot;)}
            &gt;
              &lt;span&gt;{item.title}&lt;/span&gt; &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
            &lt;/span&gt;
          &lt;/Flex.Item&gt;
        );
      })}
    &lt;/Flex&gt;
  );
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h3 id="filterpicker-ç»„ä»¶-â˜…â˜…â˜…"><a href="#filterpicker-ç»„ä»¶-â˜…â˜…â˜…" class="header-anchor">#</a> FilterPicker ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="header-anchor">#</a> æ€è·¯åˆ†æ</h4> <ul><li>ç‚¹å‡»å‰ä¸‰ä¸ªæ ‡é¢˜å±•ç¤ºè¯¥ç»„ä»¶ï¼Œç‚¹å‡»å–æ¶ˆçš„æ—¶å€™éšè—</li> <li>ä½¿ç”¨PickerViewç»„ä»¶æ¥å®ç°é¡µé¢æ•ˆæœ</li> <li>è·å–åˆ°PickerViewç»„ä»¶ä¸­ï¼Œé€‰ä¸­çš„ç­›é€‰æ¡ä»¶å€¼</li> <li>ç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œéšè—è¯¥ç»„ä»¶ï¼Œå°†è·å–åˆ°çš„ç­›é€‰æ¡ä»¶å€¼ä¼ é€’ç»™çˆ¶ç»„ä»¶</li> <li>å±•ç¤ºæˆ–éšè—å¯¹è¯æ¡†çš„çŠ¶æ€ï¼šç”±çˆ¶ç»„ä»¶æä¾›ï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶</li> <li>ç­›é€‰æ¡ä»¶æ•°æ®ï¼šç”±çˆ¶ç»„ä»¶æä¾›ï¼ˆå› ä¸ºæ‰€æœ‰ç­›é€‰æ¡ä»¶æ˜¯é€šè¿‡ä¸€ä¸ªæ¥å£æ¥è·å–çš„ï¼‰ï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶</li></ul> <h4 id="ä½¿ç”¨æ­¥éª¤-2"><a href="#ä½¿ç”¨æ­¥éª¤-2" class="header-anchor">#</a> ä½¿ç”¨æ­¥éª¤</h4> <h5 id="å®šä¹‰opentype-å®ç°filterpickeræ˜¾ç¤ºéšè—"><a href="#å®šä¹‰opentype-å®ç°filterpickeræ˜¾ç¤ºéšè—" class="header-anchor">#</a> å®šä¹‰openTypeï¼Œå®ç°FilterPickeræ˜¾ç¤ºéšè—</h5> <ul><li>åœ¨Filterç»„ä»¶ä¸­ï¼Œæä¾›ç»„ä»¶å±•ç¤ºæˆ–éšè—çš„çŠ¶æ€ï¼šopenType</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    ...
    // æ§åˆ¶FilterPickeræˆ– FilterMoreç»„ä»¶çš„å±•ç¤ºå’Œéšè—
    openType: &quot;&quot;
  };
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>åœ¨renderæ–¹æ³•ä¸­åˆ¤æ–­ openTypeçš„å€¼ä¸º area/mode/price æ—¶ï¼Œå°±æ˜¾ç¤º FilterPickerç»„ä»¶ï¼Œä»¥åŠé®ç½©å±‚</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* å‰ä¸‰ä¸ªèœå•çš„é®ç½©å±‚ */} 
{ openType === &quot;area&quot; || openType === &quot;mode&quot; || openType === &quot;price&quot; ? (&lt;div className={styles.mask}&gt;&lt;/div&gt;) : (&quot;&quot;)}
...
{/* å‰ä¸‰ä¸ªèœå•å¯¹åº”çš„å†…å®¹ï¼š */}
{openType === &quot;area&quot; || openType === &quot;mode&quot; || openType === &quot;price&quot; ? (&lt;FilterPicker /&gt;) : (&quot;&quot;)}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>åœ¨ onTitleClickæ–¹æ³•ä¸­ï¼Œä¿®æ”¹çŠ¶æ€ openTypeä¸ºå½“å‰ typeï¼Œå±•ç¤ºå¯¹è¯æ¡†</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// çˆ¶å…ƒç´ æä¾›å­å…ƒç´ è°ƒç”¨çš„å‡½æ•°
onTitleClick = type =&gt; {
  this.setState({
    titleSelectedStatus: {
      ...titleSelectedStatus,
      [type]: true
    },
    openType: type
  });
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>åœ¨Filterç»„ä»¶ä¸­ï¼Œæä¾›onCancelæ–¹æ³•ï¼ˆä½œä¸ºå–æ¶ˆæŒ‰é’®å’Œé®ç½©å±‚çš„äº‹ä»¶ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å–æ¶ˆ,
onCancel = () =&gt; {
  // éšè—å¯¹è¯æ¡†
  this.setState({
    openType:''
  })
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>åœ¨onCancelæ–¹æ³•ä¸­ï¼Œä¿®æ”¹çŠ¶æ€ openTypeä¸ºç©ºï¼Œéšè—å¯¹è¯æ¡†</li> <li>è®²onCancelé€šè¿‡propsä¼ é€’ç»™FilterPickerç»„ä»¶ï¼Œåœ¨å–æ¶ˆæŒ‰é’®çš„å•å‡»äº‹ä»¶ä¸­è°ƒç”¨è¯¥æ–¹æ³•</li> <li>åœ¨Filterç»„ä»¶ä¸­ï¼Œæä¾›onSaveæ–¹æ³•ï¼Œä½œä¸ºç¡®å®šæŒ‰é’®çš„äº‹ä»¶å¤„ç†</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// åœ¨çˆ¶ç»„ä»¶ Filterä¸­å®šä¹‰ ç¡®å®šå’Œå–æ¶ˆçš„å‡½æ•°
// å–æ¶ˆ
onCancel = () =&gt; {
  // éšè—å¯¹è¯æ¡†
  this.setState({
    openType: &quot;&quot;
  });
};
// ä¿å­˜ï¼Œéšè—å¯¹è¯æ¡†
onSave = () =&gt; {
  this.setState({
    openType: &quot;&quot;
  });
};
// ä¼ é€’ç»™FilterPicker
render(){
    return (
       ...
       &lt;FilterTitle
		  titleSelectedStatus={titleSelectedStatus}
		  onClick={this.onTitleClick}
		/&gt;
    )
}

// åœ¨FilterPickeré‡Œé¢è¿›è¡Œä¸€æ¬¡ä¸­è½¬ï¼Œæœ€åè¿™ä¸ªæŒ‰é’®æ˜¯åœ¨FilterFooteré‡Œé¢
render() {
  let { onCancel ,onSave} = this.props;
  return (
    &lt;&gt;
      {/* é€‰æ‹©å™¨ç»„ä»¶ï¼š */}
      &lt;PickerView data={province} value={null} cols={3} /&gt;

      {/* åº•éƒ¨æŒ‰é’® */}
      &lt;FilterFooter onCancel={onCancel} onOk={onSave}/&gt;
    &lt;/&gt;
  );
}

// åœ¨FilterFooteré‡Œé¢è°ƒç”¨
function FilterFooter({
  cancelText = 'å–æ¶ˆ',
  okText = 'ç¡®å®š',
  onCancel,
  onOk,
  className
}) {
  return (
    &lt;Flex className={[styles.root, className || ''].join(' ')}&gt;
      {/* å–æ¶ˆæŒ‰é’® */}
      &lt;span
        className={[styles.btn, styles.cancel].join(' ')}
        onClick={onCancel}
      &gt;
        {cancelText}
      &lt;/span&gt;

      {/* ç¡®å®šæŒ‰é’® */}
      &lt;span className={[styles.btn, styles.ok].join(' ')} onClick={onOk}&gt;
        {okText}
      &lt;/span&gt;
    &lt;/Flex&gt;
  )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><ul><li>åœ¨æ–¹æ³•ä¸­ï¼Œæ ¹æ®openTypeçš„ç±»å‹ï¼Œä»filtersDataä¸­è·å–éœ€è¦çš„æ•°æ®</li> <li>è®²æ•°æ®é€šè¿‡propsä¼ é€’ç»™FilterPickerç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“FilterPickerç»„ä»¶çš„æ–¹æ³•
  renderFilterPicker() {
    const {
      openType,
      filtersData: { area, subway, rentType, price }
    } = this.state;
    if (openType !== &quot;area&quot; &amp;&amp; openType !== &quot;mode&quot; &amp;&amp; openType !== &quot;price&quot;)
      return null;
    // æ‹¼æ¥æ•°æ®
    let data = [];
    // pickerViewæ˜¾ç¤ºçš„åˆ—æ•°
    let cols = 3
    switch (openType) {
      case &quot;area&quot;:
        // åŒºåŸŸæ•°æ®
        data = [area, subway];
        break;
      case &quot;mode&quot;:
        // æ–¹å¼æ•°æ®
        data = rentType;
        cols = 1
        break;
      case &quot;price&quot;:
        // ç§Ÿé‡‘æ•°æ®
        data = price;
        cols =1
        break;
    }
    return (
      &lt;FilterPicker onCancel={this.onCancel} onSave={this.onSave} data={data} cols={cols}/&gt;
    );
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ul><li>FilterPickerç»„ä»¶æ¥æ”¶åˆ°æ•°æ®åï¼Œè®²å…¶ä½œä¸ºPickerViewç»„ä»¶çš„data</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>export default class FilterPicker extends Component {
  render() {
    let { onCancel, onSave, data ,cols} = this.props;
    return (
      &lt;&gt;
        {/* é€‰æ‹©å™¨ç»„ä»¶ï¼š */}
        &lt;PickerView data={data} value={null} cols={cols} /&gt;

        {/* åº•éƒ¨æŒ‰é’® */}
        &lt;FilterFooter onCancel={onCancel} onOk={onSave} /&gt;
      &lt;/&gt;
    );
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day07"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day07" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day07</h2> <p>-æ¡ä»¶ç­›é€‰åŠŸèƒ½å®ç°&amp;FilterTitleç»„ä»¶åŠŸèƒ½å®ç°&amp;æˆ¿å±‹åˆ—è¡¨æ•°æ®è·å–</p> <h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰</h3> <h4 id="ç›®æ ‡-8"><a href="#ç›®æ ‡-8" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿè®¾ç½®FilterPickerç»„ä»¶ä¸ºå—æ§ç»„ä»¶</li> <li>èƒ½å¤Ÿè·å–é€‰ä¸­å€¼ï¼Œå¹¶ä¸”è®¾ç½®é»˜è®¤é€‰ä¸­å€¼</li></ul> <h4 id="è·å–é€‰ä¸­å€¼-â˜…â˜…â˜…"><a href="#è·å–é€‰ä¸­å€¼-â˜…â˜…â˜…" class="header-anchor">#</a> è·å–é€‰ä¸­å€¼ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨FilterPickerç»„ä»¶ä¸­ï¼Œæ·»åŠ çŠ¶æ€valueï¼ˆç”¨äºè·å–PickerViewç»„ä»¶çš„é€‰ä¸­å€¼ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    value: null
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>ç»™PickerViewç»„ä»¶æ·»åŠ é…ç½®é¡¹ onChangeï¼Œé€šè¿‡å‚æ•°è·å–åˆ°é€‰ä¸­å€¼ï¼Œå¹¶æ›´æ–°çŠ¶æ€ value</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;PickerView
  data={data}
  // æˆ‘ä»¬ä¸€æ—¦ç›‘å¬äº† onChangeäº‹ä»¶ï¼ŒåŒæ­¥äº†valueå€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶æˆäº†å—æ§ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŒæ­¥valueçš„å€¼
  value={this.state.value}
  cols={cols}
  onChange={val =&gt; {
    this.setState({ value: val });
  }}
/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>åœ¨ç¡®å®šæŒ‰é’®çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œè®² type å’Œ value ä½œä¸ºå‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// Filterç»„ä»¶
 &lt;FilterPicker ... type={openType}/&gt;
 
// FilterPickerç»„ä»¶
{/* åº•éƒ¨æŒ‰é’®ï¼Œè¿™ä¸ªtypeç”±å¤–ç•Œè¿›è¡Œçš„ä¼ é€’ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡propsæ¥è¿›è¡Œæ¥æ”¶ */}
&lt;FilterFooter onCancel={onCancel} onOk={() =&gt; onSave(type,this.state.value)} /&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="è®¾ç½®é»˜è®¤é€‰ä¸­å€¼"><a href="#è®¾ç½®é»˜è®¤é€‰ä¸­å€¼" class="header-anchor">#</a> è®¾ç½®é»˜è®¤é€‰ä¸­å€¼</h4> <p>å¦‚æœæ˜¯ä¹‹å‰é€‰ä¸­äº†çš„ï¼Œå½“æˆ‘ä»¬å†æ¬¡æ˜¾ç¤ºFilterPickerçš„æ—¶å€™ï¼Œåº”è¯¥å±•ç¤ºé»˜è®¤é€‰ä¸­é¡¹</p> <ul><li>åœ¨Filterç»„ä»¶ä¸­ï¼Œæä¾›é€‰ä¸­å€¼çŠ¶æ€ï¼š <strong>selectedValues</strong></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// é»˜è®¤é€‰ä¸­çš„çŠ¶æ€
const selectedValues = {
  area: [&quot;area&quot;, null],
  mode: [&quot;null&quot;],
  price: [&quot;null&quot;],
  more: []
};
...
  state = {
    ...
    // ç­›é€‰é»˜è®¤é€‰ä¸­çš„çŠ¶æ€å€¼
    selectedValues
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>é€šè¿‡openTypeè·å–åˆ°å½“å‰ç±»å‹çš„é€‰ä¸­å€¼ï¼ˆdefaultValueï¼‰ï¼Œé€šè¿‡propsä¼ é€’ç»™FilterPickerç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const {
  ...,
  selectedValues
} = this.state;
// é»˜è®¤é€‰ä¸­å€¼
let defaultValue = selectedValues[openType];
...
&lt;FilterPicker
  ...
  defaultValue={defaultValue}
/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>åœ¨FilterPickerç»„ä»¶ä¸­ï¼Œå°†å½“å‰defaultValueè®¾ç½®ä¸ºçŠ¶æ€valueçš„é»˜è®¤å€¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>state = {
  value: this.props.defaultValue
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>åœ¨ç‚¹å‡»ç¡®å®šæŒ‰é’®åï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­æ›´æ–°å½“å‰typeå¯¹åº”çš„selectedValuesçŠ¶æ€å€¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ä¿å­˜ï¼Œéšè—å¯¹è¯æ¡†
onSave = (type, value) =&gt; {
  this.setState({
    openType: '',
    selectedValues: {
      ...this.state.selectedValues,
      [type]: value
    }
  });
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="header-anchor">#</a> é—®é¢˜</h4> <ul><li>åœ¨å‰é¢ä¸‰ä¸ªæ ‡ç­¾ä¹‹é—´æ¥å›åˆ‡æ¢æ—¶å€™ï¼Œé»˜è®¤é€‰ä¸­å€¼ä¸ä¼šç”Ÿæ•ˆï¼Œå½“ç‚¹å‡»ç¡®å®šï¼Œé‡æ–°æ‰“å¼€FilterPickerç»„ä»¶æ—¶å€™ï¼Œæ‰ä¼šç”Ÿæ•ˆ</li> <li>åˆ†æï¼šä¸¤ç§æ“ä½œæ–¹å¼çš„åŒºåˆ«åœ¨äºæœ‰æ²¡æœ‰é‡æ–°åˆ›å»ºFilterPickerç»„ä»¶ï¼Œé‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šç”Ÿæ•ˆï¼Œä¸é‡æ–°åˆ›å»ºï¼Œä¸ä¼šç”Ÿæ•ˆ</li> <li>åŸå› ï¼šä¸é‡æ–°åˆ›å»ºFilterPickerç»„ä»¶æ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œstateåˆå§‹åŒ–ï¼Œä¹Ÿå°±æ‹¿ä¸åˆ°æœ€æ–°çš„props</li> <li>è§£å†³æ–¹å¼ï¼šç»™FilterPickerç»„ä»¶æ·»åŠ keyå€¼ä¸ºopenTypeï¼Œè¿™æ ·ï¼Œåœ¨ä¸åŒæ ‡é¢˜ä¹‹é—´åˆ‡æ¢æ—¶å€™ï¼Œkeyå€¼éƒ½ä¸ç›¸åŒï¼ŒReactå†…éƒ¨ä¼šåœ¨keyä¸åŒæ—¶å€™ï¼Œé‡æ–°åˆ›å»ºè¯¥ç»„ä»¶</li></ul> <h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„filtertitle-â˜…â˜…â˜…"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„filtertitle-â˜…â˜…â˜…" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„FilterTitleï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="ç›®æ ‡-9"><a href="#ç›®æ ‡-9" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿè¯´å‡ºFilterTitleé«˜äº®æ˜¾ç¤ºçš„é€»è¾‘</li> <li>å‚ç…§è€å¸ˆä»£ç å®ç°FilterTitleçš„é«˜äº®æ˜¾ç¤º</li></ul> <h4 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="header-anchor">#</a> æ€è·¯</h4> <ul><li>ç‚¹å‡»æ ‡é¢˜æ—¶ï¼Œéå†æ ‡é¢˜é«˜äº®æ•°æ®</li> <li>å¦‚æœæ˜¯å½“å‰æ ‡é¢˜ï¼Œç›´æ¥è®¾ç½®ä¸ºé«˜äº®</li> <li>åˆ†åˆ«åˆ¤æ–­æ¯ä¸ªæ ‡é¢˜å¯¹åº”çš„ç­›é€‰æ¡ä»¶æœ‰æ²¡æœ‰é€‰ä¸­å€¼ï¼ˆåˆ¤æ–­æ¯ä¸ªç­›é€‰æ¡ä»¶çš„é€‰ä¸­å€¼ä¸é»˜è®¤å€¼æ˜¯å¦ç›¸åŒï¼Œç›¸åŒè¡¨ç¤ºæ²¡æœ‰é€‰ä¸­å€¼ï¼Œä¸åŒï¼Œè¡¨ç¤ºé€‰ä¸­äº†å€¼ï¼‰</li> <li><ul><li>selectedVal è¡¨ç¤ºå½“å‰typeçš„é€‰ä¸­å€¼</li> <li>å¦‚æœtypeä¸ºareaï¼Œæ­¤æ—¶ï¼ŒselectedVal.length !== 2 || selectedVal[0] !== â€˜areaâ€™ï¼Œå°±è¡¨ç¤ºå·²ç»æœ‰é€‰ä¸­å€¼</li> <li>å¦‚æœ type ä¸º modeï¼Œæ­¤æ—¶ï¼ŒselectedVal[0] !== â€˜nullâ€™ï¼Œå°±è¡¨ç¤ºå·²ç»æœ‰é€‰ä¸­å€¼</li> <li>å¦‚æœ type ä¸º priceï¼Œæ­¤æ—¶ï¼ŒselectedVal[0] !== â€˜nullâ€™ï¼Œå°±è¡¨ç¤ºæœ‰é€‰ä¸­å€¼</li></ul></li> <li>å¦‚æœæœ‰ï¼Œå°±è®©è¯¥æ ‡é¢˜ä¿æŒé«˜äº®</li> <li>å¦‚æœæ²¡æœ‰ï¼Œå°±è®©è¯¥æ ‡é¢˜å–æ¶ˆé«˜äº®</li></ul> <h4 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="header-anchor">#</a> å®ç°æ­¥éª¤</h4> <ul><li>åœ¨æ ‡é¢˜ç‚¹å‡»äº‹ä»¶ onTitleClickäº‹ä»¶é‡Œé¢ï¼Œè·å–åˆ°ä¸¤ä¸ªçŠ¶æ€ï¼šæ ‡é¢˜é€‰ä¸­çŠ¶æ€å¯¹è±¡å’Œç­›é€‰æ¡ä»¶çš„é€‰ä¸­å€¼å¯¹è±¡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> const { titleSelectedStatus, selectedValues } = this.state;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>æ ¹æ®å½“å‰æ ‡é¢˜é€‰ä¸­çŠ¶æ€å¯¹è±¡ï¼Œè·å–åˆ°ä¸€ä¸ªæ–°çš„æ ‡é¢˜é€‰ä¸­çŠ¶æ€å¯¹è±¡ï¼ˆnewTitleSelectedStatusï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// åˆ›å»ºæ–°çš„æ ‡é¢˜é€‰ä¸­çŠ¶æ€å¯¹è±¡
let newTitleSelectedStatus = { ...titleSelectedStatus };
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>ä½¿ç”¨Object.keys()ï¼Œéå†æ ‡é¢˜é€‰ä¸­çŠ¶æ€å¯¹è±¡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>Object.keys(titleSelectedStatus).forEach(key =&gt; {
     ...
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºå½“å‰æ ‡é¢˜ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥è®©è¯¥æ ‡é¢˜é€‰ä¸­çŠ¶æ€ä¸ºtrueï¼ˆé«˜äº®ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>Object.keys(titleSelectedStatus).forEach(key =&gt; {
 // keyè¡¨ç¤ºæ•°ç»„ä¸­æ¯ä¸€é¡¹
 if (key === type) {
   // å½“å‰æ ‡é¢˜
   newTitleSelectedStatus[type] = true;
   return;
 }
 ...
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>å¦åˆ™ï¼Œåˆ†åˆ«åˆ¤æ–­æ¯ä¸ªæ ‡é¢˜çš„é€‰ä¸­å€¼æ˜¯å¦ä¸é»˜è®¤å€¼ç›¸åŒ</li> <li>å¦‚æœä¸åŒï¼Œåˆ™è®¾ç½®è¯¥æ ‡é¢˜çš„é€‰ä¸­çŠ¶æ€ä¸ºtrue</li> <li>å¦‚æœç›¸åŒï¼Œåˆ™è®¾ç½®è¯¥æ ‡é¢˜çš„é€‰ä¸­çŠ¶æ€ä¸ºfalse</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>Object.keys(titleSelectedStatus).forEach(key =&gt; {
    ...
	// å…¶ä»–æ ‡é¢˜
	let selectedVal = selectedValues[key];
	if (
	  (key === &quot;area&quot; &amp;&amp; selectedVal.length !== 2) ||
	  selectedVal[0] !== &quot;area&quot;
	) {
	  newTitleSelectedStatus[type] = true;
	} else if (key === &quot;more&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
	  newTitleSelectedStatus[type] = true;
	} else if (key === &quot;price&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
	  newTitleSelectedStatus[type] = true;
	} else if (key === &quot;more&quot;) {
	  // æ›´å¤šé€‰æ‹©
	}else {
	  newTitleSelectedStatus[type] = false;
	}
});

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>æ›´æ–°çŠ¶æ€ titleSelectedStatusçš„å€¼ä¸ºï¼š newTitleSelectedStatus</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>this.setState({
  titleSelectedStatus: newTitleSelectedStatus,
  openType: type
});

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-filtermoreç»„ä»¶"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-filtermoreç»„ä»¶" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-FilterMoreç»„ä»¶</h3> <h4 id="ç›®æ ‡-10"><a href="#ç›®æ ‡-10" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿæ¸²æŸ“FilterMoreç»„ä»¶</li> <li>èƒ½å¤Ÿå®ç° æ¸…é™¤æŒ‰é’®å’Œç¡®å®šæŒ‰é’® çš„é€»è¾‘</li> <li>èƒ½å¤Ÿå®ç° FilterMoreçš„é»˜è®¤é€‰ä¸­</li></ul> <h4 id="æ¸²æŸ“ç»„ä»¶æ•°æ®-â˜…â˜…â˜…"><a href="#æ¸²æŸ“ç»„ä»¶æ•°æ®-â˜…â˜…â˜…" class="header-anchor">#</a> æ¸²æŸ“ç»„ä»¶æ•°æ®ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>å°è£…renderFilterMoreæ–¹æ³•ï¼Œæ¸²æŸ“FilterMoreç»„ä»¶</li> <li>ä»filtersDataä¸­ï¼Œè·å–æ•°æ®ï¼ˆroomTypeï¼Œorientedï¼Œfloorï¼Œcharacteristicï¼‰ï¼Œé€šè¿‡propsä¼ é€’ç»™FilterMoreç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>renderFilterMore() {
  // è·å–å¯¹åº”æ•°æ® roomTypeï¼Œorientedï¼Œfloorï¼Œcharacteristic
  const {
    openType,
    filtersData: { roomType, oriented, floor, characteristic }
  } = this.state;
  // æŠŠæ•°æ®å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œæ–¹ä¾¿ä¼ é€’
  const data = {
    roomType,
    oriented,
    floor,
    characteristic
  };
  if (openType !== &quot;more&quot;) {
    return null;
  }
  // ä¼ é€’ç»™å­ç»„ä»¶
  return &lt;FilterMore data={data}/&gt;;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>FilterMoreç»„ä»¶ä¸­ï¼Œé€šè¿‡propsè·å–åˆ°æ•°æ®ï¼Œåˆ†åˆ«å°†æ•°æ®ä¼ é€’ç»™renderFiltersæ–¹æ³•</li> <li>æ­£åœ¨renderFiltersæ–¹æ³•ä¸­ï¼Œé€šè¿‡å‚æ•°æ¥æ”¶æ•°æ®ï¼Œéå†æ•°æ®ï¼Œæ¸²æŸ“æ ‡ç­¾</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“æ ‡ç­¾
renderFilters(data) {
  // é«˜äº®ç±»åï¼š styles.tagActive
  return data.map(item =&gt; {
    return (
      &lt;span key={item.value} className={[styles.tag].join(&quot; &quot;)}&gt;{item.label}&lt;/span&gt;
    );
  });
}

render() {
  const {
    data: { roomType, oriented, floor, characteristic }
  } = this.props;
  return (
    &lt;div className={styles.root}&gt;
      ...
      &lt;div className={styles.tags}&gt;
        &lt;dl className={styles.dl}&gt;
          &lt;dt className={styles.dt}&gt; æˆ·å‹ &lt;/dt&gt;
          &lt;dd className={styles.dd}&gt; {this.renderFilters(roomType)} &lt;/dd&gt;
          &lt;dt className={styles.dt}&gt; æœå‘ &lt;/dt&gt;
          &lt;dd className={styles.dd}&gt; {this.renderFilters(oriented)} &lt;/dd&gt;
          &lt;dt className={styles.dt}&gt; æ¥¼å±‚ &lt;/dt&gt;
          &lt;dd className={styles.dd}&gt; {this.renderFilters(floor)} &lt;/dd&gt;
          &lt;dt className={styles.dt}&gt; æˆ¿å±‹äº®ç‚¹ &lt;/dt&gt;
          &lt;dd className={styles.dd}&gt;
          ...
      &lt;/div&gt;
      ...
    &lt;/div&gt;
  );
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="è·å–é€‰ä¸­å€¼å¹¶ä¸”é«˜äº®æ˜¾ç¤º-â˜…â˜…â˜…"><a href="#è·å–é€‰ä¸­å€¼å¹¶ä¸”é«˜äº®æ˜¾ç¤º-â˜…â˜…â˜…" class="header-anchor">#</a> è·å–é€‰ä¸­å€¼å¹¶ä¸”é«˜äº®æ˜¾ç¤ºï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨stateä¸­æ·»åŠ çŠ¶æ€ selectedValues</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    selectedValues: []
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ç»™æ ‡ç­¾ç»‘å®šå•å‡»äº‹ä»¶ï¼Œé€šè¿‡å‚æ•°è·å–åˆ°å½“å‰é¡¹çš„value</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;span
  key={item.value}
  className={[styles.tag, isSelected ? styles.tagActive : &quot;&quot;].join(&quot; &quot;)}
  onClick={() =&gt; this.onTagClick(item.value)}
&gt;
  {item.label}
&lt;/span&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>åˆ¤æ–­selectedValuesä¸­æ˜¯å¦åŒ…å«å½“å‰valueå€¼</li> <li>å¦‚æœä¸åŒ…å«ï¼Œå°±å°†å½“å‰é¡¹çš„valueæ·»åŠ åˆ°selectedValuesæ•°ç»„ä¸­</li> <li>å¦‚æœåŒ…å«ï¼Œå°±ä»selectedValuesæ•°ç»„ä¸­ç§»é™¤ï¼ˆä½¿ç”¨æ•°ç»„çš„spliceæ–¹æ³•ï¼Œæ ¹æ®ç´¢å¼•å·åˆ é™¤ï¼‰</li> <li>åœ¨æ¸²æŸ“æ ‡ç­¾æ—¶ï¼Œåˆ¤æ–­selectedValuesæ•°ç»„ä¸­ï¼Œæ˜¯å¦åŒ…å«å½“å‰é¡¹çš„valueï¼ŒåŒ…å«ï¼Œå°±æ·»åŠ é«˜äº®ç±»</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>onTagClick(value) {
    const { selectedValues } = this.state;
    // åˆ›å»ºæ–°æ•°ç»„ï¼Œå°½é‡ä¸è¦ç›´æ¥æ“ä½œåŸæ•°ç»„
    const newSelectedValues = [...selectedValues];
    if (selectedValues.indexOf(value) &lt;= -1) {
      // ä¸åŒ…å«å½“å‰çš„value
      newSelectedValues.push(value);
    } else {
      // è¯´æ˜åŒ…å«ï¼Œå°±éœ€è¦ç§»é™¤
      const index = newSelectedValues.findIndex(item =&gt; item === value);
      newSelectedValues.splice(index, 1);
    }
    this.setState({
      selectedValues: newSelectedValues
    });
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="æ¸…é™¤å’Œç¡®å®šæŒ‰é’®çš„é€»è¾‘å¤„ç†-â˜…â˜…â˜…"><a href="#æ¸…é™¤å’Œç¡®å®šæŒ‰é’®çš„é€»è¾‘å¤„ç†-â˜…â˜…â˜…" class="header-anchor">#</a> æ¸…é™¤å’Œç¡®å®šæŒ‰é’®çš„é€»è¾‘å¤„ç†ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>è®¾ç½®FilterFooterç»„ä»¶çš„å–æ¶ˆæŒ‰é’®æ–‡å­—ä¸ºï¼š æ¸…é™¤</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;FilterFooter
  className={styles.footer}
  cancelText=&quot;æ¸…é™¤&quot;
  onCancel={this.onCancel}
  onOk={this.onOk}
/&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>ç‚¹å‡»å–æ¶ˆæŒ‰é’®æ—¶ï¼Œæ¸…ç©ºæ‰€æœ‰é€‰ä¸­çš„é¡¹çš„å€¼ï¼ˆselectedValues:[]ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å–æ¶ˆç‚¹å‡»äº‹ä»¶
onCancel = () =&gt; {
  this.setState({
    selectedValues: []
  });
};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>ç‚¹å‡»ç¡®å®šæŒ‰é’®æ—¶ï¼Œè®²å½“å‰é€‰ä¸­é¡¹çš„å€¼å’Œtypeï¼Œä¼ é€’ç»™Filterçˆ¶ç»„ä»¶</li> <li>åœ¨Filterç»„ä»¶ä¸­çš„onSaveæ–¹æ³•ä¸­ï¼Œæ¥æ”¶ä¼ é€’è¿‡æ¥çš„é€‰ä¸­å€¼ï¼Œæ›´æ–°çŠ¶æ€selectedValues</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// Filter ç»„ä»¶ï¼Œä¼ é€’typeè·ŸonSave
 &lt;FilterMore data={data} type={openType} onSave={this.onSave} defaultValues={defaultValues}/&gt;;
 
 
// ç¡®å®šç‚¹å‡»äº‹ä»¶,é€šè¿‡propsæ¥è·å–typeè·ŸonSaveæ–¹æ³•
onOk = () =&gt; {
  const { type, onSave } = this.props;
  onSave(type, this.state.selectedValues);
};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="è®¾ç½®é»˜è®¤é€‰ä¸­å€¼-â˜…â˜…â˜…"><a href="#è®¾ç½®é»˜è®¤é€‰ä¸­å€¼-â˜…â˜…â˜…" class="header-anchor">#</a> è®¾ç½®é»˜è®¤é€‰ä¸­å€¼ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨æ¸²æŸ“FilterMoreç»„ä»¶æ—¶ï¼Œä»selectedValuesä¸­ï¼Œè·å–åˆ°å½“å‰é€‰ä¸­å€¼more</li> <li>é€šè¿‡propsè®²é€‰ä¸­å€¼ä¼ é€’ç»™FilterMoreç»„ä»¶</li> <li>ç»™é®ç½©å±‚ç»‘å®šäº‹ä»¶ï¼Œåœ¨äº‹ä»¶ä¸­ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶çš„onCancelå…³é—­FilterMoreç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// Filterç»„ä»¶
renderFilterMore() {
  ...
  let defaultValues = selectedValues.more
  // ä¼ é€’ç»™å­ç»„ä»¶
  return &lt;FilterMore data={data} type={openType} onSave={this.onSave} defaultValues={defaultValues} onCancel={this.onCancel}/&gt;;
}

// FilterMoreç»„ä»¶
 {/* é®ç½©å±‚ */} &lt;div className={styles.mask} onClick={this.props.onCancel}/&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>åœ¨FilterMoreç»„ä»¶ä¸­ï¼Œè®²è·å–åˆ°çš„é€‰ä¸­å€¼ï¼Œè®¾ç½®ä¸ºå­ç»„ä»¶çŠ¶æ€selectedValuesçš„é»˜è®¤å€¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>state = {
  selectedValues: this.props.defaultValues
};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="å®Œå–„filtertitleé«˜äº®åŠŸèƒ½-â˜…â˜…"><a href="#å®Œå–„filtertitleé«˜äº®åŠŸèƒ½-â˜…â˜…" class="header-anchor">#</a> å®Œå–„FilterTitleé«˜äº®åŠŸèƒ½ï¼ˆâ˜…â˜…ï¼‰</h3> <ul><li>åœ¨Filterç»„ä»¶çš„onTitleClickæ–¹æ³•ä¸­ï¼Œæ·»åŠ typeä¸ºmoreçš„åˆ¤æ–­æ¡ä»¶</li> <li>å½“é€‰ä¸­å€¼æ•°ç»„é•¿åº¦ä¸ä¸º0çš„æ—¶å€™ï¼Œè¡¨ç¤ºFilterMoreç»„ä»¶ä¸­æœ‰é€‰ä¸­é¡¹ï¼Œæ­¤æ—¶ï¼Œè®¾ç½®é€‰ä¸­çŠ¶æ€é«˜äº®</li> <li>ç‚¹å‡»ç¡®å®šæŒ‰é’®æ—¶ï¼Œæ ¹æ®å‚æ•°typeå’Œvalueï¼Œåˆ¤æ–­å½“å‰èœå•æ˜¯å¦é«˜äº®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ä¿å­˜ï¼Œéšè—å¯¹è¯æ¡†
  onSave = (type, value) =&gt; {
    const { titleSelectedStatus } = this.state;
    let newTitleSelectedStatus = { ...titleSelectedStatus };
    let selectedVal = value;
    if (
      type === &quot;area&quot; &amp;&amp;
      (selectedVal.length !== 2 || selectedVal[0] !== &quot;area&quot;)
    ) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;mode&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;price&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;more&quot; &amp;&amp; selectedVal.length !== 0) {
      // æ›´å¤šé€‰æ‹©
      newTitleSelectedStatus[type] = true;
    } else {
      newTitleSelectedStatus[type] = false;
    }
    this.setState({
      openType: &quot;&quot;,
      titleSelectedStatus: newTitleSelectedStatus,
      selectedValues: {
        ...this.state.selectedValues,
        [type]: value
      }
    });
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>åœ¨å…³é—­å¯¹è¯æ¡†æ—¶ï¼ˆonCancelï¼‰ï¼Œæ ¹æ®typeå’Œå½“å‰typeçš„é€‰ä¸­å€¼ï¼Œåˆ¤æ–­å½“å‰èœå•æ˜¯å¦é«˜äº®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å–æ¶ˆ
  onCancel = type =&gt; {
    const { titleSelectedStatus, selectedValues } = this.state;
    let newTitleSelectedStatus = { ...titleSelectedStatus };
    let selectedVal = selectedValues[type];
    if (
      type === &quot;area&quot; &amp;&amp;
      (selectedVal.length !== 2 || selectedVal[0] !== &quot;area&quot;)
    ) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;mode&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;price&quot; &amp;&amp; selectedVal[0] !== &quot;null&quot;) {
      newTitleSelectedStatus[type] = true;
    } else if (type === &quot;more&quot; &amp;&amp; selectedVal.length !== 0) {
      // æ›´å¤šé€‰æ‹©
      newTitleSelectedStatus[type] = true;
    } else {
      newTitleSelectedStatus[type] = false;
    }
    // éšè—å¯¹è¯æ¡†
    this.setState({
      openType: &quot;&quot;,
      titleSelectedStatus: newTitleSelectedStatus
    });
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®</h3> <h4 id="ç›®æ ‡-11"><a href="#ç›®æ ‡-11" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿå°è£…ç­›é€‰æ¡ä»¶å¯¹è±¡</li> <li>èƒ½å¤Ÿè·å–åˆ°æˆ¿å±‹åˆ—è¡¨æ•°æ®</li> <li>èƒ½å¤Ÿå®ç°HouseItemç»„ä»¶åœ¨mapé¡µé¢å’Œæˆ¿å±‹åˆ—è¡¨é¡µé¢çš„å¤ç”¨</li> <li>èƒ½å¤Ÿæ¸²æŸ“æˆ¿å±‹åˆ—è¡¨æ•°æ®åœ¨é¡µé¢</li></ul> <h4 id="ç»„è£…ç­›é€‰æ¡ä»¶-â˜…â˜…â˜…"><a href="#ç»„è£…ç­›é€‰æ¡ä»¶-â˜…â˜…â˜…" class="header-anchor">#</a> ç»„è£…ç­›é€‰æ¡ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨Filterç»„ä»¶çš„onSaveæ–¹æ³•ä¸­ï¼Œæ ¹æ®æœ€æ–°selectedValuesç»„è£…ç­›é€‰çš„æ¡ä»¶æ•°æ® filtersï¼Œä»¥ä¸‹æ˜¯æ•°æ®æ ¼å¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190618880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-yVHirGTt-1575111902305)(images/æ•°æ®æ ¼å¼.png)]"></p> <ul><li>è·å–åŒºåŸŸæ•°æ®çš„å‚æ•°åï¼šarea æˆ– subway(é€‰ä¸­å€¼ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ )</li> <li>è·å–åŒºåŸŸæ•°æ®å€¼ï¼ˆä»¥æœ€åä¸€ä¸ªvalueä¸ºå‡†ï¼‰</li> <li>è·å–æ–¹å¼å’Œç§Ÿé‡‘çš„å€¼ï¼ˆé€‰ä¸­å€¼å¾—ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</li> <li>è·å–ç­›é€‰ï¼ˆmoreï¼‰çš„å€¼ï¼ˆè®²é€‰ä¸­å€¼æ•°ç»„è½¬æ¢ä¸ºä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ç»„æ‹¼æ•°æ®æ ¼å¼
let newSelectedValues = {
  ...selectedValues,
  [type]: value
};
const { area, mode, price, more } = newSelectedValues;

// ç­›é€‰æ¡ä»¶æ•°æ®
const filters = {};
// åŒºåŸŸ
const areaKey = area[0];
let areaValue = &quot;null&quot;;
if (area.length === 3) {
  areaValue = area[2] !== &quot;null&quot; ? area[2] : area[1];
}
filters[areaKey] = areaValue;
// æ–¹å¼å’Œç§Ÿé‡‘
filters.mode = mode[0];
filters.price = price[0];
// more
filters.more = more.join(&quot;,&quot;);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="è·å–æˆ¿å±‹æ•°æ®-â˜…â˜…â˜…"><a href="#è·å–æˆ¿å±‹æ•°æ®-â˜…â˜…â˜…" class="header-anchor">#</a> è·å–æˆ¿å±‹æ•°æ®ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>å°†ç­›é€‰æ¡ä»¶æ•°æ®filtersä¼ é€’ç»™çˆ¶ç»„ä»¶HouseList</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> // ä¿å­˜ï¼Œéšè—å¯¹è¯æ¡†
  onSave = (type, value) =&gt; {
    ...

    this.props.onFilter(filters)
    ...
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>HouseListç»„ä»¶ä¸­ï¼Œåˆ›å»ºæ–¹æ³•onFilterï¼Œé€šè¿‡å‚æ•°æ¥æ”¶filtersæ•°æ®ï¼Œå¹¶å­˜å‚¨åˆ°thisä¸­</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  // æä¾›ç»™Filterç»„ä»¶è°ƒç”¨çš„å‡½æ•°ï¼Œæ¥å—å‚æ•° filters
  onFilter = filters =&gt; {
    this.filters = filters;
    this.searchHouseList();
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>åˆ›å»ºæ–¹æ³•searchHouseListï¼ˆç”¨æ¥è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®ï¼‰</li> <li>æ ¹æ®æ¥å£ï¼Œè·å–å½“å‰å®šä½åŸå¸‚idå‚æ•°</li> <li>å°†ç­›é€‰æ¡ä»¶æ•°æ®ä¸åˆ†é¡µæ•°æ®åˆå¹¶åï¼Œä½œä¸ºå€Ÿå£çš„å‚æ•°ï¼Œå‘é€è¯·æ±‚ï¼Œè·å–æˆ¿å±‹æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> // è·å–æˆ¿æºåˆ—è¡¨çš„å‡½æ•°
  async searchHouseList() {
    // è·å–åŸå¸‚ä¿¡æ¯
    let { value } = JSON.parse(localStorage.getItem(&quot;localCity&quot;));
    // è¯·æ±‚æ•°æ®
    let res = await instance.get(&quot;/houses&quot;, {
      cityId: value,
      ...this.filters,
      start: 1,
      end: 20
    });
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="è¿›å…¥é¡µé¢æ—¶è·å–æ•°æ®-â˜…â˜…"><a href="#è¿›å…¥é¡µé¢æ—¶è·å–æ•°æ®-â˜…â˜…" class="header-anchor">#</a> è¿›å…¥é¡µé¢æ—¶è·å–æ•°æ®ï¼ˆâ˜…â˜…ï¼‰</h4> <ul><li>åœ¨componentDidMounté’©å­å‡½æ•°ä¸­ï¼Œè°ƒç”¨searchHouseListï¼Œæ¥è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®</li> <li>ç»™HouseListç»„ä»¶æ·»åŠ å±æ€§ filtersï¼Œå€¼ä¸ºå¯¹è±¡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  // åˆå§‹åŒ–å±æ€§
  filters = {};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>æ·»åŠ ä¸¤ä¸ªçŠ¶æ€ï¼šlistå’Œcountï¼ˆå­˜å‚¨æˆ¿å±‹åˆ—è¡¨æ•°æ®å’Œæ€»æ¡æ•°ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    list: [],
    count: 0
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>å°†è·å–åˆ°çš„æˆ¿å±‹æ•°æ®ï¼Œå­˜å‚¨åœ¨stateä¸­</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> // è·å–æˆ¿æºåˆ—è¡¨çš„å‡½æ•°
  async searchHouseList() {
    // è·å–åŸå¸‚ä¿¡æ¯
    let { value } = JSON.parse(localStorage.getItem(&quot;localCity&quot;));
    // è¯·æ±‚æ•°æ®
    let res = await instance.get(&quot;/houses&quot;, {
      cityId: value,
      ...this.filters,
      start: 1,
      end: 20
    });
    let { list, count } = res.data.body;
    this.setState({
      list: list,
      count: count
    });
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="ä½¿ç”¨listç»„ä»¶æ¸²æŸ“æ•°æ®-â˜…â˜…â˜…"><a href="#ä½¿ç”¨listç»„ä»¶æ¸²æŸ“æ•°æ®-â˜…â˜…â˜…" class="header-anchor">#</a> ä½¿ç”¨Listç»„ä»¶æ¸²æŸ“æ•°æ®ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>å°è£…HouseItemç»„ä»¶ï¼Œå®ç°mapå’ŒHouseListuemianä¸­ï¼Œæˆ¿å±‹åˆ—è¡¨é¡¹çš„å¤ç”¨</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React from 'react'

import PropTypes from 'prop-types'

import styles from './index.module.css'

function HouseItem({ src, title, desc, tags, price, onClick }) {
  return (
    &lt;div className={styles.house} onClick={onClick}&gt;
      &lt;div className={styles.imgWrap}&gt;
        &lt;img className={styles.img} src={src} alt=&quot;&quot; /&gt;
      &lt;/div&gt;
      &lt;div className={styles.content}&gt;
        &lt;h3 className={styles.title}&gt;{title}&lt;/h3&gt;
        &lt;div className={styles.desc}&gt;{desc}&lt;/div&gt;
        &lt;div&gt;
          {/* ['è¿‘åœ°é“', 'éšæ—¶çœ‹æˆ¿'] */}
          {tags.map((tag, index) =&gt; {
            const tagClass = 'tag' + (index + 1)
            return (
              &lt;span
                className={[styles.tag, styles[tagClass]].join(' ')}
                key={tag}
              &gt;
                {tag}
              &lt;/span&gt;
            )
          })}
        &lt;/div&gt;
        &lt;div className={styles.price}&gt;
          &lt;span className={styles.priceNum}&gt;{price}&lt;/span&gt; å…ƒ/æœˆ
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

HouseItem.propTypes = {
  src: PropTypes.string,
  title: PropTypes.string,
  desc: PropTypes.string,
  tags: PropTypes.array.isRequired,
  price: PropTypes.number,
  onClick: PropTypes.func
}

export default HouseItem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><ul><li>ä½¿ç”¨HouseItemç»„ä»¶æ”¹é€ Mapç»„ä»¶çš„æˆ¿å±‹åˆ—è¡¨é¡¹</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>renderHousesList() {
    return this.state.housesList.map(item =&gt; (
        &lt;HouseItem
            key={item.houseCode}
            src={BASE_URL + item.houseImg}
            title={item.title}
            desc={item.desc}
            tags={item.tags}
            price={item.price}
        &gt;&lt;/HouseItem&gt;
    )
    )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>ä½¿ç”¨react-virtualizedçš„Listç»„ä»¶æ¸²æŸ“æˆ¿å±‹åˆ—è¡¨ï¼ˆå‚è€ƒCityListç»„ä»¶çš„ä½¿ç”¨ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“æ¯ä¸€è¡Œçš„å†…å®¹
renderHouseList = ({
  key, // Unique key within array of rows
  index, // ç´¢å¼•å·
  style // é‡ç‚¹å±æ€§ï¼šä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè¡Œæ•°æ·»åŠ è¯¥æ ·å¼
}) =&gt; {
  // å½“å‰è¿™ä¸€è¡Œçš„
  const { list } = this.state;
  const house = list[index];
  return (
    &lt;HouseItem
      key={key}
      style={style}
      src={BASE_URL + house.houseImg}
      title={house.title}
      desc={house.desc}
      tags={house.tags}
      price={house.price}
    /&gt;
  );
};
render(){
    return (
      &lt;div&gt;
         ...
          {/* æˆ¿å±‹åˆ—è¡¨ */}
        &lt;div className={styles.houseItems}&gt;
          &lt;List
            // ç»„ä»¶çš„å®½åº¦
            width={300}
            // ç»„ä»¶çš„é«˜åº¦
            height={300}
            rowCount={this.state.count} // Liståˆ—è¡¨é¡¹æ€»æ¡ç›®æ•°
            // æ¯è¡Œçš„é«˜åº¦
            rowHeight={120} // æ¯ä¸€è¡Œé«˜åº¦
            rowRenderer={this.renderHouseList}
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day08"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day08" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day08</h2> <p>-æˆ¿å±‹åˆ—è¡¨æ»šåŠ¨&amp;åŠ è½½æ›´å¤š&amp;å¸é¡¶åŠŸèƒ½&amp;bugå®šä½&amp;react-spring</p> <h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨</h3> <h4 id="ç›®æ ‡-12"><a href="#ç›®æ ‡-12" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿä½¿ç”¨windowScrollerç»„ä»¶è§£å†³æ•´ä¸ªé¡µé¢æ— æ³•æ»šåŠ¨çš„é—®é¢˜</li> <li>èƒ½å¤Ÿä½¿ç”¨InfiniteLoaderç»„ä»¶æ¥å®ç°åŠ è½½æ›´å¤šé€»è¾‘</li></ul> <h4 id="ä½¿ç”¨windowscroller-è·Ÿéšé¡µé¢æ»šåŠ¨-â˜…â˜…â˜…"><a href="#ä½¿ç”¨windowscroller-è·Ÿéšé¡µé¢æ»šåŠ¨-â˜…â˜…â˜…" class="header-anchor">#</a> ä½¿ç”¨<code>WindowScroller</code> è·Ÿéšé¡µé¢æ»šåŠ¨ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>**é»˜è®¤ï¼š**Listç»„ä»¶åªè®©ç»„ä»¶è‡ªèº«å‡ºç°æ»šåŠ¨æ¡ï¼Œæ— æ³•è®©æ•´ä¸ªé¡µé¢æ»šåŠ¨ï¼Œä¹Ÿå°±æ— æ³•å®ç°æ ‡é¢˜å¸é¡¶åŠŸèƒ½</li> <li>**è§£å†³æ–¹å¼ï¼š**ä½¿ç”¨WindowScrolleré«˜é˜¶ç»„ä»¶ï¼Œè®©Listç»„ä»¶è·Ÿéšé¡µé¢æ»šåŠ¨ï¼ˆä¸ºListç»„ä»¶æä¾›çŠ¶æ€ï¼ŒåŒæ—¶è¿˜éœ€è¦è®¾ç½®Listç»„ä»¶çš„autoHeightå±æ€§ï¼‰</li> <li>æ³¨æ„ï¼šWindowScrolleré«˜é˜¶ç»„ä»¶åªèƒ½æä¾›heightï¼Œæ— æ³•æä¾›width</li> <li>**è§£å†³æ–¹å¼ï¼š**åœ¨WindowScrollerç»„ä»¶ä¸­ä½¿ç”¨AutoSizeré«˜é˜¶ç»„ä»¶æ¥ä¸ºListç»„ä»¶æä¾›width</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190706140.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-O3U36MH9-1575112006302)(images/WindowScroller.png)]"></p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;WindowScroller&gt;
  {({ height, isScrolling, scrollTop }) =&gt; (
    &lt;AutoSizer&gt;
      {({ width }) =&gt; (
        &lt;List
          autoHeight // è®¾ç½®é«˜åº¦ä¸º WindowScroller æœ€ç»ˆæ¸²æŸ“çš„åˆ—è¡¨é«˜åº¦
          // ç»„ä»¶çš„å®½åº¦
          width={width} // è§†å£å®½åº¦
          // ç»„ä»¶çš„é«˜åº¦
          height={height} // è§†å£é«˜åº¦
          rowCount={this.state.count} // Liståˆ—è¡¨é¡¹æ€»æ¡ç›®æ•°
          // æ¯è¡Œçš„é«˜åº¦
          rowHeight={120} // æ¯ä¸€è¡Œé«˜åº¦
          rowRenderer={this.renderHouseList}
          isScrolling={isScrolling}
          scrollTop={scrollTop}
        /&gt;
      )}
    &lt;/AutoSizer&gt;
  )}
&lt;/WindowScroller&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="infiniteloader-ç»„ä»¶-â˜…â˜…â˜…"><a href="#infiniteloader-ç»„ä»¶-â˜…â˜…â˜…" class="header-anchor">#</a> <code>InfiniteLoader</code> ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>æ»šåŠ¨æˆ¿å±‹åˆ—è¡¨æ—¶å€™ï¼ŒåŠ¨æ€åŠ è½½æ›´å¤šæˆ¿å±‹æ•°æ®</li> <li>ä½¿ç”¨<code>InfiniteLoader</code> ç»„ä»¶ï¼Œæ¥å®ç°æ— é™æ»šåŠ¨åˆ—è¡¨ï¼Œä»è€ŒåŠ è½½æ›´å¤šæˆ¿å±‹æ•°æ®</li> <li>æ ¹æ® <code>InfiniteLoader</code> æ–‡æ¡£ç¤ºä¾‹ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190716211.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-D8h33kDP-1575112006303)(images/InfiniteLoader.png)]"></p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;InfiniteLoader
  isRowLoaded={this.isRowLoaded}
  loadMoreRows={this.loadMoreRows}
  rowCount={count}
&gt;
  {({ onRowsRendered, registerChild }) =&gt; (
    &lt;WindowScroller&gt;
      {({ height, isScrolling, scrollTop }) =&gt; (
        &lt;AutoSizer&gt;
          {({ width }) =&gt; (
            &lt;List
              onRowsRendered={onRowsRendered}
              ref={registerChild}
              autoHeight // è®¾ç½®é«˜åº¦ä¸º WindowScroller æœ€ç»ˆæ¸²æŸ“çš„åˆ—è¡¨é«˜åº¦
              // ç»„ä»¶çš„å®½åº¦
              width={width} // è§†å£å®½åº¦
              // ç»„ä»¶çš„é«˜åº¦
              height={height} // è§†å£é«˜åº¦
              rowCount={count} // Liståˆ—è¡¨é¡¹æ€»æ¡ç›®æ•°
              // æ¯è¡Œçš„é«˜åº¦
              rowHeight={120} // æ¯ä¸€è¡Œé«˜åº¦
              rowRenderer={this.renderHouseList}
              isScrolling={isScrolling}
              scrollTop={scrollTop}
            /&gt;
          )}
        &lt;/AutoSizer&gt;
      )}
    &lt;/WindowScroller&gt;
  )}
&lt;/InfiniteLoader&gt;
 // åˆ¤æ–­æ¯ä¸€è¡Œæ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•
  isRowLoaded = ({ index }) =&gt; {
    return !!this.state.list[index];
  };
  // ç”¨æ¥è·å–æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®
  // æ³¨æ„ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¹¶ä¸”ï¼Œè¿™ä¸ªå¯¹è±¡åº”è¯¥åœ¨æ•°æ®åŠ è½½å®Œæˆæ—¶ï¼Œæ¥è°ƒç”¨ resolveè®© Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºå·²å®Œæˆ
  loadMoreRows = ({ startIndex, stopIndex }) =&gt; {
    return new Promise(resolve =&gt; {
       ...
    });
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®"><a href="#åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®" class="header-anchor">#</a> åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®</h3> <ul><li>åœ¨loadMoreRowsæ–¹æ³•ä¸­ï¼Œæ ¹æ®èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•ï¼Œå‘é€è¯·æ±‚ï¼Œè·å–æ›´å¤šæˆ¿å±‹æ•°æ®</li> <li>è·å–åˆ°æœ€æ–°çš„æ•°æ®åï¼Œä¸å½“å‰listä¸­çš„æ•°æ®åˆå¹¶ï¼Œå†æ›´æ–°stateï¼Œå¹¶è°ƒç”¨Promiseçš„resolve</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>loadMoreRows = ({ startIndex, stopIndex }) =&gt; {
    return new Promise(resolve =&gt; {
      instance
        .get(&quot;/houses&quot;, {
          params: {
            cityId: value,
            ...this.filters,
            start: startIndex,
            end: stopIndex
          }
        })
        .then(res =&gt; {
          this.setState({
            list: [...this.state.list, ...res.data.body.list]
          });

          // åŠ è½½æ•°æ®å®Œæˆæ—¶ï¼Œè°ƒç”¨resolveå³å¯
          resolve();
        });
    });
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>åœ¨renderHouseListæ–¹æ³•ä¸­ï¼Œåˆ¤æ–­houseæ˜¯å¦å­˜åœ¨</li> <li>ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå°±æ¸²æŸ“ä¸€ä¸ªloadingå…ƒç´ </li> <li>å­˜åœ¨çš„æ—¶å€™ï¼Œå†æ¸²æŸ“HouseItemç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“æ¯ä¸€è¡Œçš„å†…å®¹
  renderHouseList = ({
    key, // Unique key within array of rows
    index, // ç´¢å¼•å·
    style // é‡ç‚¹å±æ€§ï¼šä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè¡Œæ•°æ·»åŠ è¯¥æ ·å¼
  }) =&gt; {
    // å½“å‰è¿™ä¸€è¡Œçš„
    const { list } = this.state;
    const house = list[index];
    // å¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦æ¸²æŸ“loadingå…ƒç´ å ä½
    if (!house) {
      return (
        &lt;div key={key} style={style}&gt;
          &lt;p className={styles.loading}&gt;&lt;/p&gt;
        &lt;/div&gt;
      );
    }
    return (
      ...
    );
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½-â˜…â˜…â˜…"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½-â˜…â˜…â˜…" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="ç›®æ ‡-13"><a href="#ç›®æ ‡-13" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿå®Œæˆå¸é¡¶çš„åŠŸèƒ½</li> <li>èƒ½å¤Ÿå°è£…é€šç”¨çš„Stickyç»„ä»¶</li></ul> <h4 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="header-anchor">#</a> å®ç°æ€è·¯</h4> <ul><li>åœ¨é¡µé¢æ»šåŠ¨çš„æ—¶å€™ï¼Œåˆ¤æ–­ç­›é€‰æ ä¸Šè¾¹æ˜¯å¦è¿˜åœ¨å¯è§†åŒºåŸŸå†…</li> <li>å¦‚æœåœ¨ï¼Œä¸éœ€è¦å¸é¡¶</li> <li>å¦‚æœä¸åœ¨ï¼Œå°±å¸é¡¶</li> <li>å¸é¡¶ä¹‹åï¼Œå…ƒç´ è„±æ ‡ï¼Œæˆ¿å±‹åˆ—è¡¨ä¼šçªç„¶å¾€ä¸Šè°ƒåŠ¨ç­›é€‰æ çš„é«˜åº¦ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè·Ÿç­›é€‰æ ç›¸åŒçš„å ä½å…ƒç´ ï¼Œåœ¨ç­›é€‰æ è„±æ ‡åï¼Œä»£æ›¿å®ƒæ’‘èµ·é«˜åº¦</li></ul> <h4 id="å®ç°æ­¥éª¤-2"><a href="#å®ç°æ­¥éª¤-2" class="header-anchor">#</a> å®ç°æ­¥éª¤</h4> <ul><li>å°è£…Stickyç»„ä»¶</li> <li>åœ¨HouseListé¡µé¢ä¸­ï¼Œå¯¼å…¥Stickyç»„ä»¶</li> <li>ä½¿ç”¨Stickyç»„ä»¶åŒ…è£¹è¦å®ç°å¸é¡¶åŠŸèƒ½çš„Filterç»„ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Sticky&gt;
  &lt;Filter onFilter={this.onFilter} /&gt;
&lt;/Sticky&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>åœ¨Stickyç»„ä»¶ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªrefå¯¹è±¡ï¼ˆplaceholderï¼Œcontentï¼‰ï¼Œåˆ†åˆ«æŒ‡å‘å ä½å…ƒç´ å’Œå†…å®¹å…ƒç´ </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>class Sticky extends Component {
  // åˆ›å»ºrefå¯¹è±¡
  placeholder = createRef()
  content = createRef()
  ...
  render() {
   return (
     &lt;div&gt;
       {/* å ä½å…ƒç´  */}
       &lt;div ref={this.placeholder} /&gt;
       {/* å†…å®¹å…ƒç´  */}
       &lt;div ref={this.content}&gt;{this.props.children}&lt;/div&gt;
     &lt;/div&gt;
   )
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>åœ¨ç»„ä»¶ä¸­ï¼Œç›‘å¬æµè§ˆå™¨çš„scrolläº‹ä»¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ç›‘å¬ scroll äº‹ä»¶
componentDidMount() {
  window.addEventListener('scroll', this.handleScroll)
}
componentWillUnmount() {
  window.removeEventListener('scroll', this.handleScroll)
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>åœ¨scrolläº‹ä»¶ä¸­ï¼Œé€šè¿‡getBoundingClientRect()æ–¹æ³•å¾—åˆ°ç­›é€‰æ å ä½å…ƒç´ å½“å‰ä½ç½®</li> <li>åˆ¤æ–­topæ˜¯å¦å°äº0ï¼ˆæ˜¯å¦åœ¨å¯è§†åŒºå†…ï¼‰</li> <li>å¦‚æœå°äºï¼Œå°±æ·»åŠ éœ€è¦å¸é¡¶æ ·å¼ï¼ˆfixedï¼‰ï¼ŒåŒæ—¶è®¾ç½®å ä½å…ƒç´ é«˜åº¦</li> <li>å¦åˆ™ï¼Œå°±ç§»é™¤å¸é¡¶æ ·å¼ï¼ŒåŒæ—¶è®©å ä½å…ƒç´ é«˜åº¦ä¸º0</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// scroll äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åº
handleScroll = () =&gt; {
  // è·å–DOMå¯¹è±¡
  const placeholderEl = this.placeholder.current
  const contentEl = this.content.current

  const { top } = placeholderEl.getBoundingClientRect()
  if (top &lt; 0) {
    // å¸é¡¶
    contentEl.classList.add(styles.fixed)
    placeholderEl.style.height = '40px'
  } else {
    // å–æ¶ˆå¸é¡¶
    contentEl.classList.remove(styles.fixed)
    placeholderEl.style.height = '0px'
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="é€šç”¨æ€§ä¼˜åŒ–"><a href="#é€šç”¨æ€§ä¼˜åŒ–" class="header-anchor">#</a> é€šç”¨æ€§ä¼˜åŒ–</h4> <ul><li>ç°åœ¨Stickyç»„ä»¶ä¸­å ä½å…ƒç´ çš„é«˜åº¦æ˜¯å†™æ­»çš„ï¼Œè¿™æ ·å°±ä¸é€šç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªé«˜åº¦é€šè¿‡å‚æ•°æ¥è¿›è¡Œä¼ é€’ï¼Œç»„ä»¶å†…éƒ¨é€šè¿‡propså°±å¯ä»¥æ¥è¿›è¡Œè·å–äº†</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// HouseListç»„ä»¶
&lt;Sticky height={40}&gt;
  &lt;Filter onFilter={this.onFilter} /&gt;
&lt;/Sticky&gt;

// Sticky ç»„ä»¶
  handleScroll = () =&gt; {
    const { height } = this.props;
    ...
    const { top } = placeholderEl.getBoundingClientRect();
    if (top &lt; 0) {
      // å¸é¡¶
      contentEl.classList.add(styles.fixed);
      placeholderEl.style.height = `${height}px`;
    } else {
      // å–æ¶ˆå¸é¡¶
      contentEl.classList.remove(styles.fixed);
      placeholderEl.style.height = &quot;0px&quot;;
    }
  };

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–-â˜…â˜…â˜…"><a href="#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–-â˜…â˜…â˜…" class="header-anchor">#</a> åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="ç›®æ ‡-14"><a href="#ç›®æ ‡-14" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>å­¦ä¹ åœ¨å·²æœ‰ä»£ç ä¸Šå¯»æ‰¾bugçš„æ€è·¯ï¼ˆå®šä½bugåŸå› ï¼Œæ€è€ƒè§£å†³åŠæ³•ï¼‰</li></ul> <h4 id="åŠ è½½æç¤º"><a href="#åŠ è½½æç¤º" class="header-anchor">#</a> åŠ è½½æç¤º</h4> <ul><li>å®ç°åŠ è½½æˆ¿æºæ•°æ®æ—¶ï¼šåŠ è½½ä¸­ã€åŠ è½½å®Œæˆçš„æç¤ºï¼ˆéœ€è¦è§£å†³ï¼šæ²¡æœ‰æˆ¿æºæ•°æ®æ—¶ï¼Œä¸å¼¹æç¤ºæ¡†ï¼‰</li> <li>åˆ¤æ–­ä¸€ä¸‹countæ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0ï¼Œå°±ä¸åŠ è½½æç¤ºä¿¡æ¯</li> <li>æ‰¾ä¸åˆ°æˆ¿æºæ•°æ®æ—¶å€™çš„æç¤ºï¼ˆéœ€è¦è§£å†³ï¼šè¿›å…¥é¡µé¢å°±å±•ç¤ºè¯¥æç¤ºçš„é—®é¢˜ï¼‰</li> <li>åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå˜é‡æ¥è¿›è¡Œè®°å½•ï¼Œç„¶ååªè¦è¿›è¡Œäº†æ•°æ®è¯·æ±‚ï¼Œå°±æŠŠè¿™ä¸ªæ ‡è¯†æ›´æ”¹</li></ul> <h3 id="æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–"><a href="#æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–" class="header-anchor">#</a> æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–</h3> <ul><li>ç‚¹å‡»æ¡ä»¶ç­›é€‰æ ï¼Œå±•ç¤ºFilterPickerç»„ä»¶æ—¶ï¼Œæ ·å¼é”™ä¹±é—®é¢˜ï¼ˆéœ€è¦è§£å†³ï¼šæ ·å¼é—®é¢˜ï¼‰</li> <li>æŠŠFilterPickerç»„ä»¶ä¿®æ”¹æˆç»å¯¹å®šä½ï¼Œè„±æ ‡äº†ï¼Œå°±ä¸ä¼šæŒ¤ä¸‹é¢çš„ç»“æ„äº†</li> <li>ä½¿ç”¨æ¡ä»¶ç­›é€‰æŸ¥è¯¢æ•°æ®æ—¶ï¼Œé¡µé¢æ²¡æœ‰å›åˆ°é¡¶éƒ¨ï¼ˆéœ€è¦è§£å†³ï¼šæ¯æ¬¡é‡æ–°å›åˆ°é¡µé¢é¡¶éƒ¨ï¼‰</li> <li>åœ¨ç‚¹å‡»æ¡ä»¶æŸ¥è¯¢ç¡®å®šæŒ‰é’®çš„æ—¶å€™ï¼Œåˆ©ç”¨window.scroll(0 ,0) æ¥å›åˆ°é¡µé¢é¡¶éƒ¨</li> <li>ç‚¹å‡»æ¡ä»¶ç­›é€‰æ ï¼Œå±•ç¤ºå¯¹è¯æ¡†åï¼Œé¡µé¢è¿˜ä¼šæ»šåŠ¨ï¼ˆéœ€è¦è§£å†³ï¼šå±•ç¤ºå¯¹è¯æ¡†åé¡µé¢ä¸æ»šåŠ¨ï¼‰</li> <li>å±•ç¤ºå¯¹è¯æ¡†çš„æ—¶å€™ï¼Œç»™bodyæ·»åŠ  overflow: hidden çš„æ ·å¼ï¼Œè¿™æ ·é¡µé¢å°±ä¸èƒ½è¿›è¡Œæ»šåŠ¨ï¼Œç­‰åˆ°å¯¹è¯æ¡†æ¶ˆå¤±çš„æ—¶å€™ï¼Œå–æ¶ˆbodyçš„ overflow: hidden æ ·å¼</li></ul> <h3 id="åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–"><a href="#åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–" class="header-anchor">#</a> åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–</h3> <ul><li>åˆ‡æ¢åŸå¸‚æˆ–ï¼Œè¯¥é¡µé¢æ— æ³•å±•ç¤ºå½“å‰å®šä½åŸå¸‚åç§°å’Œå½“å‰åŸå¸‚æˆ¿æºæ•°æ®ï¼Œåˆ·æ–°é¡µé¢åæ‰ä¼šç”Ÿæ•ˆï¼ˆéœ€è¦è§£å†³ï¼šåˆ‡æ¢åŸå¸‚åç«‹å³ç”Ÿæ•ˆï¼‰
<ul><li>åœ¨ç»„ä»¶çš„ componentDidMountæ„é€ å‡½æ•°ä¸­ï¼Œè¿›è¡Œè·å–å½“å‰å®šä½åŸå¸‚åç§°</li></ul></li></ul> <h3 id="react-springåŠ¨ç”»åº“-â˜…â˜…â˜…"><a href="#react-springåŠ¨ç”»åº“-â˜…â˜…â˜…" class="header-anchor">#</a> react-springåŠ¨ç”»åº“ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="ç›®æ ‡-15"><a href="#ç›®æ ‡-15" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>çŸ¥é“react-springç»„ä»¶åº“çš„ä¼˜åŠ¿</li> <li>èƒ½å¤Ÿå‚ç…§å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨react-springè¿›è¡Œç®€å•çš„é€æ˜åº¦å˜åŒ–çš„åŠ¨ç”»</li> <li>èƒ½å¤Ÿå®ç°é®ç½©å±‚åŠ¨ç”»æ•ˆæœ</li></ul> <h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="header-anchor">#</a> æ¦‚è¿°</h4> <ul><li><p>åœºæ™¯ï¼šå±•ç¤ºç­›é€‰å¯¹è¯æ¡†çš„æ—¶å€™ï¼Œå®ç°åŠ¨ç”»æ•ˆæœï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ</p></li> <li><p>react-springæ˜¯åŸºäºspring-physicsï¼ˆå¼¹ç°§ç‰©ç†ï¼‰çš„reactåŠ¨ç”»åº“ï¼ŒåŠ¨ç”»æ•ˆæœæ›´åŠ æµç•…ã€è‡ªç„¶</p></li> <li><p>ä¼˜åŠ¿ï¼š</p> <ul><li>å‡ ä¹å¯ä»¥å®ç°ä»»æ„UIåŠ¨ç”»æ•ˆæœ</li> <li>ç»„ä»¶å¼ä½¿ç”¨æ–¹å¼ï¼ˆrender-propsæ¨¡å¼ï¼‰ï¼Œç®€å•æ˜“ç”¨ï¼Œç¬¦åˆreactçš„å£°æ˜å¼ç‰¹æ€§ï¼Œæ€§èƒ½é«˜</li></ul></li> <li><p><a href="https://github.com/react-spring/react-spring" target="_blank" rel="noopener noreferrer">githubåœ°å€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.react-spring.io/docs/props/spring" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h4 id="åŸºæœ¬ä½¿ç”¨-2"><a href="#åŸºæœ¬ä½¿ç”¨-2" class="header-anchor">#</a> åŸºæœ¬ä½¿ç”¨</h4> <ul><li>å®‰è£…ï¼š yarn add react-spring</li> <li>æ‰“å¼€Springç»„ä»¶æ–‡æ¡£</li> <li>å¯¼å…¥Springæ–‡æ¡£ï¼Œä½¿ç”¨Springç»„ä»¶åŒ…è£¹è¦å®ç°åŠ¨ç”»æ•ˆæœçš„é®ç½©å±‚div</li> <li>é€šè¿‡render-propsæ¨¡å¼ï¼Œè®²å‚æ•°propsè®¾ç½®ä¸ºé®ç½©å±‚divçš„style</li> <li>ç»™Springç»„ä»¶æ·»åŠ fromå±æ€§ï¼ŒæŒ‡å®šï¼šç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„åŠ¨ç”»çŠ¶æ€</li> <li>ç»™Springç»„ä»¶æ·»åŠ toå±æ€§ï¼ŒæŒ‡å®šï¼šç»„ä»¶è¦æ›´æ–°çš„æ–°åŠ¨ç”»çŠ¶æ€</li> <li>propså°±æ˜¯é€æ˜åº¦æœ‰0~1ä¸­å˜åŒ–çš„å€¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190743765.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-lgEJpUau-1575112006305)(images/spring.png)]"></p> <h4 id="å®ç°é®ç½©å±‚åŠ¨ç”»"><a href="#å®ç°é®ç½©å±‚åŠ¨ç”»" class="header-anchor">#</a> å®ç°é®ç½©å±‚åŠ¨ç”»</h4> <ul><li>åˆ›å»ºæ–¹æ³• renderMaskæ¥æ¸²æŸ“é®ç½©å±‚ div</li> <li>ä¿®æ”¹æ¸²æŸ“é®ç½©å±‚çš„é€»è¾‘ï¼Œä¿è¯Springç»„ä»¶ä¸€ç›´éƒ½è¢«æ¸²æŸ“ï¼ˆSpringç»„ä»¶è¢«é”€æ¯äº†ï¼Œå°±æ— æ³•å®ç°åŠ¨ç”»æ•ˆæœï¼‰</li> <li>ä¿®æ”¹toå±æ€§çš„å€¼ï¼Œåœ¨é®ç½©å±‚éšè—æ—¶ä¸º0ï¼Œåœ¨é®ç½©å±‚å±•ç¤ºä¸º1</li> <li>åœ¨render-propsçš„å‡½æ•°å†…éƒ¨ï¼Œåˆ¤æ–­props.opacityæ˜¯å¦ç­‰äº0</li> <li>å¦‚æœç­‰äº0ï¼Œå°±è¿”å›nullï¼Œè§£å†³é®ç½©å±‚é®æŒ¡é¡µé¢å¯¼è‡´é¡¶éƒ¨ç‚¹å‡»äº‹ä»¶å¤±æ•ˆ</li> <li>å¦‚æœä¸ç­‰äº0ï¼Œæ¸²æŸ“é®ç½©å±‚div</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>renderMask() {
    const { openType } = this.state

    const isHide = openType === 'more' || openType === ''

    return (
      &lt;Spring from={{ opacity: 0 }} to={{ opacity: isHide ? 0 : 1 }}&gt;
        {props =&gt; {
          // è¯´æ˜é®ç½©å±‚å·²ç»å®ŒæˆåŠ¨ç”»æ•ˆæœï¼Œéšè—äº†
          if (props.opacity === 0) {
            return null
          }

          return (
            &lt;div
              style={props}
              className={styles.mask}
              onClick={() =&gt; this.onCancel(openType)}
            /&gt;
          )
        }}
      &lt;/Spring&gt;
    )

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day09"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day09" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day09</h2> <p>-æˆ¿å±‹è¯¦æƒ…&amp;è·¯ç”±é…ç½®&amp;ç™»å½•åŠŸèƒ½&amp;formikè¡¨å•æ ¡éªŒ</p> <h3 id="æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ"><a href="#æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ" class="header-anchor">#</a> æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ</h3> <h4 id="ç›®æ ‡-16"><a href="#ç›®æ ‡-16" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>çœ‹æ‡‚æ¨¡æ¿HouseDetailçš„ç»“æ„</li> <li>èƒ½å¤Ÿè·å–åˆ°æ•°æ®ï¼Œæ¸²æŸ“åˆ°ç»„ä»¶ä¸Š</li> <li>èƒ½å¤Ÿé…ç½®é€šç”¨è·¯ç”±è§„åˆ™ï¼Œå¹¶ä¸”è·å–è·¯ç”±å‚æ•°</li></ul> <h4 id="æ¨¡æ¿è¯´æ˜"><a href="#æ¨¡æ¿è¯´æ˜" class="header-anchor">#</a> æ¨¡æ¿è¯´æ˜</h4> <ul><li>åˆ›å»ºæˆ¿å±‹è¯¦æƒ…é¡µé¢HouseDetail</li> <li>ä¿®æ”¹NavHeaderç»„ä»¶ï¼ˆæ·»åŠ äº†classNameå’ŒrightContentä¸¤ä¸ªpropsï¼‰</li> <li>åˆ›å»ºäº†HousePackageç»„ä»¶ï¼ˆæˆ¿å±‹é…å¥—ï¼‰</li> <li>è¿™äº›æ¨¡æ¿å·²ç»æä¾›å¥½ï¼Œå¯ä»¥ç›´æ¥æ¥ä½¿ç”¨</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ·»åŠ  className å’Œ rightContentï¼ˆå¯¼èˆªæ å³ä¾§å†…å®¹ï¼‰ å±æ€§
function NavHeader({
  children,
  history,
  onLeftClick,
  className,
  rightContent
}) {
  // é»˜è®¤ç‚¹å‡»è¡Œä¸º
  const defaultHandler = () =&gt; history.go(-1)

  return (
    &lt;NavBar
      className={[styles.navBar, className || ''].join(' ')}
      mode=&quot;light&quot;
      icon={&lt;i className=&quot;iconfont icon-back&quot; /&gt;}
      onLeftClick={onLeftClick || defaultHandler}
      rightContent={rightContent}
    &gt;
      {children}
    &lt;/NavBar&gt;
  )
}

// æ·»åŠ propsæ ¡éªŒ
NavHeader.propTypes = {
  ...
  rightContent: PropTypes.array
}

// withRouter(NavHeader) å‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶
export default withRouter(NavHeader)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="è·¯ç”±å‚æ•°-â˜…â˜…â˜…"><a href="#è·¯ç”±å‚æ•°-â˜…â˜…â˜…" class="header-anchor">#</a> è·¯ç”±å‚æ•°ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>æˆ¿æºæœ‰å¤šä¸ªï¼Œé‚£ä¹ˆURLè·¯å¾„ä¹Ÿå°±æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆéœ€è¦å¤šå°‘ä¸ªè·¯ç”±è§„åˆ™æ¥åŒ¹é…å‘¢ï¼Ÿä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªï¼Ÿ</li> <li>ä½¿ç”¨ ä¸€ä¸ª è·¯ç”±è§„åˆ™åŒ¹é…ä¸åŒçš„URLè·¯å¾„ï¼ŒåŒæ—¶Iè·å–åˆ°URLä¸­ä¸åŒçš„å†…å®¹ï¼Œåˆ©ç”¨è·¯ç”±å‚æ•°æ¥è§£å†³</li> <li>è®©ä¸€ä¸ªè·¯ç”±è§„åˆ™ï¼ŒåŒæ—¶åŒ¹é…å¤šä¸ªç¬¦åˆè¯¥è§„åˆ™çš„URLè·¯å¾„</li> <li>è¯­æ³•ï¼š/detail/:id ï¼Œå…¶ä¸­:id å°±æ˜¯è·¯ç”±å‚æ•°</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190830117.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-h5ZduoEs-1575112083806)(images/è·¯ç”±å‚æ•°.png)]"></p> <ul><li>è·å–è·¯ç”±å‚æ•°ï¼š props.match.params</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190840914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-DHctc3v2-1575112083807)(images/è·å–è·¯ç”±å‚æ•°.png)]"></p> <h4 id="å±•ç¤ºæˆ¿å±‹è¯¦æƒ…-â˜…â˜…â˜…"><a href="#å±•ç¤ºæˆ¿å±‹è¯¦æƒ…-â˜…â˜…â˜…" class="header-anchor">#</a> å±•ç¤ºæˆ¿å±‹è¯¦æƒ…ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>åœ¨æ‰¾æˆ¿é¡µé¢ä¸­ï¼Œç»™æ¯ä¸€ä¸ªæˆ¿æºåˆ—è¡¨æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨ç‚¹å‡»æ—¶è·³è½¬åˆ°æˆ¿å±‹è¯¦æƒ…é¡µé¢</li> <li>åœ¨å•å‡»äº‹ä»¶ä¸­ï¼Œè·å–åˆ°å½“å‰æˆ¿å±‹id</li> <li>æ ¹æ®æˆ¿å±‹è¯¦æƒ…çš„è·¯ç”±åœ°å€ï¼Œè°ƒç”¨history.push() å®ç°è·¯ç”±è·³è½¬</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;HouseItem
  key={key}
  onClick={() =&gt; this.props.history.push(`/detail/${house.houseCode}`)}
  // æ³¨æ„ï¼šè¯¥ç»„ä»¶ä¸­åº”è¯¥æ¥æ”¶ styleï¼Œç„¶åç»™ç»„ä»¶å…ƒç´ è®¾ç½®æ ·å¼ï¼ï¼ï¼
  style={style}
  src={BASE_URL + house.houseImg}
  title={house.title}
  desc={house.desc}
  tags={house.tags}
  price={house.price}
/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>å°è£…getHouseDetailæ–¹æ³•ï¼Œåœ¨componentDidMountä¸­è°ƒç”¨è¯¥æ–¹æ³•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>componentDidMount() {
    // è·å–æˆ¿å±‹æ•°æ®
    this.getHouseDetail()
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>åœ¨æ–¹æ³•ä¸­ï¼Œé€šè¿‡è·¯ç”±å‚æ•°è·å–åˆ°å½“å‰æˆ¿å±‹id</li> <li>ä½¿ç”¨APIå‘é€è¯·æ±‚ï¼Œè·å–æˆ¿å±‹æ•°æ®ï¼Œä¿å­˜åˆ°stateä¸­</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getHouseDetail() {
  const { id } = this.props.match.params

  // å¼€å¯loading
  this.setState({
    isLoading: true
  })

  const res = await API.get(`/houses/${id}`)

  this.setState({
    houseInfo: res.data.body,
    isLoading: false
  })

  const { community, coord } = res.data.body

  // æ¸²æŸ“åœ°å›¾
  this.renderMap(community, coord)
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä½¿ç”¨æˆ¿å±‹æ•°æ®ï¼Œæ¸²æŸ“é¡µé¢</p> <ul><li>è§£æ„å‡ºéœ€è¦çš„æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const {
  isLoading,
  houseInfo: {
    community,
    title,
    price,
    roomType,
    size,
    floor,
    oriented,
    supporting,
    description
  }
} = this.state

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ¸²æŸ“å°åŒºåç§°</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* å¯¼èˆªæ  */}
&lt;NavHeader
  className={styles.navHeader}
  rightContent={[&lt;i key=&quot;share&quot; className=&quot;iconfont icon-share&quot; /&gt;]}
&gt;
  {community}
&lt;/NavHeader&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ¸²æŸ“è½®æ’­å›¾</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“è½®æ’­å›¾ç»“æ„
renderSwipers() {
  const {
    houseInfo: { houseImg }
  } = this.state

  return houseImg.map(item =&gt; (
    &lt;a key={item} href=&quot;http://itcast.cn&quot;&gt;
      &lt;img src={BASE_URL + item} alt=&quot;&quot; /&gt;
    &lt;/a&gt;
  ))
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ¸²æŸ“æ ‡ç­¾</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“æ ‡ç­¾
renderTags() {
  const {
    houseInfo: { tags }
  } = this.state

  return tags.map((item, index) =&gt; {
    // å¦‚æœæ ‡ç­¾æ•°é‡è¶…è¿‡3ä¸ªï¼Œåé¢çš„æ ‡ç­¾å°±éƒ½å±•ç¤ºä½ç¬¬ä¸‰ä¸ªæ ‡ç­¾çš„æ ·å¼
    let tagClass = ''
    if (index &gt; 2) {
      tagClass = 'tag3'
    } else {
      tagClass = 'tag' + (index + 1)
    }

    return (
      &lt;span key={item} className={[styles.tag, styles[tagClass]].join(' ')}&gt;
        {item}
      &lt;/span&gt;
    )
  })
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>æ¸²æŸ“ä»·æ ¼ï¼Œæˆ¿å‹ï¼Œé¢ç§¯ç­‰</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Flex className={styles.infoPrice}&gt;
  &lt;Flex.Item className={styles.infoPriceItem}&gt;
    &lt;div&gt;
      {price}
      &lt;span className={styles.month}&gt;/æœˆ&lt;/span&gt;
    &lt;/div&gt;
    &lt;div&gt;ç§Ÿé‡‘&lt;/div&gt;
  &lt;/Flex.Item&gt;
  &lt;Flex.Item className={styles.infoPriceItem}&gt;
    &lt;div&gt;{roomType}&lt;/div&gt;
    &lt;div&gt;æˆ¿å‹&lt;/div&gt;
  &lt;/Flex.Item&gt;
  &lt;Flex.Item className={styles.infoPriceItem}&gt;
    &lt;div&gt;{size}å¹³ç±³&lt;/div&gt;
    &lt;div&gt;é¢ç§¯&lt;/div&gt;
  &lt;/Flex.Item&gt;
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æ¸²æŸ“è£…ä¿®ï¼Œæ¥¼å±‚ï¼Œæœå‘ç­‰</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;Flex className={styles.infoBasic} align=&quot;start&quot;&gt;
   &lt;Flex.Item&gt;
     &lt;div&gt;
       &lt;span className={styles.title}&gt;è£…ä¿®ï¼š&lt;/span&gt;
       ç²¾è£…
     &lt;/div&gt;
     &lt;div&gt;
       &lt;span className={styles.title}&gt;æ¥¼å±‚ï¼š&lt;/span&gt;
       {floor}
     &lt;/div&gt;
   &lt;/Flex.Item&gt;
   &lt;Flex.Item&gt;
     &lt;div&gt;
       &lt;span className={styles.title}&gt;æœå‘ï¼š&lt;/span&gt;
       {oriented.join('ã€')}
     &lt;/div&gt;
     &lt;div&gt;
       &lt;span className={styles.title}&gt;ç±»å‹ï¼š&lt;/span&gt;æ™®é€šä½å®…
     &lt;/div&gt;
   &lt;/Flex.Item&gt;
 &lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>æ¸²æŸ“åœ°å›¾</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ¸²æŸ“åœ°å›¾
renderMap(community, coord) {
  const { latitude, longitude } = coord

  const map = new BMap.Map('map')
  const point = new BMap.Point(longitude, latitude)
  map.centerAndZoom(point, 17)

  const label = new BMap.Label('', {
    position: point,
    offset: new BMap.Size(0, -36)
  })

  label.setStyle(labelStyle)
  label.setContent(`
    &lt;span&gt;${community}&lt;/span&gt;
    &lt;div class=&quot;${styles.mapArrow}&quot;&gt;&lt;/div&gt;
  `)
  map.addOverlay(label)
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æ¸²æŸ“æˆ¿å±‹é…å¥—</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code> {/* æˆ¿å±‹é…å¥— */}
 &lt;div className={styles.about}&gt;
   &lt;div className={styles.houseTitle}&gt;æˆ¿å±‹é…å¥—&lt;/div&gt;
   {/* åˆ¤æ–­æ˜¯å¦æœ‰æ•°æ® */}
   {supporting.length === 0 ? (
     &lt;div className={styles.titleEmpty}&gt;æš‚æ— æ•°æ®&lt;/div&gt;
   ) : (
     &lt;HousePackage list={supporting} /&gt;
   )}
 &lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ¸²æŸ“æˆ¿å±‹æ¦‚å†µ</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className={styles.set}&gt;
  &lt;div className={styles.houseTitle}&gt;æˆ¿æºæ¦‚å†µ&lt;/div&gt;
  &lt;div&gt;
    &lt;div className={styles.contact}&gt;
      &lt;div className={styles.user}&gt;
        &lt;img src={BASE_URL + '/img/avatar.png'} alt=&quot;å¤´åƒ&quot; /&gt;
        &lt;div className={styles.useInfo}&gt;
          &lt;div&gt;ç‹å¥³å£«&lt;/div&gt;
          &lt;div className={styles.userAuth}&gt;
            &lt;i className=&quot;iconfont icon-auth&quot; /&gt;
            å·²è®¤è¯æˆ¿ä¸»
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;span className={styles.userMsg}&gt;å‘æ¶ˆæ¯&lt;/span&gt;
    &lt;/div&gt;

    &lt;div className={styles.descText}&gt;
      {description || 'æš‚æ— æˆ¿å±‹æè¿°'}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>æ¸²æŸ“æ¨èï¼Œå¯ä»¥å¤ç”¨ HouseItemç»„ä»¶</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className={styles.recommend}&gt;
  &lt;div className={styles.houseTitle}&gt;çŒœä½ å–œæ¬¢&lt;/div&gt;
  &lt;div className={styles.items}&gt;
    {recommendHouses.map(item =&gt; (
      &lt;HouseItem {...item} key={item.id} /&gt;
    ))}
  &lt;/div&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-å°ç»“"><a href="#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-å°ç»“" class="header-anchor">#</a> å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸­ï¼‰å°ç»“</h3> <ul><li>åœ°å›¾æ‰¾æˆ¿æ¨¡å—ï¼šç™¾åº¦åœ°å›¾APIï¼Œåœ°å›¾è¦†ç›–ç‰©ï¼ŒCSS Modulesè§£å†³æ ·å¼è¦†ç›–é—®é¢˜ï¼Œè„šæ‰‹æ¶ç¯å¢ƒå˜é‡ï¼Œaxioså…¬å…±URLé…ç½®</li> <li>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—ï¼šæ¡ä»¶ç­›é€‰ç»„ä»¶å°è£…ï¼ˆå˜åŒ–ç‚¹ï¼‰ï¼Œæˆ¿æºåˆ—è¡¨ï¼Œreact-virtualizedï¼ˆInfiniteLoaderï¼ŒWindowScrollerï¼‰ï¼Œreact-springåŠ¨ç”»åº“</li> <li>æˆ¿å±‹è¯¦æƒ…æ¨¡å—ï¼šè·¯ç”±å‚æ•°ï¼ˆ/:id å’Œ props.match.paramsï¼‰ï¼Œå±•ç¤ºæˆ¿å±‹è¯¦æƒ…</li></ul> <h3 id="ç™»å½•æ¨¡å—-â˜…â˜…â˜…"><a href="#ç™»å½•æ¨¡å—-â˜…â˜…â˜…" class="header-anchor">#</a> ç™»å½•æ¨¡å—ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="ç›®æ ‡-17"><a href="#ç›®æ ‡-17" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿçœ‹æ‡‚ç™»å½•é¡µé¢çš„æ¨¡æ¿ç»“æ„(/Login/index.js)</li> <li>èƒ½å¤ŸæŠŠæ–‡æœ¬æ¡†å’Œå¯†ç æ¡†è®¾ç½®ä¸ºå—æ§ç»„ä»¶</li> <li>èƒ½å¤Ÿç»™formè¡¨å•ç»‘å®šonSubmitäº‹ä»¶ï¼Œå–æ¶ˆé»˜è®¤è¡Œä¸º</li> <li>èƒ½å¤Ÿè·å–ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚æœåŠ¡å™¨ï¼Œä¿å­˜token</li> <li>èƒ½å¤Ÿè¯´å‡ºtokençš„ä½œç”¨</li></ul> <h4 id="åŠŸèƒ½åˆ†æ-4"><a href="#åŠŸèƒ½åˆ†æ-4" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>ç”¨æˆ·ç™»å½•</li> <li>æˆ‘çš„é¡µé¢</li> <li>å°è£…è·¯ç”±è®¿é—®æ§åˆ¶ç»„ä»¶</li></ul> <h4 id="ç”¨æˆ·ç™»å½•"><a href="#ç”¨æˆ·ç™»å½•" class="header-anchor">#</a> ç”¨æˆ·ç™»å½•</h4> <p><img src="https://img-blog.csdnimg.cn/2019113019091325.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-F6Kke93L-1575112083810)(images/ç™»å½•é¡µé¢.jpg)]"></p> <p>å¯¹åº”ç»“æ„:</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className={styles.root}&gt;
  {/* é¡¶éƒ¨å¯¼èˆª */}
  &lt;NavHeader className={styles.navHeader}&gt;è´¦å·ç™»å½•&lt;/NavHeader&gt;
  &lt;WhiteSpace size=&quot;xl&quot; /&gt;

  {/* ç™»å½•è¡¨å• */}
  &lt;WingBlank&gt;
    &lt;form&gt;
      &lt;div className={styles.formItem}&gt;
        &lt;input
          className={styles.input}
          name=&quot;username&quot;
          placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot;
        /&gt;
      &lt;/div&gt;
      {/* é•¿åº¦ä¸º5åˆ°8ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ */}
      {/* &lt;div className={styles.error}&gt;è´¦å·ä¸ºå¿…å¡«é¡¹&lt;/div&gt; */}
      &lt;div className={styles.formItem}&gt;
        &lt;input
          className={styles.input}
          name=&quot;password&quot;
          type=&quot;password&quot;
          placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;
        /&gt;
      &lt;/div&gt;
      {/* é•¿åº¦ä¸º5åˆ°12ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ */}
      {/* &lt;div className={styles.error}&gt;è´¦å·ä¸ºå¿…å¡«é¡¹&lt;/div&gt; */}
      &lt;div className={styles.formSubmit}&gt;
        &lt;button className={styles.submit} type=&quot;submit&quot;&gt;
          ç™» å½•
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
    &lt;Flex className={styles.backHome}&gt;
      &lt;Flex.Item&gt;
        &lt;Link to=&quot;/registe&quot;&gt;è¿˜æ²¡æœ‰è´¦å·ï¼Œå»æ³¨å†Œ~&lt;/Link&gt;
      &lt;/Flex.Item&gt;
    &lt;/Flex&gt;
  &lt;/WingBlank&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>åŠŸèƒ½å®ç°ï¼š</p> <ul><li>æ·»åŠ çŠ¶æ€ï¼šusernameå’Œpassword</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    username: '',
    password: ''
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ä½¿ç”¨å—æ§ç»„ä»¶æ–¹å¼è·å–è¡¨å•å…ƒç´ å€¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>getUserName = e =&gt; {
  this.setState({
    username: e.target.value
  })
}

getPassword = e =&gt; {
  this.setState({
    password: e.target.value
  })
}
render() {
    const { username, password } = this.state

    return (
      &lt;div className={styles.root}&gt;
        ...

        {/* ç™»å½•è¡¨å• */}
        &lt;WingBlank&gt;
          &lt;form onSubmit={this.handleSubmit}&gt;
            &lt;div className={styles.formItem}&gt;
              &lt;input
                className={styles.input}
                value={username}
                onChange={this.getUserName}
                name=&quot;username&quot;
                placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot;
              /&gt;
            &lt;/div&gt;
            {/* é•¿åº¦ä¸º5åˆ°8ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ */}
            {/* &lt;div className={styles.error}&gt;è´¦å·ä¸ºå¿…å¡«é¡¹&lt;/div&gt; */}
            &lt;div className={styles.formItem}&gt;
              &lt;input
                className={styles.input}
                value={password}
                onChange={this.getPassword}
                name=&quot;password&quot;
                type=&quot;password&quot;
                placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;
              /&gt;
            &lt;/div&gt;
            ...
      &lt;/div&gt;
    )
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><ul><li>ç»™formè¡¨å•æ·»åŠ  onSubmit</li> <li>åˆ›å»ºæ–¹æ³• handleSubmitï¼Œå®ç°è¡¨å•æäº¤</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// è¡¨å•æäº¤äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åº
handleSubmit = async e =&gt; {
  // é˜»æ­¢è¡¨å•æäº¤æ—¶çš„é»˜è®¤è¡Œä¸º
  e.preventDefault()
  ...
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>åœ¨æ–¹æ³•ä¸­ï¼Œé€šè¿‡usernameå’Œpasswordè·å–åˆ°è´¦å·å’Œå¯†ç </li> <li>ä½¿ç”¨APIè°ƒç”¨ç™»å½•æ¥å£ï¼Œå°†usernameå’Œpasswordä½œä¸ºå‚æ•°</li> <li>åˆ¤æ–­è¿”å›å€¼statusä¸º200æ—¶å€™ï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸ</li> <li>ç™»å½•æˆåŠŸåï¼Œå°†tokenä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ä¸­ï¼ˆhkzf_tokenï¼‰</li> <li>è¿”å›ç™»å½•å‰çš„é¡µé¢</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// è¡¨å•æäº¤äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åº
handleSubmit = async e =&gt; {
  // é˜»æ­¢è¡¨å•æäº¤æ—¶çš„é»˜è®¤è¡Œä¸º
  e.preventDefault()

  // è·å–è´¦å·å’Œå¯†ç 
  const { username, password } = this.state

  // console.log('è¡¨å•æäº¤äº†', username, password)
  // å‘é€è¯·æ±‚
  const res = await API.post('/user/login', {
    username,
    password
  })

  console.log('ç™»å½•ç»“æœï¼š', res)
  const { status, body, description } = res.data

  if (status === 200) {
    // ç™»å½•æˆåŠŸ
    localStorage.setItem('hkzf_token', body.token)
    this.props.history.go(-1)
  } else {
    // ç™»å½•å¤±è´¥
    Toast.info(description, 2, null, false)
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="è¡¨å•éªŒè¯è¯´æ˜"><a href="#è¡¨å•éªŒè¯è¯´æ˜" class="header-anchor">#</a> è¡¨å•éªŒè¯è¯´æ˜</h3> <ul><li>è¡¨å•æäº¤å‰ï¼Œéœ€è¦å…ˆè¿›æ€§è¡¨å•éªŒè¯ï¼ŒéªŒè¯é€šè¿‡åå†æäº¤è¡¨å•</li> <li>æ–¹å¼ä¸€ï¼šantd-mobile ç»„ä»¶åº“çš„æ–¹å¼ï¼ˆéœ€è¦InputItemæ–‡æœ¬è¾“å…¥ç»„ä»¶ï¼‰</li> <li>æ¨èï¼šä½¿ç”¨æ›´é€šç”¨çš„ formikï¼ŒReactä¸­ä¸“é—¨ç”¨æ¥è¿›è¡Œè¡¨å•å¤„ç†å’Œè¡¨å•æ ¡éªŒçš„åº“</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190934914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-gGb3kQJK-1575112083814)(images/è¡¨å•éªŒè¯.png)]"></p> <h3 id="formik"><a href="#formik" class="header-anchor">#</a> formik</h3> <h4 id="ç›®æ ‡-18"><a href="#ç›®æ ‡-18" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>çŸ¥é“formikçš„ä½œç”¨</li> <li>èƒ½å¤Ÿå‚ç…§æ–‡æ¡£æ¥å®ç°ç®€å•çš„è¡¨å•æ ¡éªŒ</li> <li>èƒ½å¤Ÿç»™ç™»å½•åŠŸèƒ½æ·»åŠ è¡¨å•æ ¡éªŒ</li> <li>èƒ½å¤Ÿä½¿ç”¨formikä¸­æä¾›çš„ç»„ä»¶ï¼šForm, Field, ErrorMessageï¼Œæ¥å¯¹ç™»å½•æ¨¡å—è¿›è¡Œä¼˜åŒ–</li></ul> <h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="header-anchor">#</a> ä»‹ç»</h4> <ul><li>Githubåœ°å€ï¼šformikæ–‡æ¡£</li> <li>åœºæ™¯ï¼šè¡¨å•å¤„ç†ï¼Œè¡¨å•éªŒè¯</li> <li>ä¼˜åŠ¿ï¼šè½»æ¾å¤„ç†Reactä¸­çš„å¤æ‚è¡¨å•ï¼ŒåŒ…æ‹¬ï¼šè·å–è¡¨å•å…ƒç´ çš„å€¼ï¼Œè¡¨å•éªŒè¯å’Œé”™è¯¯ä¿¡æ¯ï¼Œå¤„ç†è¡¨å•æäº¤ï¼Œå¹¶ä¸”å°†è¿™äº›å†…å®¹æ”¾åœ¨ä¸€èµ·ç»Ÿä¸€å¤„ç†ï¼Œæœ‰åˆ©äºä»£ç é˜…è¯»ï¼Œé‡æ„ï¼Œæµ‹è¯•ç­‰</li> <li>ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š1. é«˜é˜¶ç»„ä»¶ï¼ˆwithFormikï¼‰ 2. render-propsï¼ˆ&lt;Formik render={() =&gt; {}} /&gt;ï¼‰</li></ul> <h3 id="formikæ¥å®ç°è¡¨å•æ ¡éªŒ-â˜…â˜…â˜…"><a href="#formikæ¥å®ç°è¡¨å•æ ¡éªŒ-â˜…â˜…â˜…" class="header-anchor">#</a> formikæ¥å®ç°è¡¨å•æ ¡éªŒï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="é‡æ„"><a href="#é‡æ„" class="header-anchor">#</a> é‡æ„</h4> <ul><li>å®‰è£…ï¼š yarn add formik</li> <li>å¯¼å…¥ withFormikï¼Œä½¿ç”¨withFormit é«˜é˜¶ç»„ä»¶åŒ…è£¹Loginç»„ä»¶</li> <li>ä¸ºwithFormitæä¾›é…ç½®å¯¹è±¡ï¼š mapPropsToValues / handleSubmit</li> <li>åœ¨Loginç»„ä»¶ä¸­ï¼Œé€šè¿‡propsè·å–åˆ°valuesï¼ˆè¡¨å•å…ƒç´ å€¼å¯¹è±¡ï¼‰ï¼ŒhandleSubmitï¼ŒhandleChange</li> <li>ä½¿ç”¨valuesæä¾›çš„å€¼ï¼Œè®¾ç½®ä¸ºè¡¨å•å…ƒç´ çš„valueï¼Œä½¿ç”¨handleChangeè®¾ç½®ä¸ºè¡¨å•å…ƒç´ çš„onChange</li> <li>ä½¿ç”¨handleSubmitè®¾ç½®ä¸ºè¡¨å•çš„onSubmit</li> <li>åœ¨handleSubmitä¸­ï¼Œé€šè¿‡valuesè·å–åˆ°è¡¨å•å…ƒç´ å€¼</li> <li>åœ¨handleSubmitä¸­ï¼Œå®Œæˆç™»å½•é€»è¾‘</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130190953938.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-O7eld3iA-1575112083815)(images/formitç»„ä»¶ä½¿ç”¨.png)]"></p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// Loginç»„ä»¶ä¸­
render() {
  // const { username, password } = this.state

  // é€šè¿‡ props è·å–é«˜é˜¶ç»„ä»¶ä¼ é€’è¿›æ¥çš„å±æ€§
  const { values, handleSubmit, handleChange } = this.props

  return (
    &lt;div className={styles.root}&gt;
      {/* é¡¶éƒ¨å¯¼èˆª */}
      &lt;NavHeader className={styles.navHeader}&gt;è´¦å·ç™»å½•&lt;/NavHeader&gt;
      &lt;WhiteSpace size=&quot;xl&quot; /&gt;

      {/* ç™»å½•è¡¨å• */}
      &lt;WingBlank&gt;
        &lt;form onSubmit={handleSubmit}&gt;
          &lt;div className={styles.formItem}&gt;
            &lt;input
              className={styles.input}
              value={values.username}
              onChange={handleChange}
              name=&quot;username&quot;
              placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot;
            /&gt;
          &lt;/div&gt;
          {/* é•¿åº¦ä¸º5åˆ°8ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ */}
          {/* &lt;div className={styles.error}&gt;è´¦å·ä¸ºå¿…å¡«é¡¹&lt;/div&gt; */}
          &lt;div className={styles.formItem}&gt;
            &lt;input
              className={styles.input}
              value={values.password}
              onChange={handleChange}
              name=&quot;password&quot;
              type=&quot;password&quot;
              placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;
            /&gt;
          &lt;/div&gt;
          {/* é•¿åº¦ä¸º5åˆ°12ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ */}
          {/* &lt;div className={styles.error}&gt;è´¦å·ä¸ºå¿…å¡«é¡¹&lt;/div&gt; */}
          &lt;div className={styles.formSubmit}&gt;
            &lt;button className={styles.submit} type=&quot;submit&quot;&gt;
              ç™» å½•
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/form&gt;
        &lt;Flex className={styles.backHome}&gt;
          &lt;Flex.Item&gt;
            &lt;Link to=&quot;/registe&quot;&gt;è¿˜æ²¡æœ‰è´¦å·ï¼Œå»æ³¨å†Œ~&lt;/Link&gt;
          &lt;/Flex.Item&gt;
        &lt;/Flex&gt;
      &lt;/WingBlank&gt;
    &lt;/div&gt;
  )
}

// ä½¿ç”¨ withFormik é«˜é˜¶ç»„ä»¶åŒ…è£… Login ç»„ä»¶ï¼Œä¸º Login ç»„ä»¶æä¾›å±æ€§å’Œæ–¹æ³•
Login = withFormik({
  // æä¾›çŠ¶æ€ï¼š
  mapPropsToValues: () =&gt; ({ username: '', password: '' }),
  // è¡¨å•çš„æäº¤äº‹ä»¶
  handleSubmit: async (values, { props }) =&gt; {
    // è·å–è´¦å·å’Œå¯†ç 
    const { username, password } = values

    // å‘é€è¯·æ±‚
    const res = await API.post('/user/login', {
      username,
      password
    })

    console.log('ç™»å½•ç»“æœï¼š', res)
    const { status, body, description } = res.data

    if (status === 200) {
      // ç™»å½•æˆåŠŸ
      localStorage.setItem('hkzf_token', body.token)

      // æ³¨æ„ï¼šæ— æ³•åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œé€šè¿‡ this æ¥è·å–åˆ°è·¯ç”±ä¿¡æ¯
      // æ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡ ç¬¬äºŒä¸ªå¯¹è±¡å‚æ•°ä¸­è·å–åˆ° props æ¥ä½¿ç”¨ props
      props.history.go(-1)
    } else {
      // ç™»å½•å¤±è´¥
      Toast.info(description, 2, null, false)
    }
  }
})(Login)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h4 id="ä¸¤ç§è¡¨å•éªŒè¯æ–¹å¼"><a href="#ä¸¤ç§è¡¨å•éªŒè¯æ–¹å¼" class="header-anchor">#</a> ä¸¤ç§è¡¨å•éªŒè¯æ–¹å¼</h4> <p>ä¸¤ç§æ–¹å¼</p> <ul><li>é€šè¿‡validate é…ç½®æ‰‹åŠ¨æ ¡éªŒ</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191019928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Cpdbd8f2-1575112083817)(images/validate.png)]"></p> <p>é€šè¿‡ validationSchema é…ç½®é¡¹é…åˆYupæ¥æ ¡éªŒ</p> <p><img src="https://img-blog.csdnimg.cn/20191130191033249.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-nWKqpJwp-1575112083818)(images/validationSchema.png)]"></p> <ul><li>æ¨èï¼š validationSchemaé…åˆYupçš„æ–¹å¼è¿›è¡Œè¡¨å•æ ¡éªŒ</li></ul> <h4 id="ç»™ç™»å½•åŠŸèƒ½æ·»åŠ è¡¨å•éªŒè¯"><a href="#ç»™ç™»å½•åŠŸèƒ½æ·»åŠ è¡¨å•éªŒè¯" class="header-anchor">#</a> ç»™ç™»å½•åŠŸèƒ½æ·»åŠ è¡¨å•éªŒè¯</h4> <ul><li>å®‰è£…ï¼š yarn add yup ï¼ˆ<a href="https://github.com/jquense/yup" target="_blank" rel="noopener noreferrer">Yup æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œå¯¼å…¥Yup</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å¯¼å…¥Yup
import * as Yup from 'yup'

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>åœ¨ withFormik ä¸­æ·»åŠ é…ç½®é¡¹ validationSchemaï¼Œä½¿ç”¨ Yup æ·»åŠ è¡¨å•æ ¡éªŒè§„åˆ™</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191050562.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-kv5wGwE4-1575112083819)(images/è¡¨å•æ ¡éªŒè§„åˆ™.png)]"></p> <ul><li>åœ¨ Login ç»„ä»¶ä¸­ï¼Œé€šè¿‡ props è·å–åˆ° errorsï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰å’Œ touchedï¼ˆæ˜¯å¦è®¿é—®è¿‡ï¼Œæ³¨æ„ï¼šéœ€è¦ç»™è¡¨å•å…ƒç´ æ·»åŠ  handleBlur å¤„ç†å¤±ç„¦ç‚¹äº‹ä»¶æ‰ç”Ÿæ•ˆï¼ï¼‰</li> <li>åœ¨è¡¨å•å…ƒç´ ä¸­é€šè¿‡è¿™ä¸¤ä¸ªå¯¹è±¡å±•ç¤ºè¡¨å•æ ¡éªŒé”™è¯¯ä¿¡</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191106724.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-sDCiUDgD-1575112083821)(images/è¡¨å•æ ¡éªŒ-é”™è¯¯.png)]"></p> <p>ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ä½¿ç”¨ withFormik é«˜é˜¶ç»„ä»¶åŒ…è£… Login ç»„ä»¶ï¼Œä¸º Login ç»„ä»¶æä¾›å±æ€§å’Œæ–¹æ³•
Login = withFormik({
  ...
  // æ·»åŠ è¡¨å•æ ¡éªŒè§„åˆ™
  validationSchema: Yup.object().shape({
    username: Yup.string()
      .required('è´¦å·ä¸ºå¿…å¡«é¡¹')
      .matches(REG_UNAME, 'é•¿åº¦ä¸º5åˆ°8ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿'),
    password: Yup.string()
      .required('å¯†ç ä¸ºå¿…å¡«é¡¹')
      .matches(REG_PWD, 'é•¿åº¦ä¸º5åˆ°12ä½ï¼Œåªèƒ½å‡ºç°æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿')
  }),
  ...
})(Login)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨ç»“æ„ä¸­éœ€è¦æ¸²æŸ“é”™è¯¯ä¿¡æ¯ï¼š</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* ç™»å½•è¡¨å• */}
&lt;WingBlank&gt;
  &lt;form onSubmit={handleSubmit}&gt;
    ...  ç”¨æˆ·åçš„é”™è¯¯æç¤º
    {errors.username &amp;&amp; touched.username &amp;&amp; (
      &lt;div className={styles.error}&gt;{errors.username}&lt;/div&gt;
    )}
    ... å¯†ç æ¡†çš„é”™è¯¯æç¤º
    {errors.password &amp;&amp; touched.password &amp;&amp; (
      &lt;div className={styles.error}&gt;{errors.password}&lt;/div&gt;
    )}
    ...
&lt;/WingBlank&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="ç®€å•å¤„ç†"><a href="#ç®€å•å¤„ç†" class="header-anchor">#</a> ç®€å•å¤„ç†</h4> <ul><li>å¯¼å…¥ Formç»„ä»¶ï¼Œæ›¿æ¢formå…ƒç´ ï¼Œå»æ‰onSubmit</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191121473.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-BhWrDyQZ-1575112083822)(images/formç»„ä»¶.png)]"></p> <ul><li>å¯¼å…¥Fieldç»„ä»¶ï¼Œæ›¿æ¢inputè¡¨å•å…ƒç´ ï¼Œå»æ‰onChangeï¼ŒonBlurï¼Œvalue</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191141556.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-KZpJpist-1575112083823)(images/field.png)]"></p> <ul><li>å¯¼å…¥ ErrorMessage ç»„ä»¶ï¼Œæ›¿æ¢åŸæ¥çš„é”™è¯¯æ¶ˆæ¯é€»è¾‘ä»£ç </li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191151604.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-5pOIR3IO-1575112083824)(images/ErrorMessage.png)]"></p> <ul><li>å»æ‰æ‰€æœ‰ props</li></ul> <p>ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å¯¼å…¥withFormik
import { withFormik, Form, Field, ErrorMessage } from 'formik'

&lt;Form&gt;
  {/* è´¦å· */}
  &lt;div className={styles.formItem}&gt;
    &lt;Field
      className={styles.input}
      name=&quot;username&quot;
      placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot;
    /&gt;
  &lt;/div&gt;
  &lt;ErrorMessage
    className={styles.error}
    name=&quot;username&quot;
    component=&quot;div&quot;
  /&gt;
  {/* å¯†ç  */}
  &lt;div className={styles.formItem}&gt;
    &lt;Field
      className={styles.input}
      name=&quot;password&quot;
      type=&quot;password&quot;
      placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;
    /&gt;
  &lt;/div&gt;
  &lt;ErrorMessage
    className={styles.error}
    name=&quot;password&quot;
    component=&quot;div&quot;
  /&gt;
  &lt;div className={styles.formSubmit}&gt;
    &lt;button className={styles.submit} type=&quot;submit&quot;&gt;
      ç™» å½•
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/Form&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day10"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day10" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day10</h2> <p>-æ£€æµ‹æ˜¯å¦ç™»&amp;é€€å‡º&amp;axiosæ‹¦æˆªå™¨&amp;é‰´æƒè·¯ç”±&amp;æ”¶è—æ¨¡å—</p> <h3 id="æˆ‘çš„é¡µé¢"><a href="#æˆ‘çš„é¡µé¢" class="header-anchor">#</a> æˆ‘çš„é¡µé¢</h3> <h4 id="ç›®æ ‡-19"><a href="#ç›®æ ‡-19" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>æˆ‘çš„é¡µé¢èƒ½å¤Ÿå®ç°åˆ¤æ–­ç”¨æˆ·ç™»å½•çŠ¶æ€æ¥æ˜¾ç¤ºä¸åŒçš„æ•ˆæœ</li> <li>èƒ½å¤Ÿå®ç°é€€å‡ºç™»å½•åŠŸèƒ½</li></ul> <h4 id="ç»“æ„å’Œæ ·å¼"><a href="#ç»“æ„å’Œæ ·å¼" class="header-anchor">#</a> ç»“æ„å’Œæ ·å¼</h4> <ul><li>å¯¹åº”çš„ç»“æ„æ ·å¼å¯ä»¥ç›´æ¥æ‹¿è¿‡æ¥ç”¨ï¼Œæˆ‘ä»¬æœ€ä¸»è¦è¦å®ç°é‡Œé¢çš„ä»£ç é€»è¾‘ï¼Œæ–‡ä»¶åœ¨ pages/Profile/index</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>render() {
    return (
      &lt;div className={styles.root}&gt;
        {/* ä¸ªäººä¿¡æ¯ */}
        &lt;div className={styles.title}&gt;
          &lt;img
            className={styles.bg}
            src={BASE_URL + '/img/profile/bg.png'}
            alt=&quot;èƒŒæ™¯å›¾&quot;
          /&gt;
          &lt;div className={styles.info}&gt;
            &lt;div className={styles.myIcon}&gt;
              &lt;img
                className={styles.avatar}
                src={avatar || DEFAULT_AVATAR}
                alt=&quot;icon&quot;
              /&gt;
            &lt;/div&gt;
            &lt;div className={styles.user}&gt;
              &lt;div className={styles.name}&gt;{nickname || 'æ¸¸å®¢'}&lt;/div&gt;
              {/* ç™»å½•åå±•ç¤ºï¼š */}
              {isLogin ? (
                &lt;&gt;
                  &lt;div className={styles.auth}&gt;
                    &lt;span onClick={this.logout}&gt;é€€å‡º&lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className={styles.edit}&gt;
                    ç¼–è¾‘ä¸ªäººèµ„æ–™
                    &lt;span className={styles.arrow}&gt;
                      &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/&gt;
              ) : (
                &lt;div className={styles.edit}&gt;
                  &lt;Button
                    type=&quot;primary&quot;
                    size=&quot;small&quot;
                    inline
                    onClick={() =&gt; history.push('/login')}
                  &gt;
                    å»ç™»å½•
                  &lt;/Button&gt;
                &lt;/div&gt;
              )}
              {/* æœªç™»å½•å±•ç¤ºï¼š */}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        {/* ä¹å®«æ ¼èœå• */}
        &lt;Grid
          data={menus}
          // åˆ—æ•°
          columnNum={3}
          // ä¸éœ€è¦åˆ†å‰²çº¿
          hasLine={false}
          // æ¸²æŸ“æ¯ä¸€é¡¹
          renderItem={item =&gt;
            item.to ? (
              &lt;Link to={item.to}&gt;
                &lt;div className={styles.menuItem}&gt;
                  &lt;i className={`iconfont ${item.iconfont}`} /&gt;
                  &lt;span&gt;{item.name}&lt;/span&gt;
                &lt;/div&gt;
              &lt;/Link&gt;
            ) : (
              &lt;div className={styles.menuItem}&gt;
                &lt;i className={`iconfont ${item.iconfont}`} /&gt;
                &lt;span&gt;{item.name}&lt;/span&gt;
              &lt;/div&gt;
            )
          }
        /&gt;
        {/* åŠ å…¥æˆ‘ä»¬ */}
        &lt;div className={styles.ad}&gt;
          &lt;img src={BASE_URL + '/img/profile/join.png'} alt=&quot;&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h4 id="åŠŸèƒ½åˆ†æ-5"><a href="#åŠŸèƒ½åˆ†æ-5" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼ˆæœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦æœ‰tokenä¿¡æ¯ï¼Œç›´æ¥è°ƒç”¨isAuth() æ–¹æ³•å³å¯ï¼Œè¿™é‡Œåœ¨utils/auth.jsæ–‡ä»¶ä¸­å·²ç»å°è£…å¥½äº†ï¼‰</li> <li>å¦‚æœç™»å½•äº†ï¼Œå°±å‘é€è¯·æ±‚è·å–ä¸ªäººèµ„æ–™ï¼Œå¹¶ä¸”åœ¨é¡µé¢ä¸­å±•ç¤ºä¸ªäººèµ„æ–™</li> <li>å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™ä¸è·å–ä¸ªäººèµ„æ–™ï¼Œåªåœ¨é¡µé¢ä¸­å±•ç¤ºæœªç™»å½•ä¿¡æ¯</li> <li>åœ¨é¡µé¢ä¸­å±•ç¤ºç™»å½•æˆ–æœªç™»å½•ä¿¡æ¯ï¼Œå°±è¦é€šè¿‡stateå˜åŒ–æ¥ä½“ç°ï¼Œå› æ­¤ï¼Œéœ€è¦ä¸€ä¸ªæ ‡ç¤ºæ˜¯å¦ç™»å½•çš„çŠ¶æ€</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191538974.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-eoLDgk6k-1575112340073)(images/æˆ‘çš„é¡µé¢åŠŸèƒ½åˆ†æ.png)]"></p> <h3 id="åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤-â˜…â˜…â˜…"><a href="#åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤-â˜…â˜…â˜…" class="header-anchor">#</a> åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>åœ¨stateä¸­æ·»åŠ ä¸¤ä¸ªçŠ¶æ€ï¼šisLoginï¼ˆæ˜¯å¦ç™»å½•ï¼‰å’ŒuserInfoï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  state = {
    // æ˜¯å¦ç™»å½•
    isLogin: isAuth(),
    // ç”¨æˆ·ä¿¡æ¯
    userInfo: {
      avatar: '',
      nickname: ''
    }
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>ä»utilsä¸­å¯¼å…¥isAuthï¼ˆç™»å½•çŠ¶æ€ï¼‰ã€getTokenï¼ˆè·å–tokenï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import { BASE_URL, isAuth, getToken, API } from '../../utils'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>åˆ›å»ºæ–¹æ³•getUserInfoï¼Œç”¨æˆ·æ¥è·å–ä¸ªäººèµ„æ–™</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getUserInfo() {
    ...
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>åœ¨æ–¹æ³•ä¸­ï¼Œé€šè¿‡isLoginåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>if (!this.state.isLogin) {
    // æœªç™»å½•
    return
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™ä¸å‘é€è¯·æ±‚ï¼Œæ¸²æŸ“æœªç™»å½•ä¿¡æ¯</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å¯¹ç”¨ç»“æ„ä½¿ç”¨çŠ¶æ€æ¥åˆ¤æ–­æ˜¾ç¤ºç™»å½•è¿˜æ˜¯æœªç™»å½•UI
 {/* ç™»å½•åå±•ç¤ºï¼š */}
{isLogin ? (
  &lt;&gt;
    &lt;div className={styles.auth}&gt;
      &lt;span onClick={this.logout}&gt;é€€å‡º&lt;/span&gt;
    &lt;/div&gt;
    &lt;div className={styles.edit}&gt;
      ç¼–è¾‘ä¸ªäººèµ„æ–™
      &lt;span className={styles.arrow}&gt;
        &lt;i className=&quot;iconfont icon-arrow&quot; /&gt;
      &lt;/span&gt;
    &lt;/div&gt;
  &lt;/&gt;
) : (
  &lt;div className={styles.edit}&gt;
    &lt;Button
      type=&quot;primary&quot;
      size=&quot;small&quot;
      inline
      onClick={() =&gt; history.push('/login')}
    &gt;
      å»ç™»å½•
    &lt;/Button&gt;
  &lt;/div&gt;
)}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>å¦‚æœå·²ç™»å½•ï¼Œå°±æ ¹æ®æ¥å£å‘é€è¯·æ±‚ï¼Œè·å–ç”¨æˆ·ä¸ªäººèµ„æ–™</li> <li>æ¸²æŸ“ä¸ªäººèµ„æ–™æ•°æ®</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async getUserInfo() {
  if (!this.state.isLogin) {
    // æœªç™»å½•
    return
  }

  // å‘é€è¯·æ±‚ï¼Œè·å–ä¸ªäººèµ„æ–™
  const res = await API.get('/user', {
    headers: {
      authorization: getToken()
    }
  })

  if (res.data.status === 200) {
    // è¯·æ±‚æˆåŠŸ
    const { avatar, nickname } = res.data.body
    this.setState({
      userInfo: {
        avatar: BASE_URL + avatar,
        nickname
      }
    })
  }
}


// renderæ–¹æ³•ä¸­ 
render(){
    const { history } = this.props

    const {
      isLogin,
      userInfo: { avatar, nickname }
    } = this.state
    return (
      &lt;div className={styles.root}&gt;
        {/* ä¸ªäººä¿¡æ¯ */}
        &lt;div className={styles.title}&gt;
          &lt;img
            className={styles.bg}
            src={BASE_URL + '/img/profile/bg.png'}
            alt=&quot;èƒŒæ™¯å›¾&quot;
          /&gt;
          &lt;div className={styles.info}&gt;
            &lt;div className={styles.myIcon}&gt;
              &lt;img
                className={styles.avatar}
                src={avatar || DEFAULT_AVATAR}
                alt=&quot;icon&quot;
              /&gt;
            &lt;/div&gt;
            &lt;div className={styles.user}&gt;
              &lt;div className={styles.name}&gt;{nickname || 'æ¸¸å®¢'}&lt;/div&gt;
              ...
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="é€€å‡ºåŠŸèƒ½-â˜…â˜…â˜…"><a href="#é€€å‡ºåŠŸèƒ½-â˜…â˜…â˜…" class="header-anchor">#</a> é€€å‡ºåŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>ç‚¹å‡»é€€å‡ºæŒ‰é’®ï¼Œå¼¹å‡ºå¯¹è¯æ¡†ï¼Œæç¤ºæ˜¯å¦ç¡®å®šé€€å‡º</li> <li>ç»™é€€å‡ºæŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œåˆ›å»ºæ–¹æ³•logoutä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°</li> <li>å¯¼å…¥Modalå¯¹è¯æ¡†ç»„ä»¶ï¼ˆå¼¹å‡ºæ¨¡æ€æ¡†ï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import {..., Modal } from 'antd-mobile'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>åœ¨æ–¹æ³•ä¸­ï¼Œæ‹·è´Modalç»„ä»¶æ–‡ä»¶é«˜ä¸­ç¡®è®¤å¯¹è¯æ¡†çš„ç¤ºä¾‹ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const alert = Modal.alert
alert('Delete', 'Are you sure?', [
      { text: 'Cancel',onPress: () =&gt; console.log('cancel) },
      { text: 'Ok', onPress: () =&gt; console.log('ok')}
])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ä¿®æ”¹å¯¹è¯æ¡†çš„æ–‡å­—æç¤º</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>alert('æç¤º', 'æ˜¯å¦ç¡®å®šé€€å‡º?', [
      { text: 'å–æ¶ˆ'},
      { text: 'é€€å‡º', onPress: () =&gt; console.log('ok')}
])

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>åœ¨é€€å‡ºæŒ‰é’®çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œå…ˆè°ƒç”¨é€€å‡ºæ¥å£ï¼ˆè®©æœåŠ¡å™¨ç«¯é€€å‡ºï¼‰ï¼Œå†ç§»é™¤æœ¬åœ°tokenï¼ˆæœ¬åœ°é€€å‡ºï¼‰</li> <li>æŠŠç™»å½•çŠ¶æ€isLoginè®¾ç½®ä¸ºfalse</li> <li>æ¸…ç©ºç”¨æˆ·çŠ¶æ€å¯¹è±¡</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{
  text: 'é€€å‡º',
  onPress: async () =&gt; {
    // è°ƒç”¨é€€å‡ºæ¥å£
    await API.post('/user/logout', null, {
      headers: {
        authorization: getToken()
      }
    })

    // ç§»é™¤æœ¬åœ°token
    removeToken()

    // å¤„ç†çŠ¶æ€
    this.setState({
      isLogin: false,
      userInfo: {
        avatar: '',
        nickname: ''
      }
    })
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="ç™»å½•è®¿é—®æ§åˆ¶"><a href="#ç™»å½•è®¿é—®æ§åˆ¶" class="header-anchor">#</a> ç™»å½•è®¿é—®æ§åˆ¶</h3> <h4 id="ç›®æ ‡-20"><a href="#ç›®æ ‡-20" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>ç†è§£è®¿é—®æ§åˆ¶ä¸­çš„ä¸¤ç§åŠŸèƒ½å’Œä¸¤ç§é¡µé¢</li> <li>èƒ½å¤Ÿè¯´å‡ºå¤„ç†ä¸¤ç§åŠŸèƒ½ç”¨ä»€ä¹ˆæ–¹å¼æ¥å®ç°</li> <li>èƒ½å¤Ÿå†™å‡º axiosè¯·æ±‚æ‹¦æˆªå™¨ä¸å“åº”æ‹¦æˆªå™¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¯´å‡ºè¿™ä¸¤ç§æ‹¦æˆªå™¨åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œæœ‰ä»€ä¹ˆä½œç”¨</li> <li>èƒ½å¤Ÿè¯´å‡ºå¤„ç†ä¸¤ç§é¡µé¢ç”¨ä»€ä¹ˆæ–¹å¼æ¥å®ç°</li> <li>èƒ½å¤Ÿè¯´å‡ºAuthRoute é‰´æƒè·¯ç”±ç»„ä»¶å®ç°æ€è·¯</li> <li>èƒ½å¤Ÿå‚ç…§å®˜ç½‘è‡ªå·±å°è£…AuthRoute é‰´æƒè·¯ç”±ç»„ä»¶</li> <li>èƒ½å¤Ÿå®ç°ä¿®æ”¹ç™»å½•æˆåŠŸåçš„è·³è½¬</li></ul> <h4 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="header-anchor">#</a> æ¦‚è¿°</h4> <p>é¡¹ç›®ä¸­çš„ä¸¤ç§ç±»å‹çš„åŠŸèƒ½å’Œä¸¤ç§ç±»å‹çš„é¡µé¢ï¼š</p> <p>ä¸¤ç§åŠŸèƒ½ï¼š</p> <ul><li>ç™»å½•åæ‰èƒ½è¿›è¡Œæ“ä½œï¼ˆæ¯”å¦‚ï¼šè·å–ä¸ªäººèµ„æ–™ï¼‰</li> <li>ä¸éœ€è¦ç™»å½•å°±å¯ä»¥æ“ä½œï¼ˆæ¯”å¦‚ï¼šè·å–æˆ¿å±‹åˆ—è¡¨ï¼‰</li></ul> <p>ä¸¤ç§é¡µé¢ï¼š</p> <ul><li>éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼ˆæ¯”å¦‚ï¼šå‘å¸ƒæˆ¿æºé¡µï¼‰</li> <li>ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®ï¼ˆæ¯”å¦‚ï¼šé¦–é¡µï¼‰</li></ul> <p>å¯¹äºéœ€è¦ç™»å½•æ‰èƒ½æ“ä½œçš„åŠŸèƒ½ä½¿ç”¨ <strong>axios æ‹¦æˆªå™¨</strong> è¿›è¡Œå¤„ç†ï¼ˆæ¯”å¦‚ï¼šç»Ÿä¸€æ·»åŠ è¯·æ±‚å¤´ authorizationç­‰ï¼‰</p> <p>å¯¹äºéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„é¡µé¢ä½¿ç”¨ <strong>è·¯ç”±æ§åˆ¶</strong></p> <h3 id="åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†token-â˜…â˜…â˜…"><a href="#åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†token-â˜…â˜…â˜…" class="header-anchor">#</a> åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†tokenï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <ul><li>åœ¨api.js ä¸­ï¼Œæ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ (API.interceptors.request.user())</li> <li>è·å–åˆ°å½“å‰è¯·æ±‚çš„æ¥å£è·¯å¾„ï¼ˆurlï¼‰</li> <li>åˆ¤æ–­æ¥å£è·¯å¾„ï¼Œæ˜¯å¦æ˜¯ä»¥/user å¼€å¤´ï¼Œå¹¶ä¸”ä¸æ˜¯ç™»å½•æˆ–æ³¨å†Œæ¥å£ï¼ˆåªç»™éœ€è¦çš„æ¥å£æ·»åŠ è¯·æ±‚å¤´ï¼‰</li> <li>å¦‚æœæ˜¯ï¼Œå°±æ·»åŠ è¯·æ±‚å¤´Authorization</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
API.interceptors.request.use(config =&gt; {
  const { url } = config
  // åˆ¤æ–­è¯·æ±‚urlè·¯å¾„
  if (
    url.startsWith('/user') &amp;&amp;
    !url.startsWith('/user/login') &amp;&amp;
    !url.startsWith('/user/registered')
  ) {
    // æ·»åŠ è¯·æ±‚å¤´
    config.headers.Authorization = getToken()
  }
  return config
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>æ·»åŠ å“åº”æ‹¦æˆªå™¨ (API.interceptors.response.use())</li> <li>åˆ¤æ–­è¿”å›å€¼ä¸­çš„çŠ¶æ€ç </li> <li>å¦‚æœæ˜¯400ï¼Œæ ‡ç¤ºtokenè¶…æ—¶æˆ–å¼‚å¸¸ï¼Œç›´æ¥ç§»é™¤token</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// æ·»åŠ å“åº”æ‹¦æˆªå™¨
API.interceptors.response.use(response =&gt; {
  const { status } = response.data
  if (status === 400) {
    // æ­¤æ—¶ï¼Œè¯´æ˜ token å¤±æ•ˆï¼Œç›´æ¥ç§»é™¤ token å³å¯
    removeToken()
  }
  return response
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="é¡µé¢å¤„ç†-authrouteé‰´æƒè·¯ç”±ç»„ä»¶-â˜…â˜…â˜…"><a href="#é¡µé¢å¤„ç†-authrouteé‰´æƒè·¯ç”±ç»„ä»¶-â˜…â˜…â˜…" class="header-anchor">#</a> é¡µé¢å¤„ç†-AuthRouteé‰´æƒè·¯ç”±ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="header-anchor">#</a> å®ç°åŸç†</h4> <ul><li><p>é™åˆ¶æŸä¸ªé¡µé¢åªèƒ½åœ¨ç™»é™†çš„æƒ…å†µä¸‹è®¿é—®ï¼Œä½†æ˜¯åœ¨Reactè·¯ç”±ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾›è¯¥ç»„ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨å°è£…ï¼Œæ¥å®ç°ç™»é™†è®¿é—®æ§åˆ¶ï¼ˆç±»ä¼¼ä¸Vueè·¯ç”±çš„å¯¼èˆªå®ˆå«ï¼‰</p></li> <li><p>å‚æ•° react-router-domçš„é‰´æƒæ–‡æ¡£</p></li> <li><p>AuthRoute ç»„ä»¶å®é™…ä¸Šå°±æ˜¯å¯¹åŸæ¥Routeç»„ä»¶åšäº†ä¸€æ¬¡åŒ…è£…ï¼Œæ¥å®ç°ä¸€äº›é¢å¤–çš„åŠŸèƒ½</p></li></ul> <p>ä½¿ç”¨
<img src="https://img-blog.csdnimg.cn/20191130191612467.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-N6aFHAEw-1575112340075)(images/ä½¿ç”¨.png)]"></p> <ul><li>renderæ–¹æ³•ï¼šrender propsæ¨¡å¼ï¼ŒæŒ‡å®šè¯¥è·¯ç”±è¦æ¸²æŸ“çš„ç»„ä»¶å†…å®¹</li> <li>Redirectç»„ä»¶ï¼šé‡å®šå‘ç»„ä»¶ï¼Œé€šè¿‡toå±æ€§ï¼ŒæŒ‡å®šè¦è·³è½¬çš„è·¯ç”±ä¿¡æ¯</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// å®˜ç½‘å°è£…çš„æ ¸å¿ƒé€»è¾‘ä»£ç 
// ...rest  æŠŠä¹‹å‰çš„ç»„ä»¶ä¸­ä¼ é€’çš„å±æ€§åŸå°ä¸åŠ¨ä¼ é€’è¿‡æ¥
function PrivateRoute({ component: Component, ...rest }) {
  return (
    &lt;Route
      {...rest}
      // renderæ–¹æ³•ï¼š render propsæ¨¡å¼ï¼ŒæŒ‡å®šè¯¥è·¯ç”±è¦æ¸²æŸ“çš„ç»„ä»¶å†…å®¹
      render={props =&gt;
        // åˆ¤æ–­æ˜¯å¦ç™»é™†ï¼Œå¦‚æœç™»é™†ï¼Œè·³è½¬é…ç½®çš„componentï¼Œå¦‚æœæ²¡æœ‰ç™»é™†ï¼Œåˆ©ç”¨ Redirectç»„ä»¶æ¥è¿›è¡Œé‡å®šå‘
        fakeAuth.isAuthenticated ? (
          &lt;Component {...props} /&gt;
        ) : (
          &lt;Redirect
            to={{
              pathname: &quot;/login&quot;,
              // æŠŠå½“å‰çš„é¡µé¢è·¯å¾„ä¿å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·ç™»å½•åèƒ½å¤Ÿè·³å›å½“å‰é¡µé¢
              state: { from: props.location }
            }}
          /&gt;
        )
      }
    /&gt;
  );
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="å°è£…authrouteé‰´æƒè·¯ç”±ç»„ä»¶"><a href="#å°è£…authrouteé‰´æƒè·¯ç”±ç»„ä»¶" class="header-anchor">#</a> å°è£…AuthRouteé‰´æƒè·¯ç”±ç»„ä»¶</h3> <ul><li>åœ¨componentsç›®å½•ä¸­åˆ›å»ºAuthRoute/index.js æ–‡ä»¶</li> <li>åˆ›å»ºç»„ä»¶AuthRouteå¹¶å¯¼å‡º</li> <li>åœ¨AuthRouteç»„ä»¶ä¸­è¿”å›Routeç»„ä»¶ï¼ˆåœ¨RouteåŸºç¡€ä¸Šåšäº†ä¸€å±‚åŒ…è£…ï¼Œç”¨äºå®ç°è‡ªå®šä¹‰åŠŸèƒ½ï¼‰</li> <li>ç»™Routeç»„ä»¶ï¼Œæ·»åŠ renderæ–¹æ³•ï¼ŒæŒ‡å®šæ”¹ç»„ä»¶è¦æ¸²æŸ“çš„å†…å®¹ï¼ˆç±»ä¼¼ä¸componentå±æ€§ï¼‰</li> <li>åœ¨renderæ–¹æ³•ä¸­ï¼Œè°ƒç”¨isAuth() åˆ¤æ–­æ˜¯å¦ç™»é™†</li> <li>å¦‚æœç™»é™†äº†ï¼Œå°±æ¸²æŸ“å½“å‰ç»„ä»¶ï¼ˆé€šè¿‡å‚æ•°componentè·å–åˆ°è¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œéœ€è¦é‡å‘½åï¼‰</li> <li>å¦‚æœæ²¡æœ‰ç™»é™†ï¼Œå°±é‡å®šå‘åˆ°ç™»é™†é¡µé¢ï¼Œå¹¶ä¸”æŒ‡å®šç™»é™†æˆåŠŸåè…°è·³è½¬çš„é¡µé¢è·¯å¾„</li> <li>å°†AuthRouteç»„ä»¶æ¥æ”¶åˆ°çš„propsåŸæ ·ä¼ é€’ç»™Routeç»„ä»¶ï¼ˆä¿è¯ä¸Routeç»„ä»¶ä½¿ç”¨æ–¹å¼ç›¸åŒï¼‰</li> <li>ä½¿ç”¨AuthRouteç»„ä»¶é…ç½®è·¯ç”±è§„åˆ™ï¼ŒéªŒè¯æ˜¯å¦å®ç°é¡µé¢çš„ç™»é™†è®¿é—®æ§åˆ¶</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const AuthRoute = ({ component: Component, ...rest }) =&gt; {
  return (
    &lt;Route
      {...rest}
      render={props =&gt; {
        const isLogin = isAuth()

        if (isLogin) {
          // å·²ç™»å½•
          // å°† props ä¼ é€’ç»™ç»„ä»¶ï¼Œç»„ä»¶ä¸­æ‰èƒ½è·å–åˆ°è·¯ç”±ç›¸å…³ä¿¡æ¯
          return &lt;Component {...props} /&gt;
        } else {
          // æœªç™»å½•
          return (
            &lt;Redirect
              to={{
                pathname: '/login',
                state: {
                  from: props.location
                }
              }}
            /&gt;
          )
        }
      }}
    /&gt;
  )
}
export default AuthRoute

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬"><a href="#ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬" class="header-anchor">#</a> ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬</h3> <ul><li>ç™»é™†æˆåŠŸåï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è·³è½¬åˆ°ç”¨æˆ·æƒ³è¦è®¿é—®çš„é¡µé¢ï¼ˆåˆ¤æ–­props.location.state æ˜¯å¦æœ‰å€¼ï¼‰</li> <li>å¦‚æœä¸éœ€è¦ï¼Œåˆ™ç›´æ¥è°ƒç”¨history.go(-1) è¿”å›ä¸Šä¸€é¡µ</li> <li>å¦‚æœéœ€è¦ï¼Œå°±è·³è½¬åˆ°from.pathname æŒ‡å®šçš„é¡µé¢ï¼ˆæ¨èä½¿ç”¨replaceæ–¹æ³•æ¨¡å¼ï¼Œä¸æ˜¯pushï¼‰</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code> // è¡¨å•çš„æäº¤äº‹ä»¶
  handleSubmit: async (values, { props }) =&gt; {
    ...
    if (status === 200) {
      // ç™»å½•æˆåŠŸ
      localStorage.setItem('hkzf_token', body.token)

      /* 
        1 ç™»å½•æˆåŠŸåï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è·³è½¬åˆ°ç”¨æˆ·æƒ³è¦è®¿é—®çš„é¡µé¢ï¼ˆåˆ¤æ–­ props.location.state æ˜¯å¦æœ‰å€¼ï¼‰ã€‚
        2 å¦‚æœä¸éœ€è¦ï¼ˆæ²¡æœ‰å€¼ï¼‰ï¼Œåˆ™ç›´æ¥è°ƒç”¨ history.go(-1) è¿”å›ä¸Šä¸€é¡µã€‚
        3 å¦‚æœéœ€è¦ï¼Œå°±è·³è½¬åˆ° from.pathname æŒ‡å®šçš„é¡µé¢ï¼ˆæ¨èä½¿ç”¨ replace æ–¹æ³•æ¨¡å¼ï¼Œè€Œä¸æ˜¯ pushï¼‰ã€‚
      */
      if (!props.location.state) {
        // æ­¤æ—¶ï¼Œè¡¨ç¤ºæ˜¯ç›´æ¥è¿›å…¥åˆ°äº†è¯¥é¡µé¢ï¼Œç›´æ¥è°ƒç”¨ go(-1) å³å¯
        props.history.go(-1)
      } else {
        // replace: [home, map]
        props.history.replace(props.location.state.from.pathname)
      }
    } else {
      // ç™»å½•å¤±è´¥
      Toast.info(description, 2, null, false)
    }
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="æˆ‘çš„æ”¶è—æ¨¡å—"><a href="#æˆ‘çš„æ”¶è—æ¨¡å—" class="header-anchor">#</a> æˆ‘çš„æ”¶è—æ¨¡å—</h3> <h4 id="ç›®æ ‡-21"><a href="#ç›®æ ‡-21" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿå®ç°æ£€æµ‹æˆ¿æºæ˜¯å¦æ”¶è—</li> <li>èƒ½å¤Ÿå®ç°æ”¶è—æˆ¿æºåŠŸèƒ½</li></ul> <h4 id="åŠŸèƒ½åˆ†æ-6"><a href="#åŠŸèƒ½åˆ†æ-6" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li>æ”¶è—æˆ¿æº</li> <li>åŠŸèƒ½ï¼š
<ul><li>æ£€æŸ¥æˆ¿æºæ˜¯å¦æ”¶è—</li> <li>æ”¶è—æˆ¿æº</li></ul></li></ul> <h4 id="æ£€æŸ¥æˆ¿æºæ˜¯å¦æ”¶è—-â˜…â˜…"><a href="#æ£€æŸ¥æˆ¿æºæ˜¯å¦æ”¶è—-â˜…â˜…" class="header-anchor">#</a> æ£€æŸ¥æˆ¿æºæ˜¯å¦æ”¶è—ï¼ˆâ˜…â˜…ï¼‰</h4> <ul><li>åœ¨stateä¸­æ·»åŠ çŠ¶æ€ï¼ŒisFavoriteï¼ˆè¡¨ç¤ºæ˜¯å¦æ”¶è—ï¼‰ï¼Œé»˜è®¤å€¼æ˜¯false</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>state= {
    // è¡¨ç¤ºæˆ¿æºæ˜¯å¦æ”¶è—
    isFavorite: false
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>åˆ›å»ºæ–¹æ³• checkFavoriteï¼Œåœ¨è¿›å…¥æˆ¿æºè¯¦æƒ…é¡µé¢æ—¶è°ƒç”¨è¯¥æ–¹æ³•</li> <li>å…ˆè°ƒç”¨isAuthæ–¹æ³•ï¼Œæ¥åˆ¤æ–­æ˜¯å¦ç™»é™†</li> <li>å¦‚æœæœªç™»å½•ï¼Œç›´æ¥returnï¼Œä¸å†æ£€æŸ¥æ˜¯å¦æ”¶è—</li> <li>å¦‚æœå·²ç™»é™†ï¼Œä»è·¯ç”±å‚æ•°ä¸­ï¼Œè·å–å½“å‰æˆ¿å±‹id</li> <li>ä½¿ç”¨APIè°ƒç”¨æ¥å£ï¼ŒæŸ¥è¯¢è¯¥æˆ¿æºæ˜¯å¦æ”¶è—</li> <li>å¦‚æœè¿”å›çŠ¶æ€ç ä¸º200ï¼Œå°±æ›´æ–°isFavoriteï¼›å¦åˆ™ï¼Œä¸åšä»»ä½•å¤„ç†</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>async checkFavorite() {
    const isLogin = isAuth()

    if (!isLogin) {
      // æ²¡æœ‰ç™»å½•
      return
    }

    // å·²ç™»å½•
    const { id } = this.props.match.params
    const res = await API.get(`/user/favorites/${id}`)

    const { status, body } = res.data
    if (status === 200) {
      // è¡¨ç¤ºè¯·æ±‚å·²ç»æˆåŠŸï¼Œéœ€è¦æ›´æ–° isFavorite çš„å€¼
      this.setState({
        isFavorite: body.isFavorite
      })
    }
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>åœ¨é¡µé¢ç»“æ„ä¸­ï¼Œé€šè¿‡çŠ¶æ€isFavoriteä¿®æ”¹æ”¶è—æŒ‰é’®çš„æ–‡å­—å’Œå›¾ç‰‡å†…å®¹</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* åº•éƒ¨æ”¶è—æŒ‰é’® */}
&lt;Flex className={styles.fixedBottom}&gt;
  &lt;Flex.Item&gt;
    &lt;img
      src={
        BASE_URL + (isFavorite ? '/img/star.png' : '/img/unstar.png')
      }
      className={styles.favoriteImg}
      alt=&quot;æ”¶è—&quot;
    /&gt;
    &lt;span className={styles.favorite}&gt;
      {isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—'}
    &lt;/span&gt;
  &lt;/Flex.Item&gt;
  &lt;Flex.Item&gt;åœ¨çº¿å’¨è¯¢&lt;/Flex.Item&gt;
  &lt;Flex.Item&gt;
    &lt;a href=&quot;tel:400-618-4000&quot; className={styles.telephone}&gt;
      ç”µè¯é¢„çº¦
    &lt;/a&gt;
  &lt;/Flex.Item&gt;
&lt;/Flex&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="æ”¶è—æˆ¿æº-â˜…â˜…â˜…"><a href="#æ”¶è—æˆ¿æº-â˜…â˜…â˜…" class="header-anchor">#</a> æ”¶è—æˆ¿æºï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>ç»™æ”¶è—æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œåˆ›å»ºæ–¹æ³•handleFavoriteä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åº</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>handleFavorite = async () =&gt; {
    ...
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>è°ƒç”¨isAuthæ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦ç™»é™†</li> <li>å¦‚æœæœªç™»å½•ï¼Œåˆ™ä½¿ç”¨Modal.alert æç¤ºç”¨æˆ·æ˜¯å¦å»ç™»é™†</li> <li>å¦‚æœç‚¹å‡»å–æ¶ˆï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œ</li> <li>å¦‚æœç‚¹å‡»å»ç™»é™†ï¼Œå°±è·³è½¬åˆ°ç™»é™†é¡µé¢ï¼ŒåŒæ—¶ä¼ é€’state(ç™»é™†åï¼Œå†å›åˆ°æˆ¿æºæ”¶è—é¡µé¢)</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const isLogin = isAuth()
const { history, location, match } = this.props

if (!isLogin) {
  // æœªç™»å½•
  return alert('æç¤º', 'ç™»å½•åæ‰èƒ½æ”¶è—æˆ¿æºï¼Œæ˜¯å¦å»ç™»å½•?', [
    { text: 'å–æ¶ˆ' },
    {
      text: 'å»ç™»å½•',
      onPress: () =&gt; history.push('/login', { from: location })
    }
  ])
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>æ ¹æ®isFavoriteåˆ¤æ–­ï¼Œå½“å‰æˆ¿æºæ˜¯å¦æ”¶è—</li> <li>å¦‚æœæœªæ”¶è—ï¼Œå°±è°ƒç”¨æ·»åŠ æ”¶è—æ¥å£ï¼Œæ·»åŠ æ”¶è—</li> <li>å¦‚æœæ”¶è—äº†ï¼Œå°±è°ƒç”¨åˆ é™¤æ¥å£ï¼Œåˆ é™¤æ”¶è—</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>if (isFavorite) {
  // å·²æ”¶è—ï¼Œåº”è¯¥åˆ é™¤æ”¶è—
  const res = await API.delete(`/user/favorites/${id}`)
  // console.log(res)
  this.setState({
    isFavorite: false
  })

  if (res.data.status === 200) {
    // æç¤ºç”¨æˆ·å–æ¶ˆæ”¶è—
    Toast.info('å·²å–æ¶ˆæ”¶è—', 1, null, false)
  } else {
    // token è¶…æ—¶
    Toast.info('ç™»å½•è¶…æ—¶ï¼Œè¯·é‡æ–°ç™»å½•', 2, null, false)
  }
} else {
  // æœªæ”¶è—ï¼Œåº”è¯¥æ·»åŠ æ”¶è—
  const res = await API.post(`/user/favorites/${id}`)
  // console.log(res)
  if (res.data.status === 200) {
    // æç¤ºç”¨æˆ·æ”¶è—æˆåŠŸ
    Toast.info('å·²æ”¶è—', 1, null, false)
    this.setState({
      isFavorite: true
    })
  } else {
    // token è¶…æ—¶
    Toast.info('ç™»å½•è¶…æ—¶ï¼Œè¯·é‡æ–°ç™»å½•', 2, null, false)
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ul><li>å®Œæ•´é€»è¾‘ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>handleFavorite = async () =&gt; {
    const isLogin = isAuth()
    const { history, location, match } = this.props

    if (!isLogin) {
      // æœªç™»å½•
      return alert('æç¤º', 'ç™»å½•åæ‰èƒ½æ”¶è—æˆ¿æºï¼Œæ˜¯å¦å»ç™»å½•?', [
        { text: 'å–æ¶ˆ' },
        {
          text: 'å»ç™»å½•',
          onPress: () =&gt; history.push('/login', { from: location })
        }
      ])
    }

    // å·²ç™»å½•
    const { isFavorite } = this.state
    const { id } = match.params

    if (isFavorite) {
      // å·²æ”¶è—ï¼Œåº”è¯¥åˆ é™¤æ”¶è—
      const res = await API.delete(`/user/favorites/${id}`)
      // console.log(res)
      this.setState({
        isFavorite: false
      })

      if (res.data.status === 200) {
        // æç¤ºç”¨æˆ·å–æ¶ˆæ”¶è—
        Toast.info('å·²å–æ¶ˆæ”¶è—', 1, null, false)
      } else {
        // token è¶…æ—¶
        Toast.info('ç™»å½•è¶…æ—¶ï¼Œè¯·é‡æ–°ç™»å½•', 2, null, false)
      }
    } else {
      // æœªæ”¶è—ï¼Œåº”è¯¥æ·»åŠ æ”¶è—
      const res = await API.post(`/user/favorites/${id}`)
      // console.log(res)
      if (res.data.status === 200) {
        // æç¤ºç”¨æˆ·æ”¶è—æˆåŠŸ
        Toast.info('å·²æ”¶è—', 1, null, false)
        this.setState({
          isFavorite: true
        })
      } else {
        // token è¶…æ—¶
        Toast.info('ç™»å½•è¶…æ—¶ï¼Œè¯·é‡æ–°ç™»å½•', 2, null, false)
      }
    }
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="reactå¥½ç§Ÿå®¢é¡¹ç›®day11"><a href="#reactå¥½ç§Ÿå®¢é¡¹ç›®day11" class="header-anchor">#</a> reactå¥½ç§Ÿå®¢é¡¹ç›®Day11</h2> <p>-å‘å¸ƒæˆ¿æºæ¨¡å—(jsè¾“å…¥æ¡†é˜²æŠ–&amp;å›¾ç‰‡ä¸Šä¼ )&amp;é¡¹ç›®æ‰“åŒ…&amp;é¡¹ç›®ä¼˜åŒ–(æŒ‰éœ€åŠ è½½&amp;è·¯ç”±ä»£ç åˆ†å‰²)</p> <ul><li>å¦‚ä½•è§£å†³JS æ–‡æœ¬è¾“å…¥æ¡†é˜²æŠ–ï¼ˆç”¨æˆ·è¾“å…¥è¿‡å¿«å¯¼è‡´è¯·æ±‚æœåŠ¡å™¨çš„å‹åŠ›è¿‡å¤§ï¼‰</li> <li>èƒ½å¤Ÿå®Œæˆæœç´¢æ¨¡å—</li> <li>èƒ½å¤Ÿè·å–å‘å¸ƒæˆ¿æºçš„ç›¸å…³ä¿¡æ¯</li> <li>èƒ½å¤ŸçŸ¥é“å›¾ç‰‡ä¸Šä¼ çš„æµç¨‹</li> <li>èƒ½å¤Ÿå®Œæˆå›¾ç‰‡ä¸Šä¼ åŠŸèƒ½</li> <li>èƒ½å¤Ÿå®Œæˆæˆ¿æºå‘å¸ƒåŠŸèƒ½</li></ul> <h3 id="å‰æœŸå‡†å¤‡å·¥ä½œ"><a href="#å‰æœŸå‡†å¤‡å·¥ä½œ" class="header-anchor">#</a> å‰æœŸå‡†å¤‡å·¥ä½œ</h3> <h4 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="header-anchor">#</a> åŠŸèƒ½</h4> <ul><li>è·å–æˆ¿æºçš„å°åŒºä¿¡æ¯ï¼Œæˆ¿æºå›¾ç‰‡ä¸Šä¼ ï¼Œæˆ¿æºå‘å¸ƒç­‰</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130191921650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-d0yllDAe-1575112741215)(images/å‘å¸ƒæˆ¿æº.png)]"></p> <h4 id="æ¨¡æ¿æ”¹åŠ¨è¯´æ˜"><a href="#æ¨¡æ¿æ”¹åŠ¨è¯´æ˜" class="header-anchor">#</a> æ¨¡æ¿æ”¹åŠ¨è¯´æ˜</h4> <ul><li>ä¿®æ”¹é¦–é¡µï¼ˆIndexï¼‰å»å‡ºç§Ÿé“¾æ¥ä¸ºï¼š /rent/add</li> <li>ä¿®æ”¹å…¬å…±ç»„ä»¶NoHouseçš„childrenå±æ€§æ ¡éªŒä¸ºï¼š nodeï¼ˆä»»ä½•å¯ä»¥æ¸²æŸ“çš„å†…å®¹ï¼‰</li></ul> <p><img src="https://img-blog.csdnimg.cn/2019113019194854.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-wTlhzzyO-1575112741216)(images/noHouse.jpg)]"></p> <ul><li>ä¿®æ”¹å…¬å…±ç»„ä»¶HousePackageï¼Œæ·»åŠ onSelectçš„é»˜è®¤å€¼</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130192000867.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-MuCgqTDd-1575112741220)(images/onSelect.png)]"></p> <ul><li>æ·»åŠ utils/city.jsï¼Œå°è£…å½“å‰å®šä½åŸå¸‚ localStorageçš„æ“ä½œ</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130192015688.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-oUpPCXcv-1575112741223)(images/city.png)]"></p> <ul><li>åˆ›å»ºäº†ä¸‰ä¸ªé¡µé¢ç»„ä»¶ï¼šRentï¼ˆå·²å‘å¸ƒæˆ¿æºåˆ—è¡¨ï¼‰ã€Rent/Addï¼ˆå‘å¸ƒæˆ¿æºï¼‰ã€Rent/Searchï¼ˆå…³é”®è¯æœç´¢æ ¡åŒºä¿¡æ¯ï¼‰</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130192033706.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-GZfe1Qn6-1575112741227)(images/rent.png)]"></p> <ul><li>Rent æ¨¡æ¿ä»£ç </li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>import React, { Component } from 'react'

import { Link } from 'react-router-dom'

import { API, BASE_URL } from '../../utils'

import NavHeader from '../../components/NavHeader'
import HouseItem from '../../components/HouseItem'
import NoHouse from '../../components/NoHouse'

import styles from './index.module.css'

export default class Rent extends Component {
  state = {
    // å‡ºç§Ÿæˆ¿å±‹åˆ—è¡¨
    list: []
  }

  // è·å–å·²å‘å¸ƒæˆ¿æºçš„åˆ—è¡¨æ•°æ®
  async getHouseList() {
    const res = await API.get('/user/houses')

    const { status, body } = res.data
    if (status === 200) {
      this.setState({
        list: body
      })
    } else {
      const { history, location } = this.props
      history.replace('/login', {
        from: location
      })
    }
  }

  componentDidMount() {
    this.getHouseList()
  }

  renderHouseItem() {
    const { list } = this.state
    const { history } = this.props

    return list.map(item =&gt; {
      return (
        &lt;HouseItem
          key={item.houseCode}
          onClick={() =&gt; history.push(`/detail/${item.houseCode}`)}
          src={BASE_URL + item.houseImg}
          title={item.title}
          desc={item.desc}
          tags={item.tags}
          price={item.price}
        /&gt;
      )
    })
  }

  renderRentList() {
    const { list } = this.state
    const hasHouses = list.length &gt; 0

    if (!hasHouses) {
      return (
        &lt;NoHouse&gt;
          æ‚¨è¿˜æ²¡æœ‰æˆ¿æºï¼Œ
          &lt;Link to=&quot;/rent/add&quot; className={styles.link}&gt;
            å»å‘å¸ƒæˆ¿æº
          &lt;/Link&gt;
          å§~
        &lt;/NoHouse&gt;
      )
    }

    return &lt;div className={styles.houses}&gt;{this.renderHouseItem()}&lt;/div&gt;
  }

  render() {
    const { history } = this.props

    return (
      &lt;div className={styles.root}&gt;
        &lt;NavHeader onLeftClick={() =&gt; history.go(-1)}&gt;æˆ¿å±‹ç®¡ç†&lt;/NavHeader&gt;

        {this.renderRentList()}
      &lt;/div&gt;
    )
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br></div></div><h4 id="ä¸‰ä¸ªè·¯ç”±è§„åˆ™é…ç½®"><a href="#ä¸‰ä¸ªè·¯ç”±è§„åˆ™é…ç½®" class="header-anchor">#</a> ä¸‰ä¸ªè·¯ç”±è§„åˆ™é…ç½®</h4> <ul><li>åœ¨App.js ä¸­å¯¼å…¥Rentå·²å‘å¸ƒæˆ¿æºåˆ—è¡¨é¡µé¢</li> <li>åœ¨App.js ä¸­å¯¼å…¥AuthRouteç»„ä»¶</li> <li>ä½¿ç”¨AuthRouteç»„ä»¶ï¼Œé…ç½®è·¯ç”±è§„åˆ™</li> <li>ä½¿ç”¨åŒæ ·æ–¹å¼ï¼Œé…ç½®Rent/Add æˆ¿æºå‘å¸ƒé¡µé¢ï¼ŒRent/Search å…³é”®è¯æœç´¢å°åŒºä¿¡æ¯é¡µé¢</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>{/* é…ç½®ç™»å½•åï¼Œæ‰èƒ½è®¿é—®çš„é¡µé¢ */}
&lt;AuthRoute exact path=&quot;/rent&quot; component={Rent} /&gt;
&lt;AuthRoute path=&quot;/rent/add&quot; component={RentAdd} /&gt;
&lt;AuthRoute path=&quot;/rent/search&quot; component={RentSearch} /&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æœç´¢æ¨¡å—-â˜…â˜…â˜…"><a href="#æœç´¢æ¨¡å—-â˜…â˜…â˜…" class="header-anchor">#</a> æœç´¢æ¨¡å—ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="å…³é”®è¯æœç´¢å°åŒºä¿¡æ¯"><a href="#å…³é”®è¯æœç´¢å°åŒºä¿¡æ¯" class="header-anchor">#</a> å…³é”®è¯æœç´¢å°åŒºä¿¡æ¯</h4> <ul><li>è·å–SearchBar æœç´¢æ ç»„ä»¶çš„å€¼</li> <li>åœ¨æœç´¢æ çš„changeäº‹ä»¶ä¸­ï¼Œåˆ¤æ–­å½“å‰å€¼æ˜¯å¦ä¸ºç©º</li> <li>å¦‚æœä¸ºç©ºï¼Œç›´æ¥returnï¼Œä¸åšä»»ä½•å¤„ç†</li> <li>å¦‚æœä¸ä¸ºç©ºï¼Œå°±æ ¹æ®å½“å‰è¾“å…¥çš„å€¼ä»¥åŠå½“å‰åŸå¸‚idï¼Œè·å–è¯¥å…³é”®è¯å¯¹åº”çš„å°åŒºä¿¡æ¯</li> <li>**é—®é¢˜ï¼š**æœç´¢æ ä¸­æ¯è¾“å…¥ä¸€ä¸ªå€¼ï¼Œå°±å‘ä¸€æ¬¡è¯·æ±‚ï¼Œè¿™æ ·å¯¹æœåŠ¡å™¨å‹åŠ›æ¯”è¾ƒå¤§ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½</li> <li>**è§£å†³æ–¹å¼ï¼š**ä½¿ç”¨å®šæ—¶å™¨æ¥è¿›è¡Œå»¶è¿Ÿæ‰§è¡Œï¼ˆå…³é”®è¯ï¼šJSæ–‡æœ¬æ¡†è¾“å…¥ é˜²æŠ–ï¼‰</li></ul> <p><img src="https://img-blog.csdnimg.cn/20191130192158194.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTU4MzcwOA==,size_16,color_FFFFFF,t_70" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-OtWoClFE-1575112741229)(images/è¾“å…¥æ¡†é˜²æŠ–.png)]"></p> <h4 id="å®ç°æ­¥éª¤-3"><a href="#å®ç°æ­¥éª¤-3" class="header-anchor">#</a> å®ç°æ­¥éª¤</h4> <ul><li>ç»™SearchBarç»„ä»¶ï¼Œæ·»åŠ onChangeé…ç½®é¡¹ï¼Œè·å–æ–‡æœ¬æ¡†çš„å€¼</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>&lt;div className={styles.root}&gt;
  {/* æœç´¢æ¡† */}
  &lt;SearchBar
    placeholder=&quot;è¯·è¾“å…¥å°åŒºæˆ–åœ°å€&quot;
    value={searchTxt}
    onChange={this.handleSearchTxt}
    showCancelButton={true}
    onCancel={() =&gt; history.go(-1)}
  /&gt;

  {/* æœç´¢æç¤ºåˆ—è¡¨ */}
  &lt;ul className={styles.tips}&gt;{this.renderTips()}&lt;/ul&gt;
&lt;/div&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>åˆ¤æ–­å½“å‰æ–‡æœ¬æ¡†çš„å€¼æ˜¯å¦ä¸ºç©º</li> <li>å¦‚æœä¸ºç©ºï¼Œæ¸…ç©ºåˆ—è¡¨ï¼Œç„¶åreturnï¼Œä¸å†å‘é€è¯·æ±‚</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>handleSearchTxt = value =&gt; {
    this.setState({ searchTxt: value })
    if (!value) {
      // æ–‡æœ¬æ¡†çš„å€¼ä¸ºç©º
      return this.setState({
        tipsList: []
      })
    }
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>å¦‚æœä¸ä¸ºç©ºï¼Œä½¿ç”¨APIå‘é€è¯·æ±‚ï¼Œè·å–å°åŒºæ•°æ®</li> <li>ä½¿ç”¨å®šæ—¶å™¨æ¥å»¶è¿Ÿæœç´¢ï¼Œæå‡æ€§èƒ½</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>handleSearchTxt = value =&gt; {
    this.setState({ searchTxt: value })

    if (!value) {
      // æ–‡æœ¬æ¡†çš„å€¼ä¸ºç©º
      return this.setState({
        tipsList: []
      })
    }

    // æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
    clearTimeout(this.timerId)

    this.timerId = setTimeout(async () =&gt; {
      // è·å–å°åŒºæ•°æ®
      const res = await API.get('/area/community', {
        params: {
          name: value,
          id: this.cityId
        }
      })
      this.setState({
        tipsList: res.data.body
      })
    }, 500)
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="è·å–æˆ¿æºæ•°æ®åˆ†æ-â˜…â˜…"><a href="#è·å–æˆ¿æºæ•°æ®åˆ†æ-â˜…â˜…" class="header-anchor">#</a> è·å–æˆ¿æºæ•°æ®åˆ†æï¼ˆâ˜…â˜…ï¼‰</h3> <ul><li>InputItemã€TextareaItemã€Pickerç»„ä»¶ï¼Œéƒ½ä½¿ç”¨onChangeé…ç½®é¡¹ï¼Œæ¥è·å–å½“å‰å€¼</li> <li>å¤„ç†æ–¹å¼ï¼šå°è£…ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•° getValue æ¥ç»Ÿä¸€è·å–ä¸‰ç§ç»„ä»¶çš„å€¼</li> <li>åˆ›å»ºæ–¹æ³•getValueä½œä¸ºä¸‰ä¸ªç»„ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°</li> <li>è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š1. name å½“å‰çŠ¶æ€åï¼›2. value å½“å‰è¾“å…¥å€¼æˆ–è€…é€‰ä¸­å€¼</li> <li>åˆ†åˆ«ç»™ InputItem/TextareaItem/Picker ç»„ä»¶ï¼Œæ·»åŠ onChangeé…ç½®é¡¹</li> <li>åˆ†åˆ«è°ƒç”¨ getValue å¹¶ä¼ é€’ name å’Œ value ä¸¤ä¸ªå‚æ•°ï¼ˆæ³¨æ„ï¼šPickerç»„ä»¶é€‰ä¸­å€¼ä¸ºæ•°ç»„ï¼Œè€Œæ¥å£éœ€è¦å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ï¼Œå–ç´¢å¼•å·ä¸º 0 çš„å€¼å³å¯ï¼‰</li></ul> <p>ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  /* 
    è·å–è¡¨å•æ•°æ®ï¼š
  */
  getValue = (name, value) =&gt; {
    this.setState({
      [name]: value
    })
  }
  
  // ç»™ç›¸åº”ç»„ä»¶æ·»åŠ  onChange äº‹ä»¶ï¼Œä¼ é€’ name å’Œvalue
  

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="è·å–æˆ¿å±‹é…ç½®æ•°æ®-â˜…â˜…"><a href="#è·å–æˆ¿å±‹é…ç½®æ•°æ®-â˜…â˜…" class="header-anchor">#</a> è·å–æˆ¿å±‹é…ç½®æ•°æ®ï¼ˆâ˜…â˜…ï¼‰</h3> <ul><li>ç»™HousePackge ç»„ä»¶ï¼Œ æ·»åŠ  onSelect å±æ€§</li> <li>åœ¨onSelect å¤„ç†æ–¹æ³•ä¸­ï¼Œé€šè¿‡å‚æ•°è·å–åˆ°å½“å‰é€‰ä¸­é¡¹çš„å€¼</li> <li>æ ¹æ®å‘å¸ƒæˆ¿æºæ¥å£çš„å‚æ•°è¯´æ˜ï¼Œå°†è·å–åˆ°çš„æ•°ç»„ç±»å‹çš„é€‰ä¸­å€¼ï¼Œè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹</li> <li>è°ƒç”¨setState æ›´æ–°çŠ¶æ€</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>/* 
  è·å–æˆ¿å±‹é…ç½®æ•°æ®
*/
handleSupporting = selected =&gt; {
  this.setState({
    supporting: selected.join('|')
  })
}
  
...
&lt;HousePackge select onSelect={this.handleSupporting} /&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="å›¾ç‰‡ä¸Šä¼ -â˜…â˜…â˜…"><a href="#å›¾ç‰‡ä¸Šä¼ -â˜…â˜…â˜…" class="header-anchor">#</a> å›¾ç‰‡ä¸Šä¼ ï¼ˆâ˜…â˜…â˜…ï¼‰</h3> <h4 id="åˆ†æ"><a href="#åˆ†æ" class="header-anchor">#</a> åˆ†æ</h4> <ul><li>æ ¹æ®å‘å¸ƒæˆ¿æºæ¥å£ï¼Œæœ€ç»ˆéœ€è¦çš„æ˜¯æˆ¿å±‹å›¾ç‰‡çš„è·¯å¾„</li> <li>ä¸¤ä¸ªæ­¥éª¤ï¼š 1- è·å–æˆ¿å±‹å›¾ç‰‡ï¼› 2- ä¸Šä¼ å›¾ç‰‡è·å–åˆ°å›¾ç‰‡çš„è·¯å¾„</li> <li>å¦‚ä½•è·å–æˆ¿å±‹å›¾ç‰‡ï¼Ÿ ImagePickerå›¾ç‰‡é€‰æ‹©å™¨ç»„ä»¶ï¼Œé€šè¿‡onChangeé…ç½®é¡¹æ¥è·å–</li> <li>å¦‚ä½•ä¸Šä¼ æˆ¿å±‹å›¾ç‰‡ï¼Ÿ æ ¹æ®å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œå°†å›¾ç‰‡è½¬åŒ–ä¸ºFormDataæ•°æ®åå†ä¸Šä¼ ï¼Œç”±æ¥å£è¿”å›å›¾ç‰‡è·¯å¾„</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>  handleHouseImg = (files, type, index) =&gt; {
    // files å›¾ç‰‡æ–‡ä»¶çš„æ•°ç»„ï¼› type æ“ä½œç±»å‹ï¼šæ·»åŠ ï¼Œç§»é™¤ï¼ˆå¦‚æœæ˜¯ç§»é™¤ï¼Œé‚£ä¹ˆç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨å°±æ˜¯ç§»é™¤çš„å›¾ç‰‡çš„ç´¢å¼•ï¼‰
    console.log(files, type, index)
    this.setState({
      tempSlides: files
    })
  }
  ...
   &lt;ImagePicker
     files={tempSlides}
     onChange={this.handleHouseImg}
     multiple={true}
     className={styles.imgpicker}
   /&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="ä¸Šä¼ æˆ¿å±‹å›¾ç‰‡"><a href="#ä¸Šä¼ æˆ¿å±‹å›¾ç‰‡" class="header-anchor">#</a> ä¸Šä¼ æˆ¿å±‹å›¾ç‰‡</h4> <p>å›¾ç‰‡å·²ç»å¯ä»¥é€šè¿‡ ImagePicker çš„ onChange äº‹ä»¶æ¥è·å–åˆ°äº†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦æŠŠå›¾ç‰‡è¿›è¡Œä¸Šä¼ ï¼Œç„¶åè·å–åˆ°æœåŠ¡å™¨è¿”å›çš„æˆåŠŸä¸Šä¼ å›¾ç‰‡çš„è·¯å¾„</p> <ul><li>ç»™æäº¤æŒ‰é’®ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶</li> <li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æˆ¿å±‹å›¾ç‰‡</li> <li>å¦‚æœæ²¡æœ‰ï¼Œä¸åšä»»ä½•å¤„ç†</li> <li>å¦‚æœæœ‰ï¼Œå°±åˆ›å»ºFormDataçš„ç¤ºä¾‹å¯¹è±¡ï¼ˆformï¼‰</li> <li>éå†tempSlidesæ•°ç»„ï¼Œåˆ†åˆ«å°†æ¯ä¸€ä¸ªå›¾ç‰‡å›¾ç‰‡å¯¹è±¡ï¼Œæ·»åŠ åˆ°formä¸­ï¼ˆé”®ä¸ºï¼šfileï¼Œæ ¹æ®æ¥å£æ–‡æ¡£è·å–ï¼‰</li> <li>è°ƒç”¨å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œä¼ é€’formå‚æ•°ï¼Œå¹¶è®¾ç½®è¯·æ±‚å¤´ Content-Type ä¸º multipart/form-data</li> <li>é€šè¿‡æ¥å£è¿”å›å€¼è·å–åˆ°å›¾ç‰‡è·¯å¾„</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>// ä¸Šä¼ å›¾ç‰‡
addHouse = async() =&gt; {
    const { tempSlides } = this.state
    let houseImg = ''

    if (tempSlides.length &gt; 0) {
        // å·²ç»æœ‰ä¸Šä¼ çš„å›¾ç‰‡äº†
        const form = new FormData()
        tempSlides.forEach(item =&gt; form.append('file', item.file))

        const res = await API.post('/houses/image', form, {
            headers: {
                'Content-Type': 'multipart/form-data'
            }
        })

        // console.log(res)
        houseImg = res.data.body.join('|')
    }
}
...
&lt;Flex.Item className={styles.confirm} onClick={this.addHouse}&gt;
  æäº¤
&lt;/Flex.Item&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="å‘å¸ƒæˆ¿æº"><a href="#å‘å¸ƒæˆ¿æº" class="header-anchor">#</a> å‘å¸ƒæˆ¿æº</h4> <p>åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥è·å–åˆ°å‘å¸ƒæˆ¿æºçš„æ‰€æœ‰ä¿¡æ¯äº†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦æŠŠæ•°æ®ä¼ é€’ç»™æœåŠ¡å™¨</p> <ul><li>åœ¨ addHouse æ–¹æ³•ä¸­ï¼Œ ä»state é‡Œé¢è·å–åˆ°æ‰€æœ‰çš„æˆ¿å±‹æ•°æ®</li> <li>ä½¿ç”¨API è°ƒç”¨å‘å¸ƒæˆ¿æºæ¥å£ï¼Œä¼ é€’æ‰€æœ‰æˆ¿å±‹æ•°æ®</li> <li>æ ¹æ®æ¥å£è¿”å›å€¼ä¸­çš„çŠ¶æ€ç ï¼Œåˆ¤æ–­æ˜¯å¦å‘å¸ƒæˆåŠŸ</li> <li>å¦‚æœçŠ¶æ€ç æ˜¯200ï¼Œæ ‡ç¤ºå‘å¸ƒæˆåŠŸï¼Œå°±æç¤ºï¼šå‘å¸ƒæˆåŠŸï¼Œå¹¶è·³è½¬åˆ°å·²å‘å¸ƒçš„æˆ¿æºé¡µé¢</li> <li>å¦åˆ™ï¼Œå°±æç¤ºï¼šæœåŠ¡å™¨å·æ‡’äº†ï¼Œè¯·ç¨åå†è¯•</li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>addHouse = async () =&gt; {
  const {
    tempSlides,
    title,
    description,
    oriented,
    supporting,
    price,
    roomType,
    size,
    floor,
    community
  } = this.state
  let houseImg = ''

  // ä¸Šä¼ æˆ¿å±‹å›¾ç‰‡ï¼š
  if (tempSlides.length &gt; 0) {
    // å·²ç»æœ‰ä¸Šä¼ çš„å›¾ç‰‡äº†
    const form = new FormData()
    tempSlides.forEach(item =&gt; form.append('file', item.file))

    const res = await API.post('/houses/image', form, {
      headers: {
        'Content-Type': 'multipart/form-data'
      }
    })
    houseImg = res.data.body.join('|')
  }

  // å‘å¸ƒæˆ¿æº
  const res = await API.post('/user/houses', {
    title,
    description,
    oriented,
    supporting,
    price,
    roomType,
    size,
    floor,
    community: community.id,
    houseImg
  })

  if (res.data.status === 200) {
    // å‘å¸ƒæˆåŠŸ
    Toast.info('å‘å¸ƒæˆåŠŸ', 1, null, false)
    this.props.history.push('/rent')
  } else {
    Toast.info('æœåŠ¡å™¨å·æ‡’äº†ï¼Œè¯·ç¨åå†è¯•~', 2, null, false)
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="é¡¹ç›®æ‰“åŒ…"><a href="#é¡¹ç›®æ‰“åŒ…" class="header-anchor">#</a> é¡¹ç›®æ‰“åŒ…</h3> <h4 id="ç›®æ ‡-22"><a href="#ç›®æ ‡-22" class="header-anchor">#</a> ç›®æ ‡</h4> <ul><li>èƒ½å¤Ÿé…ç½®ç”Ÿäº§ç¯å¢ƒçš„ç¯å¢ƒå˜é‡</li> <li>èƒ½å¤Ÿå®Œæˆç®€æ˜“çš„æ‰“åŒ…</li> <li>çŸ¥é“reactä¸­å¦‚æœè¦é…ç½®webpackçš„ä¸¤ç§æ–¹å¼</li> <li>çŸ¥é“ antd-mobile æŒ‰éœ€åŠ è½½çš„å¥½å¤„</li> <li>çŸ¥é“è·¯ç”±ä»£ç åˆ†å‰²çš„å¥½å¤„</li> <li>èƒ½å¤Ÿå‚ç…§ç¬”è®°æ¥è¿›è¡Œ æŒ‰éœ€åŠ è½½é…ç½®å’Œä»£ç åˆ†å‰²é…ç½®ï¼Œç„¶åæ‰“åŒ…</li> <li>èƒ½å¤ŸçŸ¥é“å¦‚ä½•è§£å†³reactä¸­è·¨åŸŸé—®é¢˜</li></ul> <h4 id="ç®€æ˜“æ‰“åŒ…-â˜…â˜…â˜…"><a href="#ç®€æ˜“æ‰“åŒ…-â˜…â˜…â˜…" class="header-anchor">#</a> ç®€æ˜“æ‰“åŒ…ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li><p>æ‰“å¼€ create-react-app è„šæ‰‹æ¶çš„ <a href="https://facebook.github.io/create-react-app/docs/deployment" target="_blank" rel="noopener noreferrer">æ‰“åŒ…æ–‡æ¡£è¯´æ˜<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>åœ¨æ ¹ç›®å½•åˆ›å»º .env.production æ–‡ä»¶ï¼Œé…ç½®ç”Ÿäº§ç¯å¢ƒçš„æ¥å£åŸºç¡€è·¯å¾„</p></li> <li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯</p></li> <li><p>è¾“å…¥å‘½ä»¤ï¼š yarn buildï¼Œè¿›è¡Œé¡¹ç›®æ‰“åŒ…ï¼Œç”Ÿæˆbuildæ–‡ä»¶å¤¹ï¼ˆæ‰“åŒ…å¥½çš„é¡¹ç›®å†…å®¹ï¼‰</p></li> <li><p>å°†buildç›®å½•ä¸­çš„æ–‡ä»¶å†…å®¹ï¼Œéƒ¨ç½²åˆ°éƒ½æœåŠ¡å™¨ä¸­å³å¯</p></li> <li><p>ä¹Ÿå¯ä»¥é€šè¿‡ç»ˆç«¯ä¸­çš„æç¤ºï¼Œä½¿ç”¨ serve-s build æ¥æœ¬åœ°æŸ¥çœ‹ï¼ˆéœ€è¦å…¨å±€å®‰è£…å·¥å…·åŒ… serveï¼‰</p></li> <li><p><strong>å¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºï¼Œå°±ä»£è¡¨æ‰“åŒ…æˆåŠŸï¼Œåœ¨æ ¹ç›®å½•ä¸­å°±ä¼šç”Ÿæˆä¸€ä¸ªbuildæ–‡ä»¶å¤¹</strong></p></li></ul> <h4 id="è„šæ‰‹æ¶çš„é…ç½®è¯´æ˜-â˜…â˜…â˜…"><a href="#è„šæ‰‹æ¶çš„é…ç½®è¯´æ˜-â˜…â˜…â˜…" class="header-anchor">#</a> è„šæ‰‹æ¶çš„é…ç½®è¯´æ˜ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <p>create-react-app ä¸­éšè—äº† webpackçš„é…ç½®ï¼Œéšè—åœ¨react-scriptsåŒ…ä¸­</p> <p>ä¸¤ç§æ–¹å¼æ¥ä¿®æ”¹</p> <ul><li><p>è¿è¡Œå‘½ä»¤ npm run eject é‡Šæ”¾ webpacké…ç½®ï¼ˆæ³¨æ„ï¼šä¸å¯é€†ï¼‰</p></li> <li><p>å¦‚æœæ‚¨å¯¹æ„å»ºå·¥å…·å’Œé…ç½®é€‰æ‹©ä¸æ»¡æ„ï¼Œæ‚¨å¯ä»¥ejectéšæ—¶è¿›è¡Œã€‚æ­¤å‘½ä»¤å°†ä»é¡¹ç›®ä¸­åˆ é™¤å•ä¸ªæ„å»ºä¾èµ–é¡¹ã€‚</p></li> <li><p>ç›¸åï¼Œå®ƒä¼šå°†æ‰€æœ‰é…ç½®æ–‡ä»¶å’Œä¼ é€’ä¾èµ–é¡¹ï¼ˆWebpackï¼ŒBabelï¼ŒESLintç­‰ï¼‰ä½œä¸ºä¾èµ–é¡¹å¤åˆ¶åˆ°é¡¹ç›®ä¸­package.jsonã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¾èµ–å…³ç³»å’Œå¼€å‘ä¾èµ–å…³ç³»ä¹‹é—´çš„åŒºåˆ«å¯¹äºç”Ÿæˆé™æ€åŒ…çš„å‰ç«¯åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯éå¸¸éšæ„çš„ã€‚æ­¤å¤–ï¼Œå®ƒæ›¾ç»å¯¼è‡´æŸäº›æ‰˜ç®¡å¹³å°å‡ºç°é—®é¢˜ï¼Œè¿™äº›æ‰˜ç®¡å¹³å°æ²¡æœ‰å®‰è£…å¼€å‘ä¾èµ–é¡¹ï¼ˆå› æ­¤æ— æ³•åœ¨æœåŠ¡å™¨ä¸Šæ„å»ºé¡¹ç›®æˆ–åœ¨éƒ¨ç½²ä¹‹å‰å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼‰ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±é‡æ–°æ’åˆ—ä¾èµ–é¡¹package.jsonã€‚</p></li> <li><p>é™¤äº†ejectä»ç„¶å¯ä»¥ä½¿ç”¨æ‰€æœ‰å‘½ä»¤ï¼Œä½†å®ƒä»¬å°†æŒ‡å‘å¤åˆ¶çš„è„šæœ¬ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥è°ƒæ•´å®ƒä»¬ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ æ˜¯ç‹¬ç«‹çš„ã€‚</p></li> <li><p>ä½ ä¸å¿…ä½¿ç”¨ejectã€‚ç­–åˆ’çš„åŠŸèƒ½é›†é€‚ç”¨äºä¸­å°å‹éƒ¨ç½²ï¼Œæ‚¨ä¸åº”è§‰å¾—æœ‰ä¹‰åŠ¡ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ‚¨å‡†å¤‡å¥½å®ƒæ—¶æ— æ³•è‡ªå®šä¹‰æ­¤å·¥å…·å°†æ— ç”¨</p></li> <li><p>é€šè¿‡ç¬¬ä¸‰æ–¹åŒ…é‡å†™ webpacké…ç½®ï¼ˆæ¯”å¦‚ï¼šreact-app-rewired ç­‰ï¼‰</p></li></ul> <h4 id="antd-mobile-æŒ‰éœ€åŠ è½½-â˜…â˜…â˜…"><a href="#antd-mobile-æŒ‰éœ€åŠ è½½-â˜…â˜…â˜…" class="header-anchor">#</a> antd-mobile æŒ‰éœ€åŠ è½½ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li><p>æ‰“å¼€ antd-mobile åœ¨create-react-appä¸­çš„ä½¿ç”¨æ–‡æ¡£</p></li> <li><p>å®‰è£… yarn add react-app-rewired customize-craï¼ˆç”¨äºè„šæ‰‹æ¶é‡å†™é…ç½®ï¼‰</p></li> <li><p>ä¿®æ”¹package.json ä¸­çš„ scripts</p></li> <li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶ï¼š config-overrides.js(ç”¨äºè¦†ç›–è„šæ‰‹æ¶é»˜è®¤é…ç½®)</p></li> <li><p>å®‰è£… yarn add babel-plugin-import æ’ä»¶ï¼ˆç”¨äºæŒ‰éœ€åŠ è½½ç»„ä»¶ä»£ç å’Œæ ·å¼ï¼‰</p></li> <li><p>ä¿®æ”¹ config-overrides.js æ–‡ä»¶ï¼Œé…ç½®æŒ‰éœ€åŠ è½½åŠŸèƒ½</p></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const { override, fixBabelImports } = require('customize-cra');
module.exports = override(
  fixBabelImports('import', {
    libraryName: 'antd-mobile',
    style: 'css',
  }),
);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é‡å¯é¡¹ç›®ï¼ˆyarn startï¼‰</p> <p>ç§»é™¤index.js ä¸­å¯¼å…¥çš„ antd-mobileæ ·å¼æ–‡ä»¶</p> <p>å°†index.css ç§»åŠ¨åˆ°Appåé¢ï¼Œè®©index.css ä¸­çš„é¡µé¢èƒŒæ™¯ç”Ÿæ•ˆ</p> <p>æ‰“å®ŒåŒ…åï¼Œä½ ä¼šå‘ç°ï¼Œä¸¤æ¬¡æ‰“åŒ…çš„ä½“ç§¯ä¼šæœ‰å˜åŒ–ï¼Œè¿™æ ·è¾¾åˆ°äº†ä¸€ä¸ªä»£ç ä½“ç§¯ä¼˜åŒ–çš„å±‚é¢</p> <h4 id="åŸºäºè·¯ç”±ä»£ç åˆ†å‰²-â˜…â˜…â˜…"><a href="#åŸºäºè·¯ç”±ä»£ç åˆ†å‰²-â˜…â˜…â˜…" class="header-anchor">#</a> åŸºäºè·¯ç”±ä»£ç åˆ†å‰²ï¼ˆâ˜…â˜…â˜…ï¼‰</h4> <ul><li>ç›®çš„ï¼šå°†ä»£ç æŒ‰ç…§è·¯ç”±è¿›è¡Œåˆ†å‰²ï¼Œåªåœ¨è®¿é—®è¯¥è·¯ç”±çš„æ—¶å€™æ‰åŠ è½½è¯¥ç»„ä»¶å†…å®¹ï¼Œæé«˜é¦–å±åŠ è½½é€Ÿåº¦</li> <li>å¦‚ä½•å®ç°ï¼Ÿ React.lazy() æ–¹æ³• + import() æ–¹æ³•ã€Suspenseç»„ä»¶ï¼ˆReact Code-Splittingæ–‡æ¡£ï¼‰</li> <li>React.lazy() ä½œç”¨ï¼š å¤„ç†åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ï¼Œè®©å…¶åƒæ™®é€šç»„ä»¶ä¸€æ ·ä½¿ç”¨</li> <li>import(â€˜ç»„ä»¶è·¯å¾„â€™)ï¼Œä½œç”¨ï¼šå‘Šè¯‰webpackï¼Œè¿™æ˜¯ä¸€ä¸ªä»£ç åˆ†å‰²ç‚¹ï¼Œè¿›è¡Œä»£ç åˆ†å‰²</li> <li>Suspenseç»„ä»¶ï¼šç”¨æ¥åœ¨åŠ¨æ€ç»„ä»¶åŠ è½½å®Œæˆä¹‹å‰ï¼Œæ˜¾ç¤ºä¸€äº›loadingå†…å®¹ï¼Œéœ€è¦åŒ…è£¹åŠ¨æ€ç»„ä»¶å†…å®¹</li></ul> <h4 id="å…¶ä»–æ€§èƒ½ä¼˜åŒ–-â˜…â˜…"><a href="#å…¶ä»–æ€§èƒ½ä¼˜åŒ–-â˜…â˜…" class="header-anchor">#</a> å…¶ä»–æ€§èƒ½ä¼˜åŒ–ï¼ˆâ˜…â˜…ï¼‰</h4> <ul><li>React.js ä¼˜åŒ–æ€§èƒ½<a href="https://reactjs.org/docs/docs/optimizing-performance.html" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>react-virtualizedåªåŠ è½½ç”¨åˆ°çš„ç»„ä»¶ <a href="https://github.com/bvaughn/react-virtualized#getting-started" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>è„šæ‰‹æ¶é…ç½® è§£å†³è·¨åŸŸé—®é¢˜
<ul><li>å®‰è£… http-proxy-middleware</li></ul></li></ul> <div class="language-react line-numbers-mode"><pre class="language-text"><code>$ npm install http-proxy-middleware --save
$ # or
$ yarn add http-proxy-middleware

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åˆ›å»º<code>src/setupProxy.js</code>å¹¶æ”¾ç½®ä»¥ä¸‹å†…å®¹</p> <div class="language-react line-numbers-mode"><pre class="language-text"><code>const proxy = require('http-proxy-middleware');

module.exports = function(app) {
  app.use(proxy('/api', { target: 'http://localhost:5000/' }));
};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>**æ³¨æ„ï¼š**æ— éœ€åœ¨ä»»ä½•ä½ç½®å¯¼å…¥æ­¤æ–‡ä»¶ã€‚å®ƒåœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶è‡ªåŠ¨æ³¨å†Œï¼Œæ­¤æ–‡ä»¶ä»…æ”¯æŒNodeçš„JavaScriptè¯­æ³•ã€‚è¯·åŠ¡å¿…ä»…ä½¿ç”¨æ”¯æŒçš„è¯­è¨€åŠŸèƒ½ï¼ˆå³ä¸æ”¯æŒFlowï¼ŒESæ¨¡å—ç­‰ï¼‰ã€‚å°†è·¯å¾„ä¼ é€’ç»™ä»£ç†åŠŸèƒ½å…è®¸æ‚¨åœ¨è·¯å¾„ä¸Šä½¿ç”¨é€šé…å’Œ/æˆ–æ¨¡å¼åŒ¹é…ï¼Œè¿™æ¯”å¿«é€Ÿè·¯ç”±åŒ¹é…æ›´çµæ´»</li></ul> <h3 id="å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸‹-æ€»ç»“"><a href="#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸‹-æ€»ç»“" class="header-anchor">#</a> å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸‹ï¼‰-æ€»ç»“</h3> <ul><li>ç™»å½•æ¨¡å—ï¼šä½¿ç”¨Fomikç»„ä»¶å®ç°äº†è¡¨å•å¤„ç†å’Œè¡¨å•æ ¡éªŒã€å°è£…é‰´æƒè·¯ç”±AuthRouteå’Œaxiosæ‹¦æˆªå™¨å®ç°ç™»å½•è®¿é—®æ§åˆ¶</li> <li>æˆ‘çš„æ”¶è—æ¨¡å—ï¼šæ·»åŠ ã€å–æ¶ˆæ”¶è—</li> <li>å‘å¸ƒæˆ¿æºæ¨¡å—ï¼šå°åŒºå…³é”®è¯æœç´¢ã€å›¾ç‰‡ä¸Šä¼ ã€å‘å¸ƒæˆ¿æºä¿¡æ¯</li> <li>é¡¹ç›®æ‰“åŒ…å’Œä¼˜åŒ–ï¼šantd-mobileç»„ä»¶åº“æŒ‰éœ€åŠ è½½ï¼ŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²å®ç°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼Œæé«˜äº†é¦–å±åŠ è½½é€Ÿåº¦</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022-07-02 01:47:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/huawink-/docs/frontend/2021/CompositionAPI.html" class="prev">
            Composition API
          </a></span> <span class="next"><a href="/huawink-/docs/frontend/2021/createElement.html">
            createElement ç”¨æ³•
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day01" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day01" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day01</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ç›®æ ‡" class="sidebar-link reco-side-ç›®æ ‡" data-v-cb1513f6>ç›®æ ‡</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¹ç›®æ­å»º-â˜…â˜…â˜…" class="sidebar-link reco-side-é¡¹ç›®æ­å»º-â˜…â˜…â˜…" data-v-cb1513f6>é¡¹ç›®æ­å»ºï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å®‰è£…" class="sidebar-link reco-side-å®‰è£…" data-v-cb1513f6>å®‰è£…</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é…ç½®è·¯ç”±" class="sidebar-link reco-side-é…ç½®è·¯ç”±" data-v-cb1513f6>é…ç½®è·¯ç”±</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#tabbarä»£ç çš„é‡æ„" class="sidebar-link reco-side-tabbarä»£ç çš„é‡æ„" data-v-cb1513f6>TabBarä»£ç çš„é‡æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¦–é¡µå®ç°-â˜…â˜…â˜…" class="sidebar-link reco-side-é¦–é¡µå®ç°-â˜…â˜…â˜…" data-v-cb1513f6>é¦–é¡µå®ç°ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day02" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day02" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day02</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è½®æ’­å›¾-å¯¼èˆªæ -ç™¾åº¦åœ°å›¾" class="sidebar-link reco-side-è½®æ’­å›¾-å¯¼èˆªæ -ç™¾åº¦åœ°å›¾" data-v-cb1513f6>è½®æ’­å›¾&amp;å¯¼èˆªæ &amp;ç™¾åº¦åœ°å›¾</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è·å–è½®æ’­å›¾çš„æ•°æ®" class="sidebar-link reco-side-è·å–è½®æ’­å›¾çš„æ•°æ®" data-v-cb1513f6>è·å–è½®æ’­å›¾çš„æ•°æ®</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¯¼èˆªèœå•-â˜…â˜…â˜…" class="sidebar-link reco-side-å¯¼èˆªèœå•-â˜…â˜…â˜…" data-v-cb1513f6>å¯¼èˆªèœå•ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¯¼èˆªèœå•çš„é‡æ„" class="sidebar-link reco-side-å¯¼èˆªèœå•çš„é‡æ„" data-v-cb1513f6>å¯¼èˆªèœå•çš„é‡æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è½®æ’­å›¾çš„é—®é¢˜-â˜…â˜…â˜…" class="sidebar-link reco-side-è½®æ’­å›¾çš„é—®é¢˜-â˜…â˜…â˜…" data-v-cb1513f6>è½®æ’­å›¾çš„é—®é¢˜ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#tabbarçš„é—®é¢˜-â˜…â˜…â˜…" class="sidebar-link reco-side-tabbarçš„é—®é¢˜-â˜…â˜…â˜…" data-v-cb1513f6>TabBarçš„é—®é¢˜ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#sassçš„ä½¿ç”¨" class="sidebar-link reco-side-sassçš„ä½¿ç”¨" data-v-cb1513f6>Sassçš„ä½¿ç”¨</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡µé¢ç»“æ„æ ·å¼" class="sidebar-link reco-side-é¡µé¢ç»“æ„æ ·å¼" data-v-cb1513f6>é¡µé¢ç»“æ„æ ·å¼</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æœ€æ–°èµ„è®¯" class="sidebar-link reco-side-æœ€æ–°èµ„è®¯" data-v-cb1513f6>æœ€æ–°èµ„è®¯</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½-â˜…â˜…â˜…" class="sidebar-link reco-side-é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½-â˜…â˜…â˜…" data-v-cb1513f6>é¡¶éƒ¨å¯¼èˆªåŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å®šä½ç›¸å…³" class="sidebar-link reco-side-å®šä½ç›¸å…³" data-v-cb1513f6>å®šä½ç›¸å…³</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day03" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day03" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day03</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åŸå¸‚é€‰æ‹©æ¨¡å—" class="sidebar-link reco-side-åŸå¸‚é€‰æ‹©æ¨¡å—" data-v-cb1513f6>åŸå¸‚é€‰æ‹©æ¨¡å—</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¶éƒ¨å¯¼èˆªæ -â˜…â˜…â˜…" class="sidebar-link reco-side-é¡¶éƒ¨å¯¼èˆªæ -â˜…â˜…â˜…" data-v-cb1513f6>é¡¶éƒ¨å¯¼èˆªæ ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è·å–å¤„ç†æ•°æ®-â˜…â˜…â˜…" class="sidebar-link reco-side-è·å–å¤„ç†æ•°æ®-â˜…â˜…â˜…" data-v-cb1513f6>è·å–å¤„ç†æ•°æ®ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â˜…â˜…" class="sidebar-link reco-side-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â˜…â˜…" data-v-cb1513f6>é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–ï¼ˆâ˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#react-virtualized-â˜…â˜…â˜…" class="sidebar-link reco-side-react-virtualized-â˜…â˜…â˜…" data-v-cb1513f6>react-virtualizedï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ¸²æŸ“åŸå¸‚åˆ—è¡¨-â˜…â˜…â˜…" class="sidebar-link reco-side-æ¸²æŸ“åŸå¸‚åˆ—è¡¨-â˜…â˜…â˜…" data-v-cb1513f6>æ¸²æŸ“åŸå¸‚åˆ—è¡¨ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day04" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day04" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day04</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ¸²æŸ“åŸå¸‚åˆ—è¡¨-2" class="sidebar-link reco-side-æ¸²æŸ“åŸå¸‚åˆ—è¡¨-2" data-v-cb1513f6>æ¸²æŸ“åŸå¸‚åˆ—è¡¨</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸Š-æ€»ç»“" class="sidebar-link reco-side-å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸Š-æ€»ç»“" data-v-cb1513f6>å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸Šï¼‰-æ€»ç»“</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-ç›®æ ‡" class="sidebar-link reco-side-å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-ç›®æ ‡" data-v-cb1513f6>å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸­ï¼‰-ç›®æ ‡</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åœ°å›¾æ‰¾æˆ¿æ¨¡å—" class="sidebar-link reco-side-åœ°å›¾æ‰¾æˆ¿æ¨¡å—" data-v-cb1513f6>åœ°å›¾æ‰¾æˆ¿æ¨¡å—</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¶éƒ¨å¯¼èˆªæ " class="sidebar-link reco-side-é¡¶éƒ¨å¯¼èˆªæ " data-v-cb1513f6>é¡¶éƒ¨å¯¼èˆªæ </a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ ·å¼è°ƒæ•´" class="sidebar-link reco-side-æ ·å¼è°ƒæ•´" data-v-cb1513f6>æ ·å¼è°ƒæ•´</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åŠŸèƒ½å¤„ç†" class="sidebar-link reco-side-åŠŸèƒ½å¤„ç†" data-v-cb1513f6>åŠŸèƒ½å¤„ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ·»åŠ propsæ ¡éªŒ" class="sidebar-link reco-side-æ·»åŠ propsæ ¡éªŒ" data-v-cb1513f6>æ·»åŠ propsæ ¡éªŒ</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜" class="sidebar-link reco-side-ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜" data-v-cb1513f6>ç»„ä»¶ä¹‹é—´æ ·å¼è¦†ç›–é—®é¢˜</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#css-modules" class="sidebar-link reco-side-css-modules" data-v-cb1513f6>CSS Modules</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ä½¿ç”¨css-modulesä¿®æ”¹-navheader-æ ·å¼" class="sidebar-link reco-side-ä½¿ç”¨css-modulesä¿®æ”¹-navheader-æ ·å¼" data-v-cb1513f6>ä½¿ç”¨CSS Modulesä¿®æ”¹ NavHeader æ ·å¼</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åœ¨mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼" class="sidebar-link reco-side-åœ¨mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼" data-v-cb1513f6>åœ¨Mapç»„ä»¶ä¸­ä¿®æ”¹å¤´éƒ¨æ ·å¼</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day05" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day05" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day05</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åœ°å›¾æ‰¾æˆ¿æ¨¡å—-2" class="sidebar-link reco-side-åœ°å›¾æ‰¾æˆ¿æ¨¡å—-2" data-v-cb1513f6>åœ°å›¾æ‰¾æˆ¿æ¨¡å—</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æ-â˜…â˜…â˜…" class="sidebar-link reco-side-åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æ-â˜…â˜…â˜…" data-v-cb1513f6>åœ°å›¾æ‰¾æˆ¿-ä¸šåŠ¡é€»è¾‘åˆ†æï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ·»åŠ loadingæ•ˆæœ-â˜…â˜…â˜…" class="sidebar-link reco-side-æ·»åŠ loadingæ•ˆæœ-â˜…â˜…â˜…" data-v-cb1513f6>æ·»åŠ Loadingæ•ˆæœï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day06" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day06" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day06</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#axiosä¼˜åŒ–-ç¯å¢ƒå˜é‡" class="sidebar-link reco-side-axiosä¼˜åŒ–-ç¯å¢ƒå˜é‡" data-v-cb1513f6>axiosä¼˜åŒ–&amp;ç¯å¢ƒå˜é‡</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿åŠŸèƒ½</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¶éƒ¨æœç´¢å¯¼èˆªæ " class="sidebar-link reco-side-é¡¶éƒ¨æœç´¢å¯¼èˆªæ " data-v-cb1513f6>é¡¶éƒ¨æœç´¢å¯¼èˆªæ </a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#filtertitleç»„ä»¶å®ç°-â˜…â˜…â˜…" class="sidebar-link reco-side-filtertitleç»„ä»¶å®ç°-â˜…â˜…â˜…" data-v-cb1513f6>FilterTitleç»„ä»¶å®ç°ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#filterpicker-ç»„ä»¶-â˜…â˜…â˜…" class="sidebar-link reco-side-filterpicker-ç»„ä»¶-â˜…â˜…â˜…" data-v-cb1513f6>FilterPicker ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day07" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day07" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day07</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æ¡ä»¶ç­›é€‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„filtertitle-â˜…â˜…â˜…" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„filtertitle-â˜…â˜…â˜…" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å®Œå–„FilterTitleï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-filtermoreç»„ä»¶" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-filtermoreç»„ä»¶" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-FilterMoreç»„ä»¶</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å®Œå–„filtertitleé«˜äº®åŠŸèƒ½-â˜…â˜…" class="sidebar-link reco-side-å®Œå–„filtertitleé«˜äº®åŠŸèƒ½-â˜…â˜…" data-v-cb1513f6>å®Œå–„FilterTitleé«˜äº®åŠŸèƒ½ï¼ˆâ˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-è·å–æˆ¿å±‹åˆ—è¡¨æ•°æ®</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day08" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day08" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day08</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-æˆ¿å±‹åˆ—è¡¨</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#infiniteloader-ç»„ä»¶-â˜…â˜…â˜…" class="sidebar-link reco-side-infiniteloader-ç»„ä»¶-â˜…â˜…â˜…" data-v-cb1513f6>InfiniteLoader ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®" class="sidebar-link reco-side-åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®" data-v-cb1513f6>åŠ è½½æ›´å¤šæˆ¿å±‹åˆ—è¡¨æ•°æ®</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½-â˜…â˜…â˜…" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½-â˜…â˜…â˜…" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-å¸é¡¶åŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–-â˜…â˜…â˜…" class="sidebar-link reco-side-åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–-â˜…â˜…â˜…" data-v-cb1513f6>åˆ—è¡¨æ‰¾æˆ¿æ¨¡å—-ä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–" class="sidebar-link reco-side-æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–" data-v-cb1513f6>æ¡ä»¶ç­›é€‰æ ä¼˜åŒ–</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–" class="sidebar-link reco-side-åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–" data-v-cb1513f6>åˆ‡æ¢åŸå¸‚æ˜¾ç¤ºæˆ¿æºä¼˜åŒ–</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#react-springåŠ¨ç”»åº“-â˜…â˜…â˜…" class="sidebar-link reco-side-react-springåŠ¨ç”»åº“-â˜…â˜…â˜…" data-v-cb1513f6>react-springåŠ¨ç”»åº“ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day09" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day09" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day09</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ" class="sidebar-link reco-side-æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ" data-v-cb1513f6>æˆ¿å±‹è¯¦æƒ…æ¨¡å—-å‡†å¤‡å·¥ä½œ</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-å°ç»“" class="sidebar-link reco-side-å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸­-å°ç»“" data-v-cb1513f6>å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸­ï¼‰å°ç»“</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ç™»å½•æ¨¡å—-â˜…â˜…â˜…" class="sidebar-link reco-side-ç™»å½•æ¨¡å—-â˜…â˜…â˜…" data-v-cb1513f6>ç™»å½•æ¨¡å—ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è¡¨å•éªŒè¯è¯´æ˜" class="sidebar-link reco-side-è¡¨å•éªŒè¯è¯´æ˜" data-v-cb1513f6>è¡¨å•éªŒè¯è¯´æ˜</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#formik" class="sidebar-link reco-side-formik" data-v-cb1513f6>formik</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#formikæ¥å®ç°è¡¨å•æ ¡éªŒ-â˜…â˜…â˜…" class="sidebar-link reco-side-formikæ¥å®ç°è¡¨å•æ ¡éªŒ-â˜…â˜…â˜…" data-v-cb1513f6>formikæ¥å®ç°è¡¨å•æ ¡éªŒï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day10" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day10" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day10</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æˆ‘çš„é¡µé¢" class="sidebar-link reco-side-æˆ‘çš„é¡µé¢" data-v-cb1513f6>æˆ‘çš„é¡µé¢</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤-â˜…â˜…â˜…" class="sidebar-link reco-side-åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤-â˜…â˜…â˜…" data-v-cb1513f6>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æ­¥éª¤ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é€€å‡ºåŠŸèƒ½-â˜…â˜…â˜…" class="sidebar-link reco-side-é€€å‡ºåŠŸèƒ½-â˜…â˜…â˜…" data-v-cb1513f6>é€€å‡ºåŠŸèƒ½ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ç™»å½•è®¿é—®æ§åˆ¶" class="sidebar-link reco-side-ç™»å½•è®¿é—®æ§åˆ¶" data-v-cb1513f6>ç™»å½•è®¿é—®æ§åˆ¶</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†token-â˜…â˜…â˜…" class="sidebar-link reco-side-åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†token-â˜…â˜…â˜…" data-v-cb1513f6>åŠŸèƒ½å¤„ç†-ä½¿ç”¨axiosæ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†tokenï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡µé¢å¤„ç†-authrouteé‰´æƒè·¯ç”±ç»„ä»¶-â˜…â˜…â˜…" class="sidebar-link reco-side-é¡µé¢å¤„ç†-authrouteé‰´æƒè·¯ç”±ç»„ä»¶-â˜…â˜…â˜…" data-v-cb1513f6>é¡µé¢å¤„ç†-AuthRouteé‰´æƒè·¯ç”±ç»„ä»¶ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å°è£…authrouteé‰´æƒè·¯ç”±ç»„ä»¶" class="sidebar-link reco-side-å°è£…authrouteé‰´æƒè·¯ç”±ç»„ä»¶" data-v-cb1513f6>å°è£…AuthRouteé‰´æƒè·¯ç”±ç»„ä»¶</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬" class="sidebar-link reco-side-ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬" data-v-cb1513f6>ä¿®æ”¹ç™»å½•æˆåŠŸè·³è½¬</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æˆ‘çš„æ”¶è—æ¨¡å—" class="sidebar-link reco-side-æˆ‘çš„æ”¶è—æ¨¡å—" data-v-cb1513f6>æˆ‘çš„æ”¶è—æ¨¡å—</a></li><li class="level-2" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#reactå¥½ç§Ÿå®¢é¡¹ç›®day11" class="sidebar-link reco-side-reactå¥½ç§Ÿå®¢é¡¹ç›®day11" data-v-cb1513f6>reactå¥½ç§Ÿå®¢é¡¹ç›®Day11</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å‰æœŸå‡†å¤‡å·¥ä½œ" class="sidebar-link reco-side-å‰æœŸå‡†å¤‡å·¥ä½œ" data-v-cb1513f6>å‰æœŸå‡†å¤‡å·¥ä½œ</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#æœç´¢æ¨¡å—-â˜…â˜…â˜…" class="sidebar-link reco-side-æœç´¢æ¨¡å—-â˜…â˜…â˜…" data-v-cb1513f6>æœç´¢æ¨¡å—ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è·å–æˆ¿æºæ•°æ®åˆ†æ-â˜…â˜…" class="sidebar-link reco-side-è·å–æˆ¿æºæ•°æ®åˆ†æ-â˜…â˜…" data-v-cb1513f6>è·å–æˆ¿æºæ•°æ®åˆ†æï¼ˆâ˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#è·å–æˆ¿å±‹é…ç½®æ•°æ®-â˜…â˜…" class="sidebar-link reco-side-è·å–æˆ¿å±‹é…ç½®æ•°æ®-â˜…â˜…" data-v-cb1513f6>è·å–æˆ¿å±‹é…ç½®æ•°æ®ï¼ˆâ˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å›¾ç‰‡ä¸Šä¼ -â˜…â˜…â˜…" class="sidebar-link reco-side-å›¾ç‰‡ä¸Šä¼ -â˜…â˜…â˜…" data-v-cb1513f6>å›¾ç‰‡ä¸Šä¼ ï¼ˆâ˜…â˜…â˜…ï¼‰</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#é¡¹ç›®æ‰“åŒ…" class="sidebar-link reco-side-é¡¹ç›®æ‰“åŒ…" data-v-cb1513f6>é¡¹ç›®æ‰“åŒ…</a></li><li class="level-3" data-v-cb1513f6><a href="/huawink-/docs/frontend/2021/ReactHouseProject.html#å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸‹-æ€»ç»“" class="sidebar-link reco-side-å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨web-ä¸‹-æ€»ç»“" data-v-cb1513f6>å¥½å®¢ç§Ÿæˆ¿ç§»åŠ¨Webï¼ˆä¸‹ï¼‰-æ€»ç»“</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><!----><APlayer audio="" fixed="true" mini="true" autoplay="autoplay" theme="#f9bcdd" loop="loop" order="random" preload="auto" volume="0.1" mutex="true" lrc-type="0" list-folded="true" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer></div></div>
    <script src="/huawink-/assets/js/app.3aacfd90.js" defer></script><script src="/huawink-/assets/js/3.ee31ba41.js" defer></script><script src="/huawink-/assets/js/1.3a84ebb9.js" defer></script><script src="/huawink-/assets/js/25.f5f0deb4.js" defer></script><script src="/huawink-/assets/js/9.724b2d6f.js" defer></script>
  </body>
</html>
